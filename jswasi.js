if(typeof window==="undefined"){
var i="wash-cache",c=["./jswasi.js"];self.addEventListener("install",async()=>{await(await caches.open(i)).addAll(c)});async function n(e){return caches.match(e).then(async t=>{if(t===void 0&&(e.mode==="no-cors"&&(e=new Request(e.url,{cache:e.cache,credentials:"omit",headers:e.headers,integrity:e.integrity,destination:e.destination,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy,signal:e.signal})),t=await fetch(e)),t.status===0)return t;let a=new Headers(t.headers);return a.set("Cross-Origin-Embedder-Policy","require-corp"),a.set("Cross-Origin-Opener-Policy","same-origin"),new Response(t.body,{status:t.status,statusText:t.statusText,headers:a})})}self.addEventListener("fetch",e=>{let t=e,a=t.request;t.respondWith(n(a))});
}else{
var uh=Object.defineProperty;var fh=(n,e,t)=>e in n?uh(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pt=(n,e,t)=>(fh(n,typeof e!="symbol"?e+"":e,t),t);var Hu=URL.createObjectURL(new Blob([function(){var n=Object.defineProperty,e=(Q,x,A)=>x in Q?n(Q,x,{enumerable:!0,configurable:!0,writable:!0,value:A}):Q[x]=A,t=(Q,x,A)=>(e(Q,typeof x!="symbol"?x+"":x,A),A),r=BigInt(1),i=BigInt(2),s=BigInt(4),a=BigInt(8),o=BigInt(16),c=BigInt(32),u=BigInt(64),d=BigInt(128),h=BigInt(256),_=BigInt(512),y=BigInt(1024),T=BigInt(2048),R=BigInt(4096),X=BigInt(8192),V=BigInt(16384),ee=BigInt(32768),q=BigInt(65536),ue=BigInt(131072),Ee=BigInt(262144),Oe=BigInt(524288),it=BigInt(1048576),Cr=BigInt(2097152),vn=BigInt(4194304),Qt=BigInt(8388608),Or=BigInt(16777216),Kn=BigInt(33554432),Xn=BigInt(67108864),Dt=BigInt(134217728),Jr=BigInt(268435456),Zt=BigInt(536870911),qn=r|i|o|d|Cr|Dt,Qe=r|u|o|d|Cr|Dt,Ie=0,Jn=1,Ca=2,we=3,zi=0,Oa=1,Qn=2,xa=0,Zn=1,Wa=2,Ra=0,Fa=2,gu=1<<0,Da=1<<1,Ki=0,Qr=1,Na=2,La=3,mn=4,Xi=5,ei=6,ka=7,dt=class{static hashStr(Q,x=!1){return this.onePassHasher.start().appendStr(Q).end(x)}static hashAsciiStr(Q,x=!1){return this.onePassHasher.start().appendAsciiStr(Q).end(x)}static _hex(Q){let x=dt.hexChars,A=dt.hexOut,m,I,C,st;for(st=0;st<4;st+=1)for(I=st*8,m=Q[st],C=0;C<8;C+=2)A[I+1+C]=x.charAt(m&15),m>>>=4,A[I+0+C]=x.charAt(m&15),m>>>=4;return A.join("")}static _md5cycle(Q,x){let A=Q[0],m=Q[1],I=Q[2],C=Q[3];A+=(m&I|~m&C)+x[0]-680876936|0,A=(A<<7|A>>>25)+m|0,C+=(A&m|~A&I)+x[1]-389564586|0,C=(C<<12|C>>>20)+A|0,I+=(C&A|~C&m)+x[2]+606105819|0,I=(I<<17|I>>>15)+C|0,m+=(I&C|~I&A)+x[3]-1044525330|0,m=(m<<22|m>>>10)+I|0,A+=(m&I|~m&C)+x[4]-176418897|0,A=(A<<7|A>>>25)+m|0,C+=(A&m|~A&I)+x[5]+1200080426|0,C=(C<<12|C>>>20)+A|0,I+=(C&A|~C&m)+x[6]-1473231341|0,I=(I<<17|I>>>15)+C|0,m+=(I&C|~I&A)+x[7]-45705983|0,m=(m<<22|m>>>10)+I|0,A+=(m&I|~m&C)+x[8]+1770035416|0,A=(A<<7|A>>>25)+m|0,C+=(A&m|~A&I)+x[9]-1958414417|0,C=(C<<12|C>>>20)+A|0,I+=(C&A|~C&m)+x[10]-42063|0,I=(I<<17|I>>>15)+C|0,m+=(I&C|~I&A)+x[11]-1990404162|0,m=(m<<22|m>>>10)+I|0,A+=(m&I|~m&C)+x[12]+1804603682|0,A=(A<<7|A>>>25)+m|0,C+=(A&m|~A&I)+x[13]-40341101|0,C=(C<<12|C>>>20)+A|0,I+=(C&A|~C&m)+x[14]-1502002290|0,I=(I<<17|I>>>15)+C|0,m+=(I&C|~I&A)+x[15]+1236535329|0,m=(m<<22|m>>>10)+I|0,A+=(m&C|I&~C)+x[1]-165796510|0,A=(A<<5|A>>>27)+m|0,C+=(A&I|m&~I)+x[6]-1069501632|0,C=(C<<9|C>>>23)+A|0,I+=(C&m|A&~m)+x[11]+643717713|0,I=(I<<14|I>>>18)+C|0,m+=(I&A|C&~A)+x[0]-373897302|0,m=(m<<20|m>>>12)+I|0,A+=(m&C|I&~C)+x[5]-701558691|0,A=(A<<5|A>>>27)+m|0,C+=(A&I|m&~I)+x[10]+38016083|0,C=(C<<9|C>>>23)+A|0,I+=(C&m|A&~m)+x[15]-660478335|0,I=(I<<14|I>>>18)+C|0,m+=(I&A|C&~A)+x[4]-405537848|0,m=(m<<20|m>>>12)+I|0,A+=(m&C|I&~C)+x[9]+568446438|0,A=(A<<5|A>>>27)+m|0,C+=(A&I|m&~I)+x[14]-1019803690|0,C=(C<<9|C>>>23)+A|0,I+=(C&m|A&~m)+x[3]-187363961|0,I=(I<<14|I>>>18)+C|0,m+=(I&A|C&~A)+x[8]+1163531501|0,m=(m<<20|m>>>12)+I|0,A+=(m&C|I&~C)+x[13]-1444681467|0,A=(A<<5|A>>>27)+m|0,C+=(A&I|m&~I)+x[2]-51403784|0,C=(C<<9|C>>>23)+A|0,I+=(C&m|A&~m)+x[7]+1735328473|0,I=(I<<14|I>>>18)+C|0,m+=(I&A|C&~A)+x[12]-1926607734|0,m=(m<<20|m>>>12)+I|0,A+=(m^I^C)+x[5]-378558|0,A=(A<<4|A>>>28)+m|0,C+=(A^m^I)+x[8]-2022574463|0,C=(C<<11|C>>>21)+A|0,I+=(C^A^m)+x[11]+1839030562|0,I=(I<<16|I>>>16)+C|0,m+=(I^C^A)+x[14]-35309556|0,m=(m<<23|m>>>9)+I|0,A+=(m^I^C)+x[1]-1530992060|0,A=(A<<4|A>>>28)+m|0,C+=(A^m^I)+x[4]+1272893353|0,C=(C<<11|C>>>21)+A|0,I+=(C^A^m)+x[7]-155497632|0,I=(I<<16|I>>>16)+C|0,m+=(I^C^A)+x[10]-1094730640|0,m=(m<<23|m>>>9)+I|0,A+=(m^I^C)+x[13]+681279174|0,A=(A<<4|A>>>28)+m|0,C+=(A^m^I)+x[0]-358537222|0,C=(C<<11|C>>>21)+A|0,I+=(C^A^m)+x[3]-722521979|0,I=(I<<16|I>>>16)+C|0,m+=(I^C^A)+x[6]+76029189|0,m=(m<<23|m>>>9)+I|0,A+=(m^I^C)+x[9]-640364487|0,A=(A<<4|A>>>28)+m|0,C+=(A^m^I)+x[12]-421815835|0,C=(C<<11|C>>>21)+A|0,I+=(C^A^m)+x[15]+530742520|0,I=(I<<16|I>>>16)+C|0,m+=(I^C^A)+x[2]-995338651|0,m=(m<<23|m>>>9)+I|0,A+=(I^(m|~C))+x[0]-198630844|0,A=(A<<6|A>>>26)+m|0,C+=(m^(A|~I))+x[7]+1126891415|0,C=(C<<10|C>>>22)+A|0,I+=(A^(C|~m))+x[14]-1416354905|0,I=(I<<15|I>>>17)+C|0,m+=(C^(I|~A))+x[5]-57434055|0,m=(m<<21|m>>>11)+I|0,A+=(I^(m|~C))+x[12]+1700485571|0,A=(A<<6|A>>>26)+m|0,C+=(m^(A|~I))+x[3]-1894986606|0,C=(C<<10|C>>>22)+A|0,I+=(A^(C|~m))+x[10]-1051523|0,I=(I<<15|I>>>17)+C|0,m+=(C^(I|~A))+x[1]-2054922799|0,m=(m<<21|m>>>11)+I|0,A+=(I^(m|~C))+x[8]+1873313359|0,A=(A<<6|A>>>26)+m|0,C+=(m^(A|~I))+x[15]-30611744|0,C=(C<<10|C>>>22)+A|0,I+=(A^(C|~m))+x[6]-1560198380|0,I=(I<<15|I>>>17)+C|0,m+=(C^(I|~A))+x[13]+1309151649|0,m=(m<<21|m>>>11)+I|0,A+=(I^(m|~C))+x[4]-145523070|0,A=(A<<6|A>>>26)+m|0,C+=(m^(A|~I))+x[11]-1120210379|0,C=(C<<10|C>>>22)+A|0,I+=(A^(C|~m))+x[2]+718787259|0,I=(I<<15|I>>>17)+C|0,m+=(C^(I|~A))+x[9]-343485551|0,m=(m<<21|m>>>11)+I|0,Q[0]=A+Q[0]|0,Q[1]=m+Q[1]|0,Q[2]=I+Q[2]|0,Q[3]=C+Q[3]|0}_dataLength=0;_bufferLength=0;_state=new Int32Array(4);_buffer=new ArrayBuffer(68);_buffer8;_buffer32;constructor(){this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(dt.stateIdentity),this}appendStr(Q){let x=this._buffer8,A=this._buffer32,m=this._bufferLength,I,C;for(C=0;C<Q.length;C+=1){if(I=Q.charCodeAt(C),I<128)x[m++]=I;else if(I<2048)x[m++]=(I>>>6)+192,x[m++]=I&63|128;else if(I<55296||I>56319)x[m++]=(I>>>12)+224,x[m++]=I>>>6&63|128,x[m++]=I&63|128;else{if(I=(I-55296)*1024+(Q.charCodeAt(++C)-56320)+65536,I>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");x[m++]=(I>>>18)+240,x[m++]=I>>>12&63|128,x[m++]=I>>>6&63|128,x[m++]=I&63|128}m>=64&&(this._dataLength+=64,dt._md5cycle(this._state,A),m-=64,A[0]=A[16])}return this._bufferLength=m,this}appendAsciiStr(Q){let x=this._buffer8,A=this._buffer32,m=this._bufferLength,I,C=0;for(;;){for(I=Math.min(Q.length-C,64-m);I--;)x[m++]=Q.charCodeAt(C++);if(m<64)break;this._dataLength+=64,dt._md5cycle(this._state,A),m=0}return this._bufferLength=m,this}appendByteArray(Q){let x=this._buffer8,A=this._buffer32,m=this._bufferLength,I,C=0;for(;;){for(I=Math.min(Q.length-C,64-m);I--;)x[m++]=Q[C++];if(m<64)break;this._dataLength+=64,dt._md5cycle(this._state,A),m=0}return this._bufferLength=m,this}getState(){let Q=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[Q[0],Q[1],Q[2],Q[3]]}}setState(Q){let x=Q.buffer,A=Q.state,m=this._state,I;for(this._dataLength=Q.length,this._bufferLength=Q.buflen,m[0]=A[0],m[1]=A[1],m[2]=A[2],m[3]=A[3],I=0;I<x.length;I+=1)this._buffer8[I]=x.charCodeAt(I)}end(Q=!1){let x=this._bufferLength,A=this._buffer8,m=this._buffer32,I=(x>>2)+1;this._dataLength+=x;let C=this._dataLength*8;if(A[x]=128,A[x+1]=A[x+2]=A[x+3]=0,m.set(dt.buffer32Identity.subarray(I),I),x>55&&(dt._md5cycle(this._state,m),m.set(dt.buffer32Identity)),C<=4294967295)m[14]=C;else{let st=C.toString(16).match(/(.*?)(.{0,8})$/);if(st===null)return"";let en=parseInt(st[2],16),si=parseInt(st[1],16)||0;m[14]=en,m[15]=si}return dt._md5cycle(this._state,m),Q?this._state:dt._hex(this._state)}},ur=dt;if(t(ur,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),t(ur,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),t(ur,"hexChars","0123456789abcdef"),t(ur,"hexOut",[]),t(ur,"onePassHasher",new dt),ur.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");function yn(Q){let x=[],A="",m=Q,I="",C=0;for(;m!=="";)m.indexOf("/")!==-1?I=m.substr(0,m.indexOf("/")):I=m,m=m.substr(I.length+1),I===".."?C>0&&(C-=1):I==="."||I!=""&&(x[C]=I,C+=1);return A=`/${x.slice(0,C).join("/")}`,A=A.replace("/./","/"),A}function Yt(Q){let x=Math.trunc(Q),A=BigInt(Math.round((Q-x)*1e6));return BigInt(x)*BigInt(1e6)+A}function qi(Q,x){switch(Q){case Jn:return Yt(performance.now());case Ie:return Yt(Date.now());case Ca:case we:return Yt(performance.now())-x;default:return Yt(performance.now())-x}}var Ba=0xc0000000n,Ua=30n,ti=0x3fff0000n,ri=16n,En=0x0000ff00n,fr=8n,Ze=0x000000ffn,Pa=0n;function Ji(Q){return{rw:Number((Q&Ba)>>Ua),size:Number((Q&ti)>>ri),func:Number((Q&Ze)>>Pa),driver:Number((Q&En)>>fr)}}var lr=Yt(performance.now()),In,ni,Zr,xr,Ct;onmessage=async Q=>{if(!In&&Q.data[0]==="start"){In=!0,[,ni,Zr,xr,Ct]=Q.data;try{await ii()}catch(x){fe(["console",`Worker failed: ${x}`])}}};function fe(Q){postMessage([Zr,...Q])}function K(Q){Ct.DEBUG&&!(Ct.DEBUG==="0"||Ct.DEBUG==="false"||Ct.DEBUG==="")&&fe(["console",Q])}function Wr(Q){K("calling close()"),fe(["proc_exit",Q]),self.close()}var Ma={0:Zn,1:Wa,2:xa};function Qi(Q=!1){let x;function A(U){x=U.exports}function m(U,D){K(`environ_sizes_get(0x${U.toString(16)}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=Object.keys(Ct).length;M.setUint32(U,z,!0);let H=Object.entries(Ct).reduce((Y,[N,G])=>Y+new TextEncoder().encode(`${N}=${G}\0`).byteLength,0);return M.setUint32(D,H,!0),0}function I(U,D){K(`environ_get(${U.toString(16)}, ${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new Uint8Array(x.memory.buffer);return Object.entries(Ct).forEach(([H,Y],N)=>{M.setUint32(U+N*4,D,!0);let G=new TextEncoder().encode(`${H}=${Y}\0`);z.set(G,D),D+=G.byteLength}),0}function C(U,D){K(`args_sizes_get(${U.toString(16)}, ${D.toString(16)})`);let M=new DataView(x.memory.buffer);return M.setUint32(U,xr.length,!0),M.setUint32(D,new TextEncoder().encode(xr.join("")).byteLength+xr.length,!0),0}function st(U,D){K(`args_get(${U}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new Uint8Array(x.memory.buffer);return xr.forEach((H,Y)=>{M.setUint32(U+Y*4,D,!0);let N=new TextEncoder().encode(`${H}\0`);z.set(N,D),D+=N.byteLength}),0}function en(U,D){K(`fd_fdstat_get(${U}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new SharedArrayBuffer(4+24),H=new Int32Array(z,0,1);H[0]=-1;let Y=new Uint8Array(z,4,1),N=new BigUint64Array(z,8,1),G=new BigUint64Array(z,16,1),j=new Uint8Array(z,24,1);fe(["fd_fdstat_get",{sharedBuffer:z,fd:U}]),Atomics.wait(H,0,-1);let J=Atomics.load(H,0);return J!==0?(K(`fd_fdstat_get returned ${J}`),J):(M.setUint8(D,Y[0]),M.setUint32(D+2,j[0],!0),M.setBigUint64(D+8,N[0],!0),M.setBigUint64(D+16,G[0],!0),K(`fd_fdstat_get returned ${J} {file_type: ${Y[0]} file_flags: 0 rights_base: ${N[0]} rights_inheriting: ${G}}`),0)}function si(U,D,M,z){K(`fd_write(${U}, ${D}, ${M}, ${z})`);let H=new DataView(x.memory.buffer),Y=0,N=[];for(let he=0;he<M;he+=1){let me=D+he*8,ge=H.getUint32(me,!0),Fe=H.getUint32(me+4,!0),Be=new Uint8Array(x.memory.buffer,ge,Fe);for(let Ce=0;Ce<Be.byteLength;Ce+=1)N.push(Be[Ce]);Y+=Be.byteLength}let G=new SharedArrayBuffer(4+4+Y),j=new Int32Array(G,0,1),J=new Int32Array(G,4,1);j[0]=-1;let re=Uint8Array.from(N);fe(["fd_write",{sharedBuffer:G,fd:U,content:re}]),Atomics.wait(j,0,-1);let ie=Atomics.load(j,0);return ie===0?(K(`fd_write written ${J} bytes.`),H.setUint32(z,J[0],!0)):K(`fd_write returned ${ie}.`),ie}function $a(U){K(`proc_exit(${U})`),Wr(U)}function Ga(U,D){K(`random_get(${U}, ${D})`);let M=new Uint8Array(x.memory.buffer),z=new Uint8Array(D);return crypto.getRandomValues(z),M.set(z,U),0}function Ha(U){return et()}function Ya(U,D,M){return K(`clock_time_get(${U}, ${D}, ${M})`),new DataView(x.memory.buffer).setBigUint64(M,qi(U,lr),!0),0}function Zi(U){K(`fd_close(${U})`);let D=new SharedArrayBuffer(4),M=new Int32Array(D,0,1);return M[0]=-1,fe(["fd_close",{sharedBuffer:D,fd:U}]),Atomics.wait(M,0,-1),Atomics.load(M,0)}function Va(U,D){K(`fd_filestat_get(${U}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new SharedArrayBuffer(4+64),H=new Int32Array(z,0,1);H[0]=-1;let Y=new DataView(z,4);fe(["fd_filestat_get",{sharedBuffer:z,fd:U}]),Atomics.wait(H,0,-1);let N=Atomics.load(H,0);if(N!==0)return K(`fd_filestat_get returned ${N}`),N;let G=Y.getBigUint64(0,!0),j=Y.getBigUint64(8,!0),J=Y.getUint8(16),re=Y.getBigUint64(24,!0),ie=Y.getBigUint64(32,!0),he=Y.getBigUint64(40,!0),me=Y.getBigUint64(48,!0),ge=Y.getBigUint64(56,!0);return Q?(M.setBigUint64(D,G,!0),M.setBigUint64(D+8,j,!0),M.setUint8(D+16,J),M.setUint32(D+20,Number(re),!0),M.setBigUint64(D+24,ie,!0),M.setBigUint64(D+32,he,!0),M.setBigUint64(D+40,me,!0),M.setBigUint64(D+48,ge,!0)):(M.setBigUint64(D,G,!0),M.setBigUint64(D+8,j,!0),M.setUint8(D+16,J),M.setBigUint64(D+24,re,!0),M.setBigUint64(D+32,ie,!0),M.setBigUint64(D+40,he,!0),M.setBigUint64(D+48,me,!0),M.setBigUint64(D+56,ge,!0)),K(`fd_filestat_get returned ${N} {dev: ${G} ino: ${j} fileType: ${J} nlink: ${re} size: ${ie} atim: ${he} mtim: ${me} ctim: ${ge}}`),0}function ja(U,D,M,z){K(`fd_read(${U}, ${D}, ${M}, ${z})`);let H=new DataView(x.memory.buffer),Y=new Uint8Array(x.memory.buffer),N=0;for(let G=0;G<M;G+=1){let j=H.getUint32(D+8*G,!0),J=H.getUint32(D+8*G+4,!0),re=new SharedArrayBuffer(4+4+J),ie=new Int32Array(re,0,1);ie[0]=-1;let he=new Int32Array(re,4,1),me=new Uint8Array(re,8,J);fe(["fd_read",{sharedBuffer:re,fd:U,len:J,offset:void 0}]),Atomics.wait(ie,0,-1);let ge=Atomics.load(ie,0);if(ge!==0)return ge;Y.set(me,j),N+=he[0]}return U>2&&K(`fd_read read ${N} bytes.`),H.setUint32(z,N,!0),0}function za(U,D,M,z,H){U>2&&K(`fd_pread(${U}, ${D}, ${M}, ${H})`);let Y=new DataView(x.memory.buffer),N=new Uint8Array(x.memory.buffer),G=0;for(let j=0;j<M;j+=1){let J=Y.getUint32(D+8*j,!0),re=Y.getUint32(D+8*j+4,!0),ie=new SharedArrayBuffer(4+4+re),he=new Int32Array(ie,0,1);he[0]=-1;let me=new Int32Array(ie,4,1),ge=new Uint8Array(ie,8,re);fe(["fd_pread",{sharedBuffer:ie,fd:U,len:re,offset:z}]),Atomics.wait(he,0,-1);let Fe=Atomics.load(he,0);if(Fe!==0)return Fe;N.set(ge,J),G+=me[0]}return U>2&&K(`fd_pread read ${G} bytes.`),Y.setUint32(H,G,!0),0}function es(U,D,M,z,H){K(`fd_readdir(${U}, ${D}, ${M}, ${z}, ${H})`);let Y=new DataView(x.memory.buffer),N=new Uint8Array(x.memory.buffer),G=new SharedArrayBuffer(4+4+M),j=new Int32Array(G,0,1);j[0]=-1;let J=new Uint32Array(G,4,1),re=new Uint8Array(G,8);fe(["fd_readdir",{sharedBuffer:G,fd:U,cookie:z,bufLen:M}]),Atomics.wait(j,0,-1);let ie=Atomics.load(j,0);return ie!==0?ie:(N.set(re,D),Y.setUint32(H,J[0],!0),0)}function Ka(U,D,M,z){K(`fd_seek(${U}, ${D}, ${M}, ${z})`);let H=new DataView(x.memory.buffer),Y=new SharedArrayBuffer(4+4+8),N=new Int32Array(Y,0,1);N[0]=-1;let G=new BigUint64Array(Y,8,1),j=Q?Ma[M]:M;fe(["fd_seek",{sharedBuffer:Y,fd:U,offset:D,whence:j}]),Atomics.wait(N,0,-1);let J=Atomics.load(N,0);return K(`fd_seek returned ${J}, file_pos = ${G[0]}`),J!==0?J:(H.setBigUint64(z,G[0],!0),0)}function ts(U,D,M){let z=new Uint8Array(x.memory.buffer),H=new TextDecoder().decode(z.slice(D,D+M));K(`path_create_directory(${U}, ${H}, ${M}) [path=${H}]`);let Y=new SharedArrayBuffer(4),N=new Int32Array(Y,0,1);return N[0]=-1,fe(["path_create_directory",{sharedBuffer:Y,fd:U,path:H}]),Atomics.wait(N,0,-1),Atomics.load(N,0)}function Xa(U,D,M,z,H){let Y=new DataView(x.memory.buffer),N=new Uint8Array(x.memory.buffer),G=new TextDecoder().decode(N.slice(M,M+z));K(`path_filestat_get(${U}, ${D}, ${G}, ${z}, 0x${H.toString(16)}) [path=${G}]`);let j=new SharedArrayBuffer(4+64),J=new Int32Array(j,0,1);J[0]=-1;let re=new DataView(j,4);fe(["path_filestat_get",{sharedBuffer:j,fd:U,path:G,lookupFlags:D}]),Atomics.wait(J,0,-1);let ie=Atomics.load(J,0);if(K(`path_filestat_get returned ${ie}`),ie!==0)return ie;let he=re.getBigUint64(0,!0),me=re.getBigUint64(8,!0),ge=re.getUint8(16),Fe=re.getBigUint64(24,!0),Be=re.getBigUint64(32,!0),Ce=re.getBigUint64(40,!0),ht=re.getBigUint64(48,!0),_t=re.getBigUint64(56,!0);return Q?(Y.setBigUint64(H,he,!0),Y.setBigUint64(H+8,me,!0),Y.setUint8(H+16,ge),Y.setUint32(H+20,Number(Fe),!0),Y.setBigUint64(H+24,Be,!0),Y.setBigUint64(H+32,Ce,!0),Y.setBigUint64(H+40,ht,!0),Y.setBigUint64(H+48,_t,!0)):(Y.setBigUint64(H,he,!0),Y.setBigUint64(H+8,me,!0),Y.setUint8(H+16,ge),Y.setBigUint64(H+24,Fe,!0),Y.setBigUint64(H+32,Be,!0),Y.setBigUint64(H+40,Ce,!0),Y.setBigUint64(H+48,ht,!0),Y.setBigUint64(H+56,_t,!0)),0}function qa(U,D,M,z,H,Y,N,G,j){let J=new DataView(x.memory.buffer),re=new Uint8Array(x.memory.buffer),ie=new TextDecoder().decode(re.slice(M,M+z));K(`path_open(dirFd=${U}, lookupFlags=${D}, pathPtr=0x${M.toString(16)}, pathLen=${z}, openFlags=${H}, fsRightsBase=${Y}, fsRightsInheriting=${N}, fdFlags=${G}, openedFdPtr=0x${j.toString(16)}) [path=${ie}]`);let he=new SharedArrayBuffer(4+4),me=new Int32Array(he,0,1);me[0]=-1;let ge=new Int32Array(he,4,1);fe(["path_open",{sharedBuffer:he,dirFd:U,path:ie,lookupFlags:D,openFlags:H,fsRightsBase:Y,fsRightsInheriting:N,fdFlags:G}]),Atomics.wait(me,0,-1);let Fe=Atomics.load(me,0);return Fe!==0?Fe:(J.setUint32(j,ge[0],!0),0)}function rs(U,D){let{command:M,buf_len:z,buf_ptr:H}=JSON.parse(U),Y=new TextDecoder().decode(new Uint8Array(x.memory.buffer,H,z));switch(M){case"spawn":{if(D.byteLength<8)return{exitStatus:42,outputSize:0};let N=new SharedArrayBuffer(4+4),G=new Int32Array(N,0,1);G[0]=-1;let{path:j,args:J,extended_env:re,redirects_ptr:ie,n_redirects:he,background:me}=JSON.parse(Y);K(`${j} ${J} ${re} ${me} ${ie}, ${he}`);let ge=new DataView(x.memory.buffer),Fe=[],Be=ie;for(let Vt=0;Vt<he;Vt++){let Ke=Be,rn=ge.getUint32(Be+8,!0),Xe=ge.getUint32(Be+8+4,!0);Be+=8+4+4;let Nt={type:Xe,fd_dst:rn,path:void 0,fd_src:void 0};switch(Xe){case Ki:case Qr:case Na:case La:{let hr=ge.getUint32(Ke,!0),tr=ge.getUint32(Ke+4,!0),at=new TextDecoder().decode(ge.buffer.slice(hr,hr+tr));Nt.path=at;break}case mn:case Xi:case ei:{let hr=ge.getUint32(Ke,!0);Nt.fd_src=hr;break}case ka:break;default:return K(`Spawn: redirect type ${Xe} not found.`),{exitStatus:28,outputSize:0}}Fe.push(Nt),K(`Redirect[${Vt}] = type: ${Nt.type}, fd_dst: ${Nt.fd_dst}, path: ${Nt.path}, fd_src: ${Nt.fd_src}`)}fe(["spawn",{path:j,args:J,env:{...Ct,...re},sharedBuffer:N,background:me,redirects:Fe}]),Atomics.wait(G,0,-1);let Ce=Atomics.load(G,0),ht=new Int32Array(N,4,1),_t=new Uint32Array(2),Ot=0;_t[0]=0,_t[1]=Atomics.load(ht,0),Ce!==0&&(K(`error: spawned process returned ${Ce}`),Ce===45?(_t[0]=45,Ot=1):Ot=Ce);let dr=new Uint8Array(_t.buffer,0,8);return D.set(dr,0),{exitStatus:Ot,outputSize:8}}case"chdir":{let N=new SharedArrayBuffer(4),G=new Int32Array(N,0,1);G[0]=-1;let{dir:j}=JSON.parse(Y);K(`chdir(${j})`);let J=yn(j);fe(["chdir",{dir:J,sharedBuffer:N}]),Atomics.wait(G,0,-1);let re=Atomics.load(G,0);return K(`chdir returned ${re}`),{exitStatus:re,outputSize:0}}case"getcwd":{let{buf_len:N}=JSON.parse(Y);K(`getcwd(${N})`);let G=new SharedArrayBuffer(4+4+N),j=new Int32Array(G,0,1),J=new Uint32Array(G,4,1),re=new Uint8Array(G,8,N);j[0]=-1,fe(["getcwd",{bufLen:N,sharedBuffer:G}]),Atomics.wait(j,0,-1);let ie=Atomics.load(j,0),he=ie===0?new TextDecoder().decode(re.slice(0,J[0])):void 0;return K(`getcwd returned ${he}`),D.byteLength<=J[0]?{exitStatus:42,outputSize:0}:(D.set(re.slice(0,J[0]),0),D.set([0],J[0]),{exitStatus:ie,outputSize:J[0]})}case"set_env":{let N=new SharedArrayBuffer(4),G=new Int32Array(N,0,1);G[0]=-1;let{key:j,value:J}=JSON.parse(Y);return K(`set_env(${j}, ${J})`),fe(["set_env",{key:j,value:J,sharedBuffer:N}]),Atomics.wait(G,0,-1),Atomics.load(G,0)===0&&(J===void 0?delete Ct[j]:Ct[j]=J),{exitStatus:0,outputSize:0}}case"set_echo":{let N=new SharedArrayBuffer(4),G=new Int32Array(N,0,1);G[0]=-1;let{echo:j}=JSON.parse(Y);return K(`set_echo(${j})`),fe(["set_echo",{shouldEcho:j,sharedBuffer:N}]),Atomics.wait(G,0,-1),{exitStatus:0,outputSize:0}}case"isatty":{if(D.byteLength<4)return{exitStatus:42,outputSize:0};let N=new SharedArrayBuffer(8),G=new Int32Array(N,0,1);G[0]=-1;let{fd:j}=JSON.parse(Y);K(`isatty(${j})`),fe(["isatty",{sharedBuffer:N,fd:j}]),Atomics.wait(G,0,-1);let J=Atomics.load(G,0),re=new Uint8Array(N,4,4);return D.set(re.slice(0,4),0),{exitStatus:J,outputSize:4}}case"getpid":{if(D.byteLength<4)return{exitStatus:42,outputSize:0};let N=new SharedArrayBuffer(8),G=new Int32Array(N,0,1),j=new Int32Array(N,4,1);G[0]=-1,j[0]=-1,K("getpid()"),fe(["getpid",{sharedBuffer:N}]),Atomics.wait(G,0,-1);let J=new Uint8Array(N,4,4);return D.set(J,0),{exitStatus:0,outputSize:4}}case"event_source_fd":{if(D.byteLength<4)return{exitStatus:42,outputSize:0};let{event_mask:N}=JSON.parse(Y),G=new SharedArrayBuffer(4+4),j=new Int32Array(G,0,1);if(K(`event_source_fd(${N})`),N===Ra||N>=1<<Fa)return{exitStatus:28,outputSize:0};j[0]=-1,fe(["event_source_fd",{sharedBuffer:G,eventMask:N}]),Atomics.wait(j,0,-1);let J=Atomics.load(j,0),re=new Uint8Array(G,4,4);return D.set(re,0),{exitStatus:J,outputSize:4}}case"attach_sigint":{let{event_source_fd:N}=JSON.parse(Y),G=new SharedArrayBuffer(4+4),j=new Int32Array(G,0,1);return j[0]=-1,K(`attach_sigint(${N})`),fe(["attach_sigint",{sharedBuffer:G,fd:N}]),Atomics.wait(j,0,-1),{exitStatus:Atomics.load(j,0),outputSize:0}}case"clean_inodes":{let N=new SharedArrayBuffer(4),G=new Int32Array(N,0,1);return K("clean_inodes()"),G[0]=-1,fe(["clean_inodes",{sharedBuffer:N}]),Atomics.wait(G,0,-1),{exitStatus:Atomics.load(G,0),outputSize:0}}case"kill":{let{process_id:N,signal:G}=JSON.parse(Y),j=new SharedArrayBuffer(4),J=new Int32Array(j,0,1);return J[0]=-1,K(`kill(${N}, ${G})`),fe(["kill",{sharedBuffer:j,processId:N,signalNumber:G}]),Atomics.wait(J,0,-1),{exitStatus:Atomics.load(J,0),outputSize:0}}case"ioctl":{let{fd:N,cmd:G}=JSON.parse(Y),{size:j,rw:J,func:re}=Ji(BigInt(G)),ie=new SharedArrayBuffer(4+j),he=new Int32Array(ie,0,1),me=new Uint8Array(ie,4,j);K(`ioctl(${N}, ${G})`),he[0]=-1,(J===3||J===1)&&me.set(D),fe(["ioctl",{sharedBuffer:ie,fd:N,command:re}]),Atomics.wait(he,0,-1);let ge=0;return(J===3||J===2)&&(D.set(me),ge=j),{exitStatus:Atomics.load(he,0),outputSize:ge}}case"mount":{let{source_fd:N,source:G,source_len:j,target_fd:J,target:re,target_len:ie,filesystemtype:he,filesystemtype_len:me,mountflags:ge,data:Fe,data_len:Be}=JSON.parse(Y),Ce=new Uint8Array(x.memory.buffer),ht=new TextDecoder().decode(Ce.slice(G,G+j)),_t=new TextDecoder().decode(Ce.slice(re,re+ie)),Ot=new TextDecoder().decode(Ce.slice(he,he+me)),dr=new TextDecoder().decode(Ce.slice(Fe,Fe+Be));K(`mount(${N}, "${ht}", ${j}, ${J}, "${_t}", ${ie}, "${Ot}", ${me}, ${ge}, "${dr}", ${Be})`);let Vt=new SharedArrayBuffer(4),Ke=new Int32Array(Vt,0,1);Ke[0]=-1,fe(["mount",{sharedBuffer:Vt,sourceFd:N,sourcePath:ht,targetFd:J,targetPath:_t,filesystemType:Ot,mountFlags:ge,data:dr}]),Atomics.wait(Ke,0,-1);let rn=Atomics.load(Ke,0);return K(`mount returned ${rn}`),{exitStatus:rn,outputSize:0}}case"umount":{let{path:N,path_len:G}=JSON.parse(Y),j=new Uint8Array(x.memory.buffer),J=new TextDecoder().decode(j.slice(N,N+G));K(`umount("${J}", ${G}`);let re=new SharedArrayBuffer(4),ie=new Int32Array(re,0,1);ie[0]=-1,fe(["umount",{path:J,sharedBuffer:re}]),Atomics.wait(ie,0,-1);let he=Atomics.load(ie,0);return K(`umount returned ${he}`),{exitStatus:he,outputSize:0}}default:throw K(`Special command ${M} not found.`),Error(`Special command '${M} not found.`)}}function Ja(U,D,M,z,H,Y){K(`path_readlink(${U}, ${D}, ${M}, ${z}, ${H}, ${Y})`);let N=new Uint8Array(x.memory.buffer),G=new DataView(x.memory.buffer),j=new TextDecoder().decode(N.slice(D,D+M));if(K(`path is ${j}, buffer_len = ${H}, fd = ${U}`),j[0]==="!"){let ge=z!==0?new Uint8Array(x.memory.buffer,z,H):new Uint8Array,{exitStatus:Fe,outputSize:Be}=rs(j.slice(1),ge);return Fe!==42&&z!==0&&G.setUint32(Y,Be,!0),Fe}let J=new SharedArrayBuffer(4+H+4),re=new Int32Array(J,0,1);re[0]=-1;let ie=new Int32Array(J,4,1),he=new Uint8Array(J,8,H);fe(["path_readlink",{sharedBuffer:J,fd:U,path:j,bufferLen:H}]),Atomics.wait(re,0,-1);let me=Atomics.load(re,0);return me!==0?me:(N.set(he,z),G.setUint32(Y,ie[0],!0),0)}function Rr(U,D,M){K(`path_remove_directory(${U}, ${D}, ${M})`);let z=new Uint8Array(x.memory.buffer),H=new TextDecoder().decode(z.slice(D,D+M)),Y=new SharedArrayBuffer(4),N=new Int32Array(Y,0,1);return N[0]=-1,fe(["path_remove_directory",{sharedBuffer:Y,fd:U,path:H}]),Atomics.wait(N,0,-1),Atomics.load(N,0)}function Qa(U,D,M,z,H,Y){let N=new Uint8Array(x.memory.buffer),G=new TextDecoder().decode(N.slice(D,D+M)),j=new TextDecoder().decode(N.slice(H,H+Y));K(`path_rename(${U}, ${G}, ${M}, ${z}, ${j}, ${Y})`);let J=new SharedArrayBuffer(4),re=new Int32Array(J,0,1);return re[0]=-1,fe(["path_rename",{sharedBuffer:J,oldFd:U,oldPath:G,newFd:z,newPath:j}]),Atomics.wait(re,0,-1),Atomics.load(re,0)}function tn(U,D,M){K(`path_unlink_file(${U}, ${D}, ${M})`);let z=new Uint8Array(x.memory.buffer),H=new TextDecoder().decode(z.slice(D,D+M)),Y=new SharedArrayBuffer(4),N=new Int32Array(Y,0,1);return N[0]=-1,fe(["path_unlink_file",{sharedBuffer:Y,fd:U,path:H}]),Atomics.wait(N,0,-1),Atomics.load(N,0)}function Za(){return et()}function eo(U,D){K(`fd_prestat_get(${U}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new SharedArrayBuffer(4+4+1),H=new Int32Array(z,0,1);H[0]=-1;let Y=new Int32Array(z,4,1),N=new Uint8Array(z,8,1);fe(["fd_prestat_get",{sharedBuffer:z,fd:U}]),Atomics.wait(H,0,-1);let G=Atomics.load(H,0);return G===0?(M.setUint8(D,N[0]),M.setUint32(D+4,Y[0],!0),K(`fd_prestat_get returned filetype type ${N[0]} of size ${Y[0]}`)):K(`fd_prestat_get returned ${G}`),G}function ns(U,D,M){K(`fd_prestat_dir_name(${U}, 0x${D.toString(16)}, ${M})`);let z=new Uint8Array(x.memory.buffer),H=new SharedArrayBuffer(4+M),Y=new Int32Array(H,0,1);Y[0]=-1;let N=new Uint8Array(H,4,M);fe(["fd_prestat_dir_name",{sharedBuffer:H,fd:U,pathLen:M}]),Atomics.wait(Y,0,-1);let G=Atomics.load(Y,0);G===0&&z.set(N,D);let j=new TextDecoder().decode(z.slice(D,D+M));return K(`prestat returned ${G}, "${j}" of size ${M}`),G}function to(){return et()}function An(){return et()}function ai(){return et()}function oi(U,D,M,z,H){K(`path_symlink(0x${U.toString(16)}, ${D}, ${M}, 0x${z.toString(16)}, ${H})`);let Y=new Uint8Array(x.memory.buffer),N=new TextDecoder().decode(Y.slice(U,U+D)),G=new TextDecoder().decode(Y.slice(z,z+H));K(`path_symlink: ${G} --> ${N}`);let j=new SharedArrayBuffer(4),J=new Int32Array(j,0,1);J[0]=-1,fe(["path_symlink",{sharedBuffer:j,targetPath:N,linkFd:M,linkPath:G}]),Atomics.wait(J,0,-1);let re=Atomics.load(J,0);return K(`path_symlink returned ${re}`),re}function ci(U,D,M,z,H,Y,N){K(`path_link(${U}, ${D}, ${M}, ${z}, ${H}, ${Y}, ${N})`);let G=new Uint8Array(x.memory.buffer),j=new TextDecoder().decode(G.slice(M,M+z)),J=new TextDecoder().decode(G.slice(Y,Y+N));K(`path_link: ${J} -> ${j}`);let re=new SharedArrayBuffer(4),ie=new Int32Array(re,0,1);return ie[0]=-1,fe(["path_link",{sharedBuffer:re,oldFd:U,oldFlags:D,oldPath:j,newFd:H,newPath:J}]),Atomics.wait(ie,0,-1),Atomics.load(ie,0)}function is(U,D,M,z){K(`poll_oneoff(${U}, ${D}, ${M}, ${z})`);let H=new DataView(x.memory.buffer),Y=new SharedArrayBuffer(32*M);var N=BigInt(Number.MAX_SAFE_INTEGER);let G=new Array,j,J;for(let me=0;me<M;me+=1){let ge=H.getBigUint64(U,!0);U+=8;let Fe=H.getUint8(U);U+=1;let Be;switch(Fe){case zi:{U+=7;let Ce=H.getUint32(U,!0);U+=8;let ht=H.getBigUint64(U,!0);U+=8;let _t=H.getBigUint64(U,!0);U+=8;let Ot=H.getUint16(U,!0);U+=8;let dr=Ot===1;K(`clockId = ${Ce}, timeout = ${ht}, precision = ${_t}, absolute = ${dr}`);let Vt=qi(Ce,lr),Ke=dr?ht:Vt+ht;N>Ke&&(N=Ke,J={clockId:Ce,timeout:ht,precision:_t,flags:Ot},j=ge);continue}case Qn:case Oa:{U+=7;let Ce=H.getUint32(U,!0);U+=32,K(`read data from fd = ${Ce}`),Be={fd:Ce};break}default:return 28}Be&&G.push({userdata:ge,eventType:Fe,event:Be})}J&&G.push({userdata:j,eventType:zi,event:J});let re=new SharedArrayBuffer(4+4),ie=new Int32Array(re,0,2);ie[0]=-1,ie[1]=0,G.length>0&&(fe(["poll_oneoff",{sharedBuffer:re,subs:G,eventBuf:Y,timeout:N}]),Atomics.wait(ie,0,-1));let he=ie[1];return new Uint8Array(x.memory.buffer,D,he*32).set(new Uint8Array(Y,0,he*32)),H.setInt32(z,he,!0),0}let et=()=>(K(`> Entering stub ${new Error().stack.split(`
`)[2].trim().split(" ")[1]}`),0);function ro(){return et()}function no(){return et()}function io(){return et()}function so(U,D){K(`fd_fdstat_set_flags(${U}, ${D})`);let M=new SharedArrayBuffer(4),z=new Int32Array(M,0,1);z[0]=-1,fe(["fd_fdstat_set_flags",{sharedBuffer:M,fd:U,flags:D}]),Atomics.wait(z,0,-1);let H=Atomics.load(z,0);return K(`fd_fdstat_set_flags returned error: ${H}`),H}function ss(){return et()}function ao(U,D){K(`fd_renumber(${U}, ${D})`);let M=new SharedArrayBuffer(4),z=new Int32Array(M,0,1);z[0]=-1,fe(["fd_renumber",{sharedBuffer:M,fd:U,newFd:D}]),Atomics.wait(z,0,-1);let H=Atomics.load(z,0);return K(`fd_renumber returned error: ${H}`),H}function ui(U,D){K(`fd_tell(${U}, 0x${D.toString(16)})`);let M=new DataView(x.memory.buffer),z=new SharedArrayBuffer(8+4),H=new BigInt64Array(z,0,1),Y=new Int32Array(z,8,1);Y[0]=-1,fe(["fd_tell",{sharedBuffer:z,fd:U}]),Atomics.wait(Y,0,-1);let N=Atomics.load(Y,0);return N===0?(M.setBigUint64(D,H[0],!0),K(`fd_tell returned offset: ${H[0]}`)):K(`fd_tell returned error: ${N}`),N}function oo(U,D,M,z,H,Y,N){K(`path_filestat_set_times(${U}, ${D}, ${M}, ${z}, ${H}, ${Y}, ${N})`);let G=new Uint8Array(x.memory.buffer),j=new TextDecoder().decode(G.slice(M,M+z)),J=new SharedArrayBuffer(4),re=new Int32Array(J,0,1);re[0]=-1,fe(["path_filestat_set_times",{sharedBuffer:J,fd:U,flags:D,path:j,st_atim:H,st_mtim:Y,fst_flags:N}]),Atomics.wait(re,0,-1);let ie=Atomics.load(re,0);return K(`path_filestat_set_times returned ${ie}`),ie}function as(){return et()}function er(){return et()}function vu(){return et()}function mu(){return et()}function yu(){return et()}function Eu(){return et()}function Iu(U,D,M,z){K(`fd_filestat_set_times(${U}, ${D}, ${M}, ${z})`);let H=new SharedArrayBuffer(4),Y=new Int32Array(H,0,1);Y[0]=-1,fe(["fd_filestat_set_times",{sharedBuffer:H,fd:U,st_atim:D,st_mtim:M,fst_flags:z}]),Atomics.wait(Y,0,-1);let N=Atomics.load(Y,0);return K(`fd_filestat_set_times returned ${N}`),N}return{setModuleInstance:A,environ_sizes_get:m,args_sizes_get:C,fd_prestat_get:eo,fd_fdstat_get:en,fd_filestat_get:Va,fd_read:ja,fd_write:si,fd_prestat_dir_name:ns,environ_get:I,args_get:st,poll_oneoff:is,proc_exit:$a,fd_close:Zi,fd_seek:Ka,random_get:Ga,clock_time_get:Ya,fd_readdir:es,path_create_directory:ts,path_filestat_get:Xa,path_link:ci,path_open:qa,path_readlink:Ja,path_remove_directory:Rr,path_rename:Qa,path_unlink_file:tn,sched_yield:Za,fd_datasync:to,fd_filestat_set_size:An,fd_sync:ai,path_symlink:oi,clock_res_get:Ha,fd_advise:Eu,fd_allocate:no,fd_fdstat_set_flags:so,fd_fdstat_set_rights:io,fd_tell:ui,fd_filestat_set_times:Iu,fd_pread:za,fd_advice:ro,fd_pwrite:ss,fd_renumber:ao,path_filestat_set_times:oo,proc_raise:as,sock_accept:er,sock_recv:vu,sock_send:mu,sock_shutdown:yu}}async function wn(Q,x){let A=WebAssembly.Module.imports(Q),m;if(A[0].module==="wasi_unstable")m=x(!0);else if(A[0].module==="wasi_snapshot_preview1")m=x(!1);else throw Error("Unsupported wasm format");let I={wasi_snapshot_preview1:m,wasi_unstable:m};if(WebAssembly.instantiate){K("WebAssembly.instantiate");let C=await WebAssembly.instantiate(Q,I);m.setModuleInstance(C);try{C.exports._start(),Wr(0)}catch(st){K(`error: ${st}`),Wr(255)}}else K("WebAssembly.instantiate is not supported")}async function ii(){if(In&&ni){K("Loading a module");try{await wn(ni,Qi)}catch(Q){K(`Failed instantiating WASM module: ${Q}`),Wr(255)}K("done.")}else setTimeout(()=>{ii()},0)}}.toString().slice(11,-1)],{type:"text/javascript"}));var Yu=BigInt(1),_i=BigInt(2),Vu=BigInt(4),bg=BigInt(8),ju=BigInt(16),zu=BigInt(32),Cn=BigInt(64),Ku=BigInt(128),Tg=BigInt(256),Cg=BigInt(512),Og=BigInt(1024),xg=BigInt(2048),Wg=BigInt(4096),Rg=BigInt(8192),Fg=BigInt(16384),Dg=BigInt(32768),Ng=BigInt(65536),Lg=BigInt(131072),yo=BigInt(262144),kg=BigInt(524288),Bg=BigInt(1048576),pi=BigInt(2097152),Ug=BigInt(4194304),Xu=BigInt(8388608),Pg=BigInt(16777216),Mg=BigInt(33554432),$g=BigInt(67108864),qu=BigInt(134217728),Gg=BigInt(268435456),Ge=BigInt(536870911),Ju=Yu|_i|ju|Ku|pi|qu,Eo=Yu|Cn|ju|Ku|pi|qu,Qu=Eo;var Zu=0,Dr=1,ls=2;var De=1,ot=2,pr=4,On=8,ef=0;var tf=2,xn=0,Nr=1,Wn=2,Io=1,wo=2,Ao=4,bo=8;var jt=0;var rf=1<<0,zt=1<<1,To=0,Co=1,Oo=2,xo=3,nf=4,sf=5,af=6,of=7;var Si=class{fdstat;path;async getFdstat(){return this.fdstat}async initialize(e){return this.path=e,0}getPath(){return this.path}async setFdstatFlags(e){return this.fdstat.fs_flags=e,0}async setFdstatRights(e,t){return this.fdstat.fs_rights_base=e,this.fdstat.fs_rights_inheriting=t,0}async ioctl(e,t){return 59}async mountFs(e){return{err:58,fs:void 0}}},Lr=class extends Si{isatty(){return!1}async readdir(e){return{err:54,dirents:void 0}}},kr=class extends Si{async close(){return 31}async read(e,t){return{err:31,buffer:void 0}}async read_str(){return{err:31,content:void 0}}async pread(e,t){return{err:31,buffer:void 0}}async arrayBuffer(){return{err:31,buffer:void 0}}async write(e){return{err:31,written:-1n}}async pwrite(e,t){return{err:31,written:-1n}}async seek(e,t){return{err:31,offset:-1n}}async writableStream(){return{err:31,stream:void 0}}isatty(){return!1}async truncate(e){return 31}addPollSub(e,t,r){return Promise.resolve({userdata:e,error:58,eventType:t,nbytes:0n})}},Rn=class extends Si{constructor(e,t,r){super(),this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:r,fs_filetype:2}}async getFilestat(){return{err:8,filestat:void 0}}async setFilestatTimes(e,t){return 8}async close(){return 8}async read(e,t){return{err:8,buffer:void 0}}async read_str(){return{err:8,content:void 0}}async pread(e,t){return{err:8,buffer:void 0}}async arrayBuffer(){return{err:8,buffer:void 0}}async write(e){return{err:8,written:-1n}}async pwrite(e,t){return{err:8,written:-1n}}async seek(e,t){return{err:8,offset:-1n}}async readdir(e){return{err:8,dirents:void 0}}async writableStream(){return{err:8,stream:void 0}}async truncate(e){return 8}addPollSub(e,t,r){return Promise.resolve({userdata:e,error:58,eventType:t,nbytes:0n})}};var on=class extends Rn{eventMask;signalSub;events;stopResolver;constructor(e,t,r,i){super(e,t,r),this.eventMask=i,this.events=jt,this.stopResolver=void 0,this.signalSub=void 0}getFilestat(){return Promise.resolve({err:0,filestat:{dev:0n,ino:0n,filetype:this.fdstat.fs_filetype,nlink:0n,size:0n,mtim:0n,atim:0n,ctim:0n}})}async setFilestatTimes(e,t){return 0}async close(){return this.stopResolver&&this.stopResolver.resolve(this),0}async read(e,t){if(e<4)return{err:42,buffer:void 0};let r=new ArrayBuffer(4),i=new Uint32Array(r);return i[0]=this.events,this.events=jt,Promise.resolve({err:0,buffer:r})}isatty(){return!1}addPollSub(e,t,r){return new Promise(i=>{this.events!==jt?i({userdata:e,eventType:this.events,nbytes:4n,error:0}):this.signalSub={pid:r,userdata:e,tag:t,resolve:i}})}sendEvents(e){this.events|=e&this.eventMask,this.events!==jt&&this.signalSub!==void 0&&(this.signalSub.resolve({userdata:this.signalSub.userdata,error:0,eventType:Dr,nbytes:4n}),this.signalSub=void 0)}obtainEvents(e){let t=this.events&e;return this.events^=t,t}makeNotifier(e){return this.eventMask&zt?(this.stopResolver!==void 0&&this.stopResolver.resolve(this),this.stopResolver=e,0):(e.reject(),28)}};var mt=class{static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=mt.hexChars,r=mt.hexOut,i,s,a,o;for(o=0;o<4;o+=1)for(s=o*8,i=e[o],a=0;a<8;a+=2)r[s+1+a]=t.charAt(i&15),i>>>=4,r[s+0+a]=t.charAt(i&15),i>>>=4;return r.join("")}static _md5cycle(e,t){let r=e[0],i=e[1],s=e[2],a=e[3];r+=(i&s|~i&a)+t[0]-680876936|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[1]-389564586|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[2]+606105819|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[4]-176418897|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[5]+1200080426|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[6]-1473231341|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[7]-45705983|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[8]+1770035416|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[9]-1958414417|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[10]-42063|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,r+=(i&s|~i&a)+t[12]+1804603682|0,r=(r<<7|r>>>25)+i|0,a+=(r&i|~r&s)+t[13]-40341101|0,a=(a<<12|a>>>20)+r|0,s+=(a&r|~a&i)+t[14]-1502002290|0,s=(s<<17|s>>>15)+a|0,i+=(s&a|~s&r)+t[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,r+=(i&a|s&~a)+t[1]-165796510|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[6]-1069501632|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[11]+643717713|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[0]-373897302|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[5]-701558691|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[10]+38016083|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[15]-660478335|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[4]-405537848|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[9]+568446438|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[14]-1019803690|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[3]-187363961|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,r+=(i&a|s&~a)+t[13]-1444681467|0,r=(r<<5|r>>>27)+i|0,a+=(r&s|i&~s)+t[2]-51403784|0,a=(a<<9|a>>>23)+r|0,s+=(a&i|r&~i)+t[7]+1735328473|0,s=(s<<14|s>>>18)+a|0,i+=(s&r|a&~r)+t[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,r+=(i^s^a)+t[5]-378558|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[8]-2022574463|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[11]+1839030562|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[14]-35309556|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[1]-1530992060|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[4]+1272893353|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[7]-155497632|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[13]+681279174|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[0]-358537222|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[3]-722521979|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[6]+76029189|0,i=(i<<23|i>>>9)+s|0,r+=(i^s^a)+t[9]-640364487|0,r=(r<<4|r>>>28)+i|0,a+=(r^i^s)+t[12]-421815835|0,a=(a<<11|a>>>21)+r|0,s+=(a^r^i)+t[15]+530742520|0,s=(s<<16|s>>>16)+a|0,i+=(s^a^r)+t[2]-995338651|0,i=(i<<23|i>>>9)+s|0,r+=(s^(i|~a))+t[0]-198630844|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[7]+1126891415|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[14]-1416354905|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[5]-57434055|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[3]-1894986606|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[10]-1051523|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[15]-30611744|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[6]-1560198380|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~a))+t[4]-145523070|0,r=(r<<6|r>>>26)+i|0,a+=(i^(r|~s))+t[11]-1120210379|0,a=(a<<10|a>>>22)+r|0,s+=(r^(a|~i))+t[2]+718787259|0,s=(s<<15|s>>>17)+a|0,i+=(a^(s|~r))+t[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=r+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=a+e[3]|0}_dataLength=0;_bufferLength=0;_state=new Int32Array(4);_buffer=new ArrayBuffer(68);_buffer8;_buffer32;constructor(){this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(mt.stateIdentity),this}appendStr(e){let t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a;for(a=0;a<e.length;a+=1){if(s=e.charCodeAt(a),s<128)t[i++]=s;else if(s<2048)t[i++]=(s>>>6)+192,t[i++]=s&63|128;else if(s<55296||s>56319)t[i++]=(s>>>12)+224,t[i++]=s>>>6&63|128,t[i++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++a)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=(s>>>18)+240,t[i++]=s>>>12&63|128,t[i++]=s>>>6&63|128,t[i++]=s&63|128}i>=64&&(this._dataLength+=64,mt._md5cycle(this._state,r),i-=64,r[0]=r[16])}return this._bufferLength=i,this}appendAsciiStr(e){let t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(e.length-a,64-i);s--;)t[i++]=e.charCodeAt(a++);if(i<64)break;this._dataLength+=64,mt._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}appendByteArray(e){let t=this._buffer8,r=this._buffer32,i=this._bufferLength,s,a=0;for(;;){for(s=Math.min(e.length-a,64-i);s--;)t[i++]=e[a++];if(i<64)break;this._dataLength+=64,mt._md5cycle(this._state,r),i=0}return this._bufferLength=i,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,r=e.state,i=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(e=!1){let t=this._bufferLength,r=this._buffer8,i=this._buffer32,s=(t>>2)+1;this._dataLength+=t;let a=this._dataLength*8;if(r[t]=128,r[t+1]=r[t+2]=r[t+3]=0,i.set(mt.buffer32Identity.subarray(s),s),t>55&&(mt._md5cycle(this._state,i),i.set(mt.buffer32Identity)),a<=4294967295)i[14]=a;else{let o=a.toString(16).match(/(.*?)(.{0,8})$/);if(o===null)return"";let c=parseInt(o[2],16),u=parseInt(o[1],16)||0;i[14]=c,i[15]=u}return mt._md5cycle(this._state,i),e?this._state:mt._hex(this._state)}},rr=mt;pt(rr,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),pt(rr,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),pt(rr,"hexChars","0123456789abcdef"),pt(rr,"hexOut",[]),pt(rr,"onePassHasher",new mt);if(rr.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");function cf(n){let e=[],t="",r=n,i="",s=0;for(;r!=="";)r.indexOf("/")!==-1?i=r.substr(0,r.indexOf("/")):i=r,r=r.substr(i.length+1),i===".."?s>0&&(s-=1):i==="."||i!=""&&(e[s]=i,s+=1);return t=`/${e.slice(0,s).join("/")}`,t=t.replace("/./","/"),t}function Ro(n){let e=Math.trunc(n),t=BigInt(Math.round((n-e)*1e6));return BigInt(e)*BigInt(1e6)+t}async function uf(n,e){for(var{buffer:t}=await n.read(e),r=new rr;t.byteLength!==0;)r.appendByteArray(new Uint8Array(t)),t=(await n.read(e)).buffer;return r.end()}function je(n){return n=="/"?"/":n.slice(n.lastIndexOf("/")+1)}function Kt(n){let e=n.lastIndexOf("/");return e<1&&e++,n.slice(0,e)}function ds(n){switch(n.toLowerCase().trim()){case"yes":case"on":case"true":return!0;case"no":case"off":case"false":return!1;default:return}}function hs(n){let e=["B","kB","MB","GB","TB","PB"],t=n,r=0;for(;t>=1024&&r+1<e.length;)t/=1024,r+=1;return`${t.toFixed(1)}${e[r]}`}async function ff(n,e,t,r,i){let s=i.getDesc(1),a=`  PID TTY          TIME CMD\r
`;for(let[o,c]of Object.entries(n.processInfos)){let u=new Date,d=Math.floor(u.getTime()/1e3)-c.timestamp,h=d%60,_=(d-h)/60%60,y=(d-h-_*60)/60/60;a+=`${`     ${o}`.slice(-5)} pts/0    ${`00${y}`.slice(-2)}:${`00${_}`.slice(-2)}:${`00${h}`.slice(-2)} ${c.cmd.split("/").slice(-1)[0]}\r
`}return a+=`-1 pts/0    00:00:00 ps\r
`,await s.write(new TextEncoder().encode(a)),s.close(),0}async function lf(n,e,t,r,i){let s=i.getDesc(1),a=performance.memory.jsHeapSizeLimit,o=performance.memory.usedJSHeapSize,c="",u="",d="";t.length>1&&t[1]==="-h"?(c=hs(a),u=hs(o),d=hs(a-o)):(c=`${Math.round(a/1024)}`,u=`${Math.round(o/1024)}`,d=`${Math.round((a-o)/1024)}`);let h=`               total        used   available\r
`;return h+=`Mem:      ${`          ${c}`.slice(-10)}  ${`          ${u}`.slice(-10)}  ${`          ${d}`.slice(-10)}\r
`,await s.write(new TextEncoder().encode(h)),0}async function df(n,e,t,r,i){return location.reload(),0}function gi(n){return new Promise((e,t)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>t(n.error)})}function hh(n,e){let t=Promise.resolve().then(()=>{let r=indexedDB.open(n);return r.onupgradeneeded=()=>r.result.createObjectStore(e),gi(r)});return(r,i)=>t.then(s=>i(s.transaction(e,r).objectStore(e)))}var Fo;function _s(){return Fo||(Fo=hh("keyval-store","keyval")),Fo}function hf(n,e=_s()){return e("readonly",t=>gi(t.get(n)))}function _f(n,e,t=_s()){return t("readwrite",r=>(r.put(e,n),gi(r.transaction)))}function pf(n,e=_s()){return e("readwrite",t=>(t.delete(n),gi(t.transaction)))}function _h(n,e){return n("readonly",t=>(t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},gi(t.transaction)))}function Sf(n=_s()){let e=[];return _h(n,t=>e.push(t.key)).then(()=>e)}async function Do(n){pf(n)}async function gr(n){return hf(n)}async function Br(n,e){_f(n,e)}async function gf(){return Sf()}async function un(n){return(await(await navigator.storage.getDirectory()).resolve(n)).join("/")}async function vf(n,e){return navigator.storage.getDirectory().then(async t=>await t.getDirectoryHandle(n,{create:e}))}function fn(n,e){switch(n.name){case"NotAllowedError":return 2;case"TypeMismatchError":return e?54:31;case"NotFoundError":return 44;case"InvalidModificationError":return 55;case"QuotaExceededError":return 19;default:return 28}}function mf(n,e,t,r,i){n.keepMetadata=i,n.keepMetadata&&(n.metadataPath=""),n.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:r,fs_filetype:void 0}}async function yi(n){n.keepMetadata&&n.metadataPath===""&&(n.metadataPath=await un(n.handle))}async function yf(n,e,t){if(n.keepMetadata){let r=await gr(n.metadataPath);e!==void 0&&(r.atim=e),t!==void 0&&(r.mtim=t),(e!==void 0||t!==void 0)&&await Br(n.metadataPath,r)}return 0}var ps=class extends Lr{handle;metadataPath;keepMetadata;cursor;writer;file;constructor(e,t,r,i,s){super(),this.handle=e,this.cursor=0n,mf(this,t,r,i,s),this.file=void 0}async initialize(e){let t=await super.initialize(e);if(t!==0)return t;await yi(this);let r=BigInt((await this.__getFile()).file?.size),i;if(this.keepMetadata){let s=await gr(this.metadataPath);if(s==null)return 44;i=s.filetype}else i=ps.defaultFilestat.filetype;return this.fdstat.fs_filetype=i,this.fdstat.fs_flags&1&&(this.cursor=r),0}async getWriter(){return this.writer||(this.writer=await this.handle.createWritable({keepExistingData:!0})),this.writer}async __getFile(){if(!this.file)try{let e=await this.handle.getFile();return this.file=e,{err:0,file:e}}catch{return{err:2,file:void 0}}return{err:0,file:this.file}}async read(e){let{err:t,file:r}=await this.__getFile();if(t!==0)return{err:t,buffer:void 0};let i=Number(this.cursor)+e,s=await r.slice(Number(this.cursor),Number(i)).arrayBuffer();return this.cursor+=BigInt(s.byteLength),{err:0,buffer:s}}async read_str(){let{err:e,file:t}=await this.__getFile();return e!==0?{err:e,content:void 0}:{err:0,content:await t.text()}}async pread(e,t){let{err:r,file:i}=await this.__getFile();if(r!==0)return{err:r,buffer:void 0};let s=BigInt((await this.__getFile()).file?.size),a=s<t+BigInt(e)?s:this.cursor+BigInt(e);return{err:0,buffer:await i.slice(Number(t),Number(a)).arrayBuffer()}}async seek(e,t){let r=BigInt((await this.__getFile()).file?.size);switch(t){case Nr:if(this.cursor+e<0n)return{offset:this.cursor,err:28};this.cursor+=e;break;case xn:if(e<0n)return{offset:this.cursor,err:28};this.cursor=e;break;case Wn:if(r<-e)return{offset:this.cursor,err:28};this.cursor=r+e;break;default:return{offset:this.cursor,err:28}}return{err:0,offset:this.cursor}}async setFilestatTimes(e,t){return yf(this,e,t)}async write(e){await(await this.getWriter()).write({type:"write",position:Number(this.cursor),data:e});let t=BigInt(e.byteLength);return this.cursor+=t,{err:0,written:t}}async pwrite(e,t){await(await this.getWriter()).write({type:"write",position:Number(t),data:e});let r=BigInt(e.byteLength);return{err:0,written:r}}async writableStream(){return{err:0,stream:await this.getWriter()}}async truncate(e){try{await(await this.getWriter()).write({type:"truncate",size:Number(e)})}catch(t){return t instanceof DOMException?fn(t,!1):28}return await this.flush(),this.cursor=0n,0}async arrayBuffer(){let e=await(await this.handle.getFile()).arrayBuffer();return{err:0,buffer:e}}async flush(){if(this.writer){let e=this.writer;this.writer=null;try{await e?.close()}catch{}}}async close(){return await this.flush(),0}async getFilestat(){let e=this.keepMetadata?await gr(this.metadataPath):ps.defaultFilestat;return e===void 0?{err:56,filestat:void 0}:(e.size=BigInt((await this.__getFile()).file?.size),{err:0,filestat:e})}async addPollSub(e,t,r){let i=BigInt(this.file?this.file.size:(await this.__getFile()).file.size);return{userdata:e,error:0,eventType:t,nbytes:i}}},Xt=ps;pt(Xt,"defaultFilestat",{dev:0n,ino:0n,filetype:4,nlink:1n,size:0n,atim:0n,mtim:0n,ctim:0n});var Ss=class extends kr{handle;metadataPath;keepMetadata;entries;constructor(e,t,r,i,s){super(),this.handle=e,mf(this,t,r,i,s),this.fdstat.fs_filetype=3,this.entries=[]}async initialize(e){let t=await super.initialize(e);return t!==0?t:(await yi(this),0)}async getFilestat(){if(this.keepMetadata){let e=await gr(this.metadataPath);return e===void 0?{err:56,filestat:void 0}:{err:0,filestat:e}}else return{err:0,filestat:Ss.defaultFilestat}}async setFilestatTimes(e,t){return yf(this,e,t)}async readdir(e){let t=0;if(e||this.entries.length===0){this.entries=[];var r=1n;for await(let[i,s]of this.handle.entries()){if(i.endsWith(".crswap"))continue;let a;this.keepMetadata?a=await gr(`${this.metadataPath}/${i}`):a=s instanceof FileSystemDirectoryHandle?Ss.defaultFilestat:Xt.defaultFilestat,a===void 0?t=56:this.entries.push({d_next:r++,d_ino:a.ino,name:i,d_type:a.filetype})}}return{err:t,dirents:this.entries}}},kt=Ss;pt(kt,"defaultFilestat",{dev:0n,ino:0n,filetype:3,nlink:1n,size:4096n,atim:0n,mtim:0n,ctim:0n});var Fn=class{rootHandle;keepMetadata;fsname(){return"FsaFilesystem"}getRootHandle(){return this.rootHandle}async getHandle(e,t,r){let i,s,a=!0,o=r===void 0?this.getRootHandle():r;try{for(e.startsWith("/")?s=1:s=0,i=e.indexOf("/",s);i!=-1;i=e.indexOf("/",s))o=await o.getDirectoryHandle(e.slice(s,i)),s=i+1;let c;a=t;let u=e.slice(s);return u===""?c=o:t?c=await o.getDirectoryHandle(u):c=await o.getFileHandle(u),{handle:c,err:0,index:-1}}catch(c){let u;try{u=fn(c,a)}catch{u=28}return{index:i,err:u,handle:o}}}async unlinkat(e,t,r){let i;if(e!==void 0)if(e instanceof kt)i=e.handle;else return 28;let{err:s,handle:a}=await this.getHandle(Kt(t),!0,i);if(s!==0)return s;let o=je(t);try{let c=(await this.getHandle(o,r,a)).err;return c!==0?c:(a.removeEntry(o,{recursive:!1}),await Do(`${await un(a)}/${t}`),0)}catch(c){let u=28;return c instanceof DOMException&&(u=fn(c,!0)),u}}async mkdirat(e,t){let r;if(e!==void 0)if(e instanceof kt)r=e.handle;else return 28;let{err:i,handle:s}=await this.getHandle(Kt(t),!0,r);if(i!==0)return i;let a=je(t);if({err:i}=await this.getHandle(a,!0,s),i===0)return 20;if(i!==44)return i;try{s=await s.getDirectoryHandle(t,{create:!0})}catch(o){if(o instanceof DOMException){let c=fn(o,!0);if(c!==0)return c}}return this.keepMetadata&&await Br(await un(s),{dev:0n,ino:0n,filetype:3,nlink:1n,size:4096n,mtim:0n,atim:0n,ctim:0n}),0}async symlinkat(e,t,r){let i;if(t!==void 0)if(t instanceof kt)i=t.handle;else return 28;let{err:s,handle:a}=await this.getHandle(Kt(r),!0,i);if(s!==0)return s;let o=je(r);if({err:s}=await this.getHandle(o,!1,a),s===0||s===31)return 20;if(s!==44)return s;let c=await a.getFileHandle(r,{create:!0}),u=await c.createWritable();return await u.write(e),await u.close(),this.keepMetadata&&await Br(await un(c),{dev:0n,ino:0n,filetype:7,nlink:1n,size:BigInt(e.length),mtim:0n,atim:0n,ctim:0n}),0}async getFilestat(e){if(this.keepMetadata){let t=this.getRootHandle().name+e,r=await gr(t);return{filestat:r,err:r?0:44}}else{let{err:t}=await this.getHandle(e,!0,void 0);switch(t){case 54:return{err:0,filestat:kt.defaultFilestat};case 0:return{err:0,filestat:Xt.defaultFilestat};default:return{err:t,filestat:void 0}}}}async open(e,t,r,i,s,a,o){let c=await this.getHandle(e,!0,void 0),u=c.err,d=c.index,h;switch(u){case 0:{r&De?r&pr?u=20:u=31:u=c.err,d=c.index,h=new kt(c.handle,a,i,s,this.keepMetadata);break}case 54:if(d===-1){if(r&ot&&!(t&1))break;let _=await this.getHandle(je(e),!1,c.handle);_.err===0&&(r&De&&r&pr?u=20:r&ot||(u=_.err),h=new Xt(_.handle,a,i,s,this.keepMetadata));break}else if(t&1){let _=await this.getHandle(je(e.slice(0,d)),!1,c.handle);_.err===0&&(h=new Xt(_.handle,a,i,s,this.keepMetadata));break}case 44:{if(r&De&&d===-1)try{let _=await c.handle.getFileHandle(je(e),{create:!0});u=0,h=new Xt(_,a,i,s,this.keepMetadata),this.keepMetadata&&(h.metadataPath=await un(_),await Br(h.metadataPath,{dev:0n,ino:0n,filetype:4,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n}))}catch(_){_ instanceof DOMException?u=fn(_,!1):u=28}break}}return{err:u,index:d,desc:h}}async renameat(e,t,r,i){if(e!==void 0&&!(e instanceof kt))return 28;let{handle:a,err:o}=await this.getHandle(t,!1,e.handle);if(o===31)return 75;if(o!==0)return o;let c=new Xt(a,0,Ge,Ge,this.keepMetadata);await yi(c);let u=await c.getFilestat();if(u.err!==0)return u.err;if(u.filestat.filetype===7)return 75;if(r!==void 0&&!(r instanceof kt))return 28;let{handle:d,err:h}=await this.getHandle(Kt(i),!0,r.handle);if(h!==0)return h;let _=await d.getFileHandle(je(i),{create:!0}),y=new Xt(_,0,Ge,Ge,this.keepMetadata);for(await yi(y);;){let{err:T,buffer:R}=await c.read(2048);if(T!==0)return T;if(R.byteLength===0)break;if((await y.write(R)).err!==0)return T}return await c.close(),await y.close(),await Br(y.metadataPath,u.filestat),await this.unlinkat(e,t,!1),0}async initialize(e){let t=e;this.keepMetadata=t.keepMetadata===void 0?!1:ds(t.keepMetadata);let r=t.create===void 0?!1:ds(t.create);if(t.prompt===void 0?!1:ds(t.prompt)){if(this.keepMetadata||t.name!==void 0||r)return 28;try{this.rootHandle=await showDirectoryPicker()}catch{return 44}}else t.name!==void 0&&(this.rootHandle=await vf(t.name,r),this.keepMetadata&&await gr(t.name)===void 0&&await Br(t.name,kt.defaultFilestat));return 0}async mknodat(e,t,r,i){return 28}async cleanup(){if(!this.keepMetadata)return;let e=this.rootHandle.name;await Promise.all((await gf()).map(async t=>{t.startsWith(e)&&(await this.open(t.replace(e,""),0,0,Ge,Ge,0,0)).err===44&&await Do(t)}))}};async function ms(n,e){let[t,r,i]=n.data,s=e.processInfos[t].cmd,a=s.substr(s.lastIndexOf("/")+1);switch(r){case"console":{console.log(`%c [dbg (%c${a}:${t}%c)] %c ${i}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;");break}case"proc_exit":{e.processInfos[t].env.DEBUG==="1"&&console.log(`%c [dbg (%c${a}:${t}%c)] %c exited with result code ${i}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;"),await e.terminateProcess(t,i),t===0&&(window.alive=!1,window.exitCode=i);break}case"chdir":{let{dir:c,sharedBuffer:u}=i,d=new Int32Array(u,0,1);e.processInfos[t].cwd=c,Atomics.store(d,0,0),Atomics.notify(d,0);break}case"getcwd":{let{bufLen:c,sharedBuffer:u}=i,d=new Int32Array(u,0,1),h=new Uint32Array(u,4,1),_=new Uint8Array(u,8,c),y=0,T=e.processInfos[t].cwd;c<T.length?(h[0]=c,y=42):(h[0]=T.length,_.set(new TextEncoder().encode(T),0)),Atomics.store(d,0,y),Atomics.notify(d,0);break}case"isatty":{let{sharedBuffer:c,fd:u}=i,d=new Int32Array(c,0,1),h=new Int32Array(c,4,1),_,{fds:y}=e.processInfos[t];y.getDesc(u)!==void 0?(h[0]=Number(y.getDesc(u).isatty()),_=0):_=8,Atomics.store(d,0,_),Atomics.notify(d,0);break}case"getpid":{let{sharedBuffer:c}=i,u=new Int32Array(c,0,1),d=new Int32Array(c,4,1);d[0]=e.processInfos[t].id,Atomics.store(u,0,0),Atomics.notify(u,0);break}case"set_env":{let{key:c,value:u,sharedBuffer:d}=i,h=new Int32Array(d,0,1);e.processInfos[t].env[c]=u,Atomics.store(h,0,0),Atomics.notify(h,0);break}case"set_echo":{let{shouldEcho:c,sharedBuffer:u}=i,d=new Int32Array(u,0,1);e.processInfos[t].shouldEcho=c==="1",Atomics.store(d,0,0),Atomics.notify(d,0);break}case"spawn":{let{path:c,args:u,env:d,sharedBuffer:h,background:_,redirects:y}=i,T=new Int32Array(h,0,1),R=new Int32Array(h,4,1);R[0]=-1,u.splice(0,0,c.split("/").pop());let X=0,V=e.processInfos[t].fds.clone();for(let q=0;q<y.length&&X==0;q++){let ue=y[q],Ee=ue.type,Oe=ue.fd_dst;switch(Ee){case To:case Co:case Oo:case xo:{let it=ue.path,Cr=De,vn=0,Qt=0n;switch(Ee){case To:{Cr=0,Qt|=_i;break}case Co:{Cr|=On,Qt|=Cn;break}case Oo:{vn|=1,Qt|=Cn;break}case xo:{Qt|=_i|Cn;break}default:{X=1,console.log(`Spawn: program should not enter here for redirect type ${ue.type}.`);continue}}let{desc:Or,err:Kn}=await e.filesystem.open(it,1,Cr,vn,Qt,Qt,t);if(Kn!==0){console.log(`Spawn: cannot open file, error: ${Kn}`),X=1;break}let Xn=V.getDesc(Oe);Xn!==void 0&&Xn.close(),V.setFd(Oe,new yt(Or));break}case nf:case sf:case af:{if(V.getDesc(ue.fd_src)!==void 0){let it=V.getDesc(Oe);it!==void 0&&it.close(),V.duplicateFd(ue.fd_src,Oe)}else console.log(`Spawn: cannot duplicate fd=${ue.fd_src}, it is closed.`),X=1;break}case of:{let it=V.getDesc(Oe);it!==void 0?(it.close(),V.freeFd(Oe)):(console.log(`Spawn: cannot close fd=${ue.fd_src}, it is already closed.`),X=1);break}default:console.log(`Spawn: redirect type ${ue.type} not found.`),X=1}}if(X!=0){Atomics.store(T,0,X),Atomics.notify(T,0);break}let ee=!0;switch(c){case"/usr/bin/ps":{let q=await ff(e,t,u,d,V);Atomics.store(T,0,q),Atomics.notify(T,0);break}case"/usr/bin/free":{let q=await lf(e,t,u,d,V);Atomics.store(T,0,q),Atomics.notify(T,0);break}case"/usr/bin/reset":{let q=await df(e,t,u,d,V);Atomics.store(T,0,q),Atomics.notify(T,0);break}default:{ee=!1;let q=e.processInfos[t].terminationNotifier;if(q!==null?q.obtainEvents(zt)!=0:!1){V.tearDown(),Atomics.store(T,0,130),Atomics.notify(T,0);break}try{let Ee=await e.spawnProcess(t,_?null:T,c,V,u,d,_,e.processInfos[t].cwd);if(Atomics.store(R,0,Ee),d.DEBUG==="1"){let Oe=c.split("/").slice(-1)[0];console.log(`%c [dbg (%c${Oe}:${Ee}%c)] %c spawned by ${a}:${t}`,"background:black; color: white;","background:black; color:yellow;","background: black; color:white;","background:default; color: default;")}}catch{console.log("Failed spawning process")}if(_){let Ee=0;(q!==null?q.obtainEvents(zt)!=0:!1)&&(Ee=130),Atomics.store(T,0,Ee),Atomics.notify(T,0)}}}ee&&V.tearDown();break}case"fd_prestat_get":{let{sharedBuffer:c,fd:u}=i,d=new Int32Array(c,0,1),h=new Int32Array(c,4,1),_=new Uint8Array(c,8,1),y,{fds:T}=e.processInfos[t];u>2&&u<4?(_[0]=ef,h[0]=je(T.getDesc(u).getPath()).length,y=0):y=8,Atomics.store(d,0,y),Atomics.notify(d,0);break}case"path_symlink":{let{sharedBuffer:c,targetPath:u,linkFd:d,linkPath:h}=i,_=new Int32Array(c,0,1),{fds:y}=e.processInfos[t],T;y.getDesc(d)===void 0?T=8:T=await e.filesystem.addSymlink(u,h,y.getDesc(d),t),Atomics.store(_,0,T),Atomics.notify(_,0);break}case"path_link":{let{sharedBuffer:c,oldFd:u}=i,d=new Int32Array(c,0,1),h,{fds:_}=e.processInfos[t];_.getDesc(u)!==void 0?h=(await _.getDesc(tf).write(new TextEncoder().encode("hard links are not supported"))).err:h=8,Atomics.store(d,0,h),Atomics.notify(d,0);break}case"path_readlink":{let{sharedBuffer:c,fd:u,path:d,bufferLen:h}=i,_=new Int32Array(c,0,1),y=new Int32Array(c,4,1),T=new Uint8Array(c,8,h),R=0,{fds:X}=e.processInfos[t];if(X.getDesc(u)!==void 0){let V;({err:R,path:V}=await e.filesystem.readLink(X.getDesc(u),d,t)),R===0?V.length>h?y[0]=h:(T.set(new TextEncoder().encode(V),0),y[0]=V.length):R=28}else R=8;Atomics.store(_,0,R),Atomics.notify(_,0);break}case"fd_prestat_dir_name":{let{sharedBuffer:c,fd:u,pathLen:d}=i,h=new Int32Array(c,0,1),_=new Uint8Array(c,4,d),y,{fds:T}=e.processInfos[t];T.getDesc(u)!==void 0?(_.set(new TextEncoder().encode(je(T.getDesc(u).getPath())),0),y=0):y=8,Atomics.store(h,0,y),Atomics.notify(h,0);break}case"fd_write":{let{sharedBuffer:c,fd:u,content:d}=i,h=new Int32Array(c,0,1),_=new Int32Array(c,4,1),{fds:y}=e.processInfos[t],T,R;if(y.getDesc(u)!==void 0){let X=await y.getDesc(u).getFdstat();if(R=X.fs_filetype,R===3)T=31;else if(R===7)T=28;else if((X.fs_rights_base&Cn)===0n)T=2;else{let V=await y.getDesc(u).write(d.buffer);T=V.err,_[0]=Number(V.written)}}else T=8;Atomics.store(h,0,T),Atomics.notify(h,0);break}case"fd_pread":case"fd_read":{let{sharedBuffer:c,fd:u,len:d,offset:h}=i,{fds:_}=e.processInfos[t],y=new Int32Array(c,0,1),T=new Uint8Array(c,8,d),R,X=new Int32Array(c,4,1),V;if(_.getDesc(u)===void 0)R=8;else if(V=await _.getDesc(u).getFdstat(),(V.fs_rights_base&_i)==0n)R=2;else if(V.fs_filetype===3)R=31;else if(V.fs_filetype===7)R=28;else{let ee;h?ee=await _.getDesc(u).pread(d,h):ee=await _.getDesc(u).read(d,t),R=ee.err,T.set(new Uint8Array(ee.buffer)),X[0]=ee.buffer.byteLength}Atomics.store(y,0,R),Atomics.notify(y,0);break}case"path_open":{let{sharedBuffer:c,dirFd:u,path:d,lookupFlags:h,openFlags:_,fsRightsBase:y,fsRightsInheriting:T,fdFlags:R}=i,X=new Int32Array(c,0,1),V=new Int32Array(c,4,1),ee,{fds:q}=e.processInfos[t];if(q.getDesc(u)!==void 0)if(_&De&&_&ot)ee=28;else{let ue;({err:ee,desc:ue}=await e.filesystem.openat(q.getDesc(u),d,h,_,R,y,T,t)),ee===0&&(V[0]=q.addFile(ue))}else ee=8;Atomics.store(X,0,ee),Atomics.notify(X,0);break}case"fd_close":{let{sharedBuffer:c,fd:u}=i,d=new Int32Array(c,0,1),h,{fds:_}=e.processInfos[t];_.getDesc(u)!==void 0?(await _.getDesc(u).close(),_.freeFd(u),h=0):h=8,Atomics.store(d,0,h),Atomics.notify(d,0);break}case"path_filestat_get":case"fd_filestat_get":{let{sharedBuffer:c,fd:u,path:d,lookupFlags:h}=i,_=new Int32Array(c,0,1),y=new DataView(c,4),T=0,{fds:R}=e.processInfos[t],X=R.getDesc(u);if(X===void 0)T=8;else{let V=await X.getFdstat();if(d&&V.fs_rights_base&yo||!d&&V.fs_rights_base&pi){let ee;if(d!==void 0){let q=await e.filesystem.openat(X,d,h,0,0,Ge,Ge,t);T=q.err,q.err===0&&(ee=q.desc)}else ee=X;if(ee!==void 0&&(d&&V.fs_rights_base&yo||!d&&V.fs_rights_base&pi)&&T===0){let q=await ee.getFilestat();q.err!=0?T=q.err:(y.setBigUint64(0,q.filestat.dev,!0),y.setBigUint64(8,q.filestat.ino,!0),y.setUint8(16,q.filestat.filetype),y.setBigUint64(24,q.filestat.nlink,!0),y.setBigUint64(32,q.filestat.size,!0),y.setBigUint64(40,q.filestat.atim,!0),y.setBigUint64(48,q.filestat.mtim,!0),y.setBigUint64(56,q.filestat.ctim,!0))}}else T=2}Atomics.store(_,0,T),Atomics.notify(_,0);break}case"fd_seek":{let{sharedBuffer:c,fd:u,offset:d,whence:h}=i,_=new Int32Array(c,0,1),y=new BigUint64Array(c,8,1),T,{fds:R}=e.processInfos[t];if(R.getDesc(u)===void 0)T=8;else{let X=await R.getDesc(u).getFdstat();if((X.fs_rights_base&Vu)!==0n)if(X.fs_filetype!==3){let V=await R.getDesc(u).seek(d,h);y[0]=V.offset,T=V.err}else T=8;else T=2}Atomics.store(_,0,T),Atomics.notify(_,0);break}case"fd_readdir":{let{sharedBuffer:c,fd:u,cookie:d,bufLen:h}=i,_=new Int32Array(c,0,1),y=new Uint32Array(c,4,1),T=new DataView(c,8,h),R=0,X,{fds:V}=e.processInfos[t];if(V.getDesc(u)!==void 0&&(await V.getDesc(u).getFdstat()).fs_filetype===3){let ee=(await V.getDesc(u).readdir(d===0n)).dirents;for(let q=Number(d);q<ee.length;q+=1){let ue=ee[q],Ee=new TextEncoder().encode(ue.name);if(R+8>h){R+=8;break}if(T.setBigUint64(R,BigInt(q+1),!0),R+=8,R+8>=h){R+=8;break}if(T.setBigUint64(R,ue.d_ino,!0),R+=8,R+4>=h){R+=4;break}if(T.setUint32(R,Ee.byteLength,!0),R+=4,R+4>=h){R+=4;break}if(T.setUint8(R,ue.d_type),R+=4,R+Ee.byteLength>h){R+=Ee.byteLength;break}new Uint8Array(c,8).set(Ee,R),R+=Ee.byteLength}y[0]=R>h?h:R,X=0}else X=8;Atomics.store(_,0,X),Atomics.notify(_,0);break}case"path_unlink_file":case"path_remove_directory":{let{sharedBuffer:c,fd:u,path:d}=i,h=new Int32Array(c,0,1),_,{fds:y}=e.processInfos[t];y.getDesc(u)!==void 0?_=await e.filesystem.removeEntry(d,r!=="path_unlink_file",y.getDesc(u),t):_=8,Atomics.store(h,0,_),Atomics.notify(h,0);break}case"path_create_directory":{let{sharedBuffer:c,fd:u,path:d}=i,h=new Int32Array(c,0,1),_,{fds:y}=e.processInfos[t];y.getDesc(u)!==void 0?_=await e.filesystem.createDir(d,y.getDesc(u),t):_=8,Atomics.store(h,0,_),Atomics.notify(h,0);break}case"fd_fdstat_get":{let{sharedBuffer:c,fd:u}=i,d=new Int32Array(c,0,1),h=new Uint8Array(c,4,1),_=new BigUint64Array(c,8,1),y=new BigUint64Array(c,16,1),T=new Uint8Array(c,24,1),R,{fds:X}=e.processInfos[t],V=X.getFdEntry(u);if(V!==void 0){let ee=await V.desc.getFdstat();h[0]=ee.fs_filetype,T[0]=ee.fs_flags|V.fdFlags,_[0]=ee.fs_rights_base,y[0]=ee.fs_rights_inheriting,R=0}else R=8;Atomics.store(d,0,R),Atomics.notify(d,0);break}case"path_rename":{let{sharedBuffer:c,oldFd:u,oldPath:d,newFd:h,newPath:_}=i,y=new Int32Array(c,0,1),{fds:T}=e.processInfos[t],R=await e.filesystem.move(T.getDesc(u),d,T.getDesc(h),_,t);Atomics.store(y,0,R),Atomics.notify(y,0);break}case"fd_tell":{let{sharedBuffer:c,fd:u}=i,d=new BigInt64Array(c,0,1),h=new Int32Array(c,8,1),{fds:_}=e.processInfos[t],y;if(_.getDesc(u)!==void 0){let T=await _.getDesc(u).getFdstat();(T.fs_rights_base&zu)!==0n?T.fs_filetype===4||T.fs_filetype===7?(d[0]=BigInt((await _.getDesc(u).seek(0n,Nr)).offset),y=0):y=8:y=2}else y=8;Atomics.store(h,0,y),Atomics.notify(h,0);break}case"path_filestat_set_times":case"fd_filestat_set_times":{let{sharedBuffer:c,st_atim:u,flags:d,st_mtim:h,fst_flags:_,fd:y,path:T}=i,R=8,X=new Int32Array(c,0,1),{fds:V}=e.processInfos[t],ee=V.getDesc(y);if(ee&&T!==void 0){let q=await e.filesystem.openat(ee,T,d);ee=q.desc,R=q.err}if(ee)if(!((await ee.getFdstat()).fs_rights_base&Xu))R=2;else if(_&wo&&_&Io||_&bo&&_&Ao)R=28;else{let ue,Ee;_&Io?Ee=u:_&wo&&(Ee=Ro(performance.now())),_&Ao?ue=h:_&bo&&(ue=Ro(performance.now())),R=await ee.setFilestatTimes(Ee,ue)}Atomics.store(X,0,R),Atomics.notify(X,0);break}case"fd_fdstat_set_flags":{let{sharedBuffer:c,fd:u,flags:d}=i,h=new Int32Array(c,0,1),{fds:_}=e.processInfos[t],y=0,T=_.getFdEntry(u);if(T===void 0)y=8;else if(d&32)T.fdFlags=d&65472;else{let R=d&31;y=await T.desc.setFdstatFlags(R)}Atomics.store(h,0,y),Atomics.notify(h,0);break}case"fd_renumber":{let{sharedBuffer:c,fd:u,newFd:d}=i,h=new Int32Array(c,0,1),{fds:_}=e.processInfos[t],y=0,T=_.getFdEntry(u),R=_.getFdEntry(d);T===void 0?y=8:(R!==void 0&&(await R.desc.close(),_.freeFd(d)),_.duplicateFd(u,d)),Atomics.store(h,0,y),Atomics.notify(h,0);break}case"poll_oneoff":{let{sharedBuffer:c,subs:u,eventBuf:d}=i,h=new Int32Array(c,0,2),{fds:_}=e.processInfos[t],y=[];await Promise.any(u.map(V=>{let ee;switch(V.eventType){case Zu:ee=new Promise(q=>{setTimeout(()=>{q({userdata:V.userdata,error:0,eventType:V.eventType,nbytes:0n})},Number(V.event.timeout/1000000n))});break;case ls:case Dr:{let q=ee=_.getDesc(V.event.fd);q===void 0?ee=Promise.resolve({userdata:V.userdata,error:8,eventType:V.eventType,nbytes:0n}):ee=q.addPollSub(V.userdata,V.eventType,t);break}default:ee=new Promise(q=>{q({userdata:V.userdata,error:28,eventType:jt,nbytes:0n})})}return ee.then(q=>y.push(q))}));let T=new DataView(d,0),R=y.length,X=0;y.forEach(V=>{T.setBigUint64(X,V.userdata,!0),X+=8,T.setUint16(X,V.error,!0),X+=2,T.setUint8(X,V.eventType),X+=6,T.setBigUint64(X,V.nbytes,!0),X+=8,X+=8}),Atomics.store(h,1,R),Atomics.store(h,0,0),Atomics.notify(h,0);break}case"event_source_fd":{let{sharedBuffer:c,eventMask:u}=i,d=new Int32Array(c,0,1),h=new Int32Array(c,4,1),_=new on(0,Ge,Ge,u),y=e.processInfos[t].fds;var o=y.addFile(_);y.fdt[o].fdFlags=64,Atomics.store(h,0,o),Atomics.store(d,0,0),Atomics.notify(d,0);break}case"attach_sigint":{let{sharedBuffer:c,fd:u}=i,d=e.attachSigint(u,t),h=new Int32Array(c,0,1);Atomics.store(h,0,d),Atomics.notify(h,0);break}case"clean_inodes":{let{sharedBuffer:c}=i,u=new Int32Array(c,0,1);await Promise.all(Object.values(e.filesystem.getMounts()).map(async d=>{d instanceof Fn&&d.cleanup()})),Atomics.store(u,0,0),Atomics.notify(u,0);break}case"kill":{let{sharedBuffer:c,processId:u,signalNumber:d}=i,h=new Int32Array(c,0,1),_=0;d!==9?(console.log(`Process=${u} send usupported singnal: ${d}!`),_=28):e.processInfos[u]===void 0?(console.log(`Process=${u} send singnal to process ${u} that does not exist!`),_=71):await e.terminateProcess(u,128+d),Atomics.store(h,0,_),Atomics.notify(h,0);break}case"ioctl":{let{sharedBuffer:c,fd:u,command:d}=i,h=new Int32Array(c,0,1),_=new Uint8Array(c,4),{fds:y}=e.processInfos[t],T=y.getDesc(u);if(u===void 0){Atomics.store(h,0,8),Atomics.notify(h,0);break}let R=await T.ioctl(d,_);Atomics.store(h,0,R),Atomics.notify(h,0);break}case"mount":{let{sharedBuffer:c,sourceFd:u,sourcePath:d,targetFd:h,targetPath:_,filesystemType:y,mountFlags:T,data:R}=i,X=0,V=new Int32Array(c,0,1),{fds:ee}=e.processInfos[t],q;u>=0&&(q=ee.getDesc(u),q===void 0&&(X=8));let ue;h>=0&&(ue=ee.getDesc(h),ue===void 0&&(X=8));let Ee={};for(let Oe of R.split(",")){if(Oe==="")continue;let it=Oe.split("=");if(it.length!==2){X=28;break}Ee[it[0]]=it[1]}X===0&&(X=await e.filesystem.addMount(q,d,ue,_,y,T,Ee,t)),Atomics.store(V,0,X),Atomics.notify(V,0);break}case"umount":{let{sharedBuffer:c,path:u}=i,d=new Int32Array(c,0,1);Atomics.store(d,0,e.filesystem.removeMount(u)),Atomics.notify(d,0);break}default:throw new Error(`Unhandled syscall: ${r}`)}}var qt="/home/ant",ys={PATH:"/usr/bin:/usr/local/bin",PWD:qt,OLDPWD:qt,TMPDIR:"/tmp",TERM:"xterm-256color",HOME:qt,SHELL:"/usr/bin/wash",LANG:"en_US.UTF-8",USER:"ant",HOSTNAME:"browser",PYTHONHOME:"/",PS1:"\x1B[1;34m\\u@\\h \x1B[1;33m\\w$\x1B[0m "},yt=class{desc;fdFlags;constructor(e){if(e===void 0)throw"DescriptorEntry must not contain undefined descriptor!";this.desc=e,this.fdFlags=0}},Pr=class{fdt={};freeFds=[];topFd;constructor(e){this.fdt={...e},this.topFd=Object.keys(e).length-1}clone(){var e=new Pr([]);e.freeFds=this.freeFds.slice(0);for(let t in this.fdt)this.fdt[t].fdFlags&64?e.freeFds.push(Number(t)):e.fdt[t]=new yt(this.fdt[t].desc);return e.freeFds.sort(),e.topFd=this.topFd,e}addFile(e){if(e===void 0)throw"Entry is undefined";let t=new yt(e),r=this.freeFds.shift();if(r!==void 0)return this.fdt[r]=t,r;for(r=++this.topFd;this.fdt[r]!==void 0;)r=++this.topFd;return this.fdt[r]=t,r}freeFd(e){if(!(e in this.fdt))throw"descriptor not present in descriptor table";delete this.fdt[e],this.freeFds.push(e)}replaceFd(e,t){if(!(e in this.fdt))throw"descriptor not present in descriptor table";if(t===void 0)throw"Entry is undefined";this.fdt[e]=t}getFdEntry(e){return this.fdt[e]}getDesc(e){return this.fdt[e]!==void 0?this.fdt[e].desc:void 0}setFd(e,t){this.prepareToStoreFd(e),this.fdt[e]!==void 0&&console.log(`setFd: overwrite opened fd = ${e}`),this.fdt[e]=t}duplicateFd(e,t){this.prepareToStoreFd(t),this.fdt[t]!==void 0&&console.log(`duplicateFd: overwrite opened fd = ${t}`),this.fdt[t]=new yt(this.fdt[e].desc)}prepareToStoreFd(e){let t=this.freeFds.findIndex(r=>r==e);t>=0&&this.freeFds.splice(t,1)}tearDown(){Promise.all(Object.values(this.fdt).map(async e=>{e!==void 0?e.desc!==void 0?e.desc.close():console.error("Descriptor entry has undefined descriptor!"):console.error("Descriptor entry is undefined!")}))}},ko=class{id;cmd;worker;fds;parentId;parentLock;callback;env;cwd;isJob;foreground;shouldEcho=!0;terminationNotifier=null;timestamp;children;constructor(e,t,r,i,s,a,o,c,u,d,h){this.id=e,this.cmd=t,this.worker=r,this.fds=i,this.parentId=s,this.parentLock=a,this.callback=o,this.env=c,this.cwd=u,this.isJob=d,this.foreground=h,this.timestamp=Math.floor(new Date().getTime()/1e3),this.children=[]}},Ii=class{scriptName;filesystem;driverManager;processInfos;nextProcessId=0;compiledModules={};constructor(e,t,r,i={}){this.scriptName=e,this.filesystem=t,this.driverManager=r,this.processInfos=i}async syscallCallback(e,t){if(this.driverManager!==void 0){let r=this.driverManager.getDriver(1);if(r!==void 0){r.wrapCallback(async()=>{await ms(e,t)});return}}ms}async spawnProcess(e,t,r,i,s,a,o,c,u=null){let d=this.nextProcessId;this.nextProcessId+=1;let h=new Worker(this.scriptName,{type:"module"});if(u===null&&(u=this.processInfos[e].foreground),e!==null&&(this.processInfos[e].children.push(d),t!==null&&(this.processInfos[e].foreground=null)),this.processInfos[d]=new ko(d,r,h,i,e,t,this.syscallCallback,a,c,o,u),h.onmessage=_=>this.syscallCallback(_,this),u!==null){let _=this.driverManager.getDriver(u.maj);_.terminals[u.min].foregroundPid=d}try{if(!this.compiledModules[r]){let{err:_,desc:y}=await this.filesystem.open(r,1);if(_!==0)return console.error(`No such binary: ${r}`),await this.terminateProcess(d,_),_;this.compiledModules[r]=await WebAssembly.compile((await y.arrayBuffer()).buffer)}}catch(_){let y;throw _.message==="WebAssembly.compile(): BufferSource argument is empty"?y=0:y=45,await this.terminateProcess(d,y),Error("invalid binary")}return!o&&e!=null&&this.processInfos[e].terminationNotifier!==null&&this.processInfos[e].terminationNotifier.obtainEvents(zt)!=jt?this.terminateProcess(d,130):this.processInfos[d].worker.postMessage(["start",this.compiledModules[r],d,s,a]),d}async terminateProcess(e,t=0){let r=this.processInfos[e];if(this.processInfos[e].fds.tearDown(),r.parentId!==null&&(this.processInfos[this.processInfos[e].parentId].foreground=r.foreground,this.processInfos[r.parentId].children.splice(r.children.indexOf(e),1),r.foreground!==null)){let i=this.driverManager.getDriver(r.foreground.maj);i.terminals[r.foreground.min].foregroundPid=r.parentId}r.worker.terminate(),r.children.forEach(i=>this.terminateProcess(i,128+9)),e!==0&&r.parentLock!=null&&(Atomics.store(r.parentLock,0,t),Atomics.notify(r.parentLock,0)),delete this.processInfos[e]}publishEvent(e,t){if(e&zt&&!this.processInfos[t].terminationNotifier){this.terminateProcess(t,128+zt);return}for(let r of Object.values(this.processInfos[t].fds.fdt))r.desc instanceof on&&r.desc.sendEvents(e)}attachSigint(e,t){let r=this.processInfos[t].fds.getDesc(e);if(r===void 0)return 8;if(!(r instanceof on))return 28;let i;return new Promise((s,a)=>{i=r.makeNotifier({resolve:s,reject:a}),i===0&&(this.processInfos[t].terminationNotifier=r)}).then(s=>{this.processInfos[t]!==void 0&&this.processInfos[t].terminationNotifier===s&&(this.processInfos[t].terminationNotifier=null)}),i}};var Pn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},ir=[],Ut=[],Eh=typeof Uint8Array<"u"?Uint8Array:Array,Ec=!1;function el(){Ec=!0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=n.length;e<t;++e)ir[e]=n[e],Ut[n.charCodeAt(e)]=e;Ut["-".charCodeAt(0)]=62,Ut["_".charCodeAt(0)]=63}function Ih(n){Ec||el();var e,t,r,i,s,a,o=n.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=n[o-2]==="="?2:n[o-1]==="="?1:0,a=new Eh(o*3/4-s),r=s>0?o-4:o;var c=0;for(e=0,t=0;e<r;e+=4,t+=3)i=Ut[n.charCodeAt(e)]<<18|Ut[n.charCodeAt(e+1)]<<12|Ut[n.charCodeAt(e+2)]<<6|Ut[n.charCodeAt(e+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return s===2?(i=Ut[n.charCodeAt(e)]<<2|Ut[n.charCodeAt(e+1)]>>4,a[c++]=i&255):s===1&&(i=Ut[n.charCodeAt(e)]<<10|Ut[n.charCodeAt(e+1)]<<4|Ut[n.charCodeAt(e+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function wh(n){return ir[n>>18&63]+ir[n>>12&63]+ir[n>>6&63]+ir[n&63]}function Ah(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16)+(n[s+1]<<8)+n[s+2],i.push(wh(r));return i.join("")}function Ef(n){Ec||el();for(var e,t=n.length,r=t%3,i="",s=[],a=16383,o=0,c=t-r;o<c;o+=a)s.push(Ah(n,o,o+a>c?c:o+a));return r===1?(e=n[t-1],i+=ir[e>>2],i+=ir[e<<4&63],i+="=="):r===2&&(e=(n[t-2]<<8)+n[t-1],i+=ir[e>>10],i+=ir[e>>4&63],i+=ir[e<<2&63],i+="="),s.push(i),s.join("")}function Ks(n,e,t,r,i){var s,a,o=i*8-r-1,c=(1<<o)-1,u=c>>1,d=-7,h=t?i-1:0,_=t?-1:1,y=n[e+h];for(h+=_,s=y&(1<<-d)-1,y>>=-d,d+=o;d>0;s=s*256+n[e+h],h+=_,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=r;d>0;a=a*256+n[e+h],h+=_,d-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-u}return(y?-1:1)*a*Math.pow(2,s-r)}function tl(n,e,t,r,i,s){var a,o,c,u=s*8-i-1,d=(1<<u)-1,h=d>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,T=r?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?e+=_/c:e+=_*Math.pow(2,1-h),e*c>=2&&(a++,c/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(e*c-1)*Math.pow(2,i),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;n[t+y]=o&255,y+=T,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;n[t+y]=a&255,y+=T,a/=256,u-=8);n[t+y-T]|=R*128}var bh={}.toString,rl=Array.isArray||function(n){return bh.call(n)=="[object Array]"};var Th=50;$.TYPED_ARRAY_SUPPORT=Pn.TYPED_ARRAY_SUPPORT!==void 0?Pn.TYPED_ARRAY_SUPPORT:!0;function nc(){return $.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function vr(n,e){if(nc()<e)throw new RangeError("Invalid typed array length");return $.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(e),n.__proto__=$.prototype):(n===null&&(n=new $(e)),n.length=e),n}function $(n,e,t){if(!$.TYPED_ARRAY_SUPPORT&&!(this instanceof $))return new $(n,e,t);if(typeof n=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ic(this,n)}return nl(this,n,e,t)}$.poolSize=8192;$._augment=function(n){return n.__proto__=$.prototype,n};function nl(n,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?xh(n,e,t,r):typeof e=="string"?Oh(n,e,t):Wh(n,e)}$.from=function(n,e,t){return nl(null,n,e,t)};$.TYPED_ARRAY_SUPPORT&&($.prototype.__proto__=Uint8Array.prototype,$.__proto__=Uint8Array);function il(n){if(typeof n!="number")throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative')}function Ch(n,e,t,r){return il(e),e<=0?vr(n,e):t!==void 0?typeof r=="string"?vr(n,e).fill(t,r):vr(n,e).fill(t):vr(n,e)}$.alloc=function(n,e,t){return Ch(null,n,e,t)};function Ic(n,e){if(il(e),n=vr(n,e<0?0:wc(e)|0),!$.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)n[t]=0;return n}$.allocUnsafe=function(n){return Ic(null,n)};$.allocUnsafeSlow=function(n){return Ic(null,n)};function Oh(n,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!$.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=sl(e,t)|0;n=vr(n,r);var i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function ic(n,e){var t=e.length<0?0:wc(e.length)|0;n=vr(n,t);for(var r=0;r<t;r+=1)n[r]=e[r]&255;return n}function xh(n,e,t,r){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),$.TYPED_ARRAY_SUPPORT?(n=e,n.__proto__=$.prototype):n=ic(n,e),n}function Wh(n,e){if(sr(e)){var t=wc(e.length)|0;return n=vr(n,t),n.length===0||e.copy(n,0,0,t),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Xh(e.length)?vr(n,0):ic(n,e);if(e.type==="Buffer"&&rl(e.data))return ic(n,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function wc(n){if(n>=nc())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+nc().toString(16)+" bytes");return n|0}$.isBuffer=hl;function sr(n){return!!(n!=null&&n._isBuffer)}$.compare=function(e,t){if(!sr(e)||!sr(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,s=0,a=Math.min(r,i);s<a;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0};$.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};$.concat=function(e,t){if(!rl(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return $.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=$.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var a=e[r];if(!sr(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function sl(n,e){if(sr(n))return n.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;typeof n!="string"&&(n=""+n);var t=n.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return Us(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return dl(n).length;default:if(r)return Us(n).length;e=(""+e).toLowerCase(),r=!0}}$.byteLength=sl;function Rh(n,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return $h(this,e,t);case"utf8":case"utf-8":return cl(this,e,t);case"ascii":return Ph(this,e,t);case"latin1":case"binary":return Mh(this,e,t);case"base64":return Bh(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gh(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}$.prototype._isBuffer=!0;function dn(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}$.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)dn(this,t,t+1);return this};$.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)dn(this,t,t+3),dn(this,t+1,t+2);return this};$.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)dn(this,t,t+7),dn(this,t+1,t+6),dn(this,t+2,t+5),dn(this,t+3,t+4);return this};$.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?cl(this,0,e):Rh.apply(this,arguments)};$.prototype.equals=function(e){if(!sr(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:$.compare(this,e)===0};$.prototype.inspect=function(){var e="",t=Th;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};$.prototype.compare=function(e,t,r,i,s){if(!sr(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,o=r-t,c=Math.min(a,o),u=this.slice(i,s),d=e.slice(t,r),h=0;h<c;++h)if(u[h]!==d[h]){a=u[h],o=d[h];break}return a<o?-1:o<a?1:0};function al(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=$.from(e,r)),sr(e))return e.length===0?-1:If(n,e,t,r,i);if(typeof e=="number")return e=e&255,$.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):If(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function If(n,e,t,r,i){var s=1,a=n.length,o=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;s=2,a/=2,o/=2,t/=2}function c(y,T){return s===1?y[T]:y.readUInt16BE(T*s)}var u;if(i){var d=-1;for(u=t;u<a;u++)if(c(n,u)===c(e,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===o)return d*s}else d!==-1&&(u-=u-d),d=-1}else for(t+o>a&&(t=a-o),u=t;u>=0;u--){for(var h=!0,_=0;_<o;_++)if(c(n,u+_)!==c(e,_)){h=!1;break}if(h)return u}return-1}$.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};$.prototype.indexOf=function(e,t,r){return al(this,e,t,r,!0)};$.prototype.lastIndexOf=function(e,t,r){return al(this,e,t,r,!1)};function Fh(n,e,t,r){t=Number(t)||0;var i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;n[t+a]=o}return a}function Dh(n,e,t,r){return Js(Us(e,n.length-t),n,t,r)}function ol(n,e,t,r){return Js(zh(e),n,t,r)}function Nh(n,e,t,r){return ol(n,e,t,r)}function Lh(n,e,t,r){return Js(dl(e),n,t,r)}function kh(n,e,t,r){return Js(Kh(e,n.length-t),n,t,r)}$.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Fh(this,e,t,r);case"utf8":case"utf-8":return Dh(this,e,t,r);case"ascii":return ol(this,e,t,r);case"latin1":case"binary":return Nh(this,e,t,r);case"base64":return Lh(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kh(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};$.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bh(n,e,t){return e===0&&t===n.length?Ef(n):Ef(n.slice(e,t))}function cl(n,e,t){t=Math.min(n.length,t);for(var r=[],i=e;i<t;){var s=n[i],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o<=t){var c,u,d,h;switch(o){case 1:s<128&&(a=s);break;case 2:c=n[i+1],(c&192)===128&&(h=(s&31)<<6|c&63,h>127&&(a=h));break;case 3:c=n[i+1],u=n[i+2],(c&192)===128&&(u&192)===128&&(h=(s&15)<<12|(c&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:c=n[i+1],u=n[i+2],d=n[i+3],(c&192)===128&&(u&192)===128&&(d&192)===128&&(h=(s&15)<<18|(c&63)<<12|(u&63)<<6|d&63,h>65535&&h<1114112&&(a=h))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),i+=o}return Uh(r)}var wf=4096;function Uh(n){var e=n.length;if(e<=wf)return String.fromCharCode.apply(String,n);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=wf));return t}function Ph(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function Mh(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function $h(n,e,t){var r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var i="",s=e;s<t;++s)i+=jh(n[s]);return i}function Gh(n,e,t){for(var r=n.slice(e,t),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+r[s+1]*256);return i}$.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var i;if($.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=$.prototype;else{var s=t-e;i=new $(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function Je(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}$.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||Je(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return i};$.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||Je(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};$.prototype.readUInt8=function(e,t){return t||Je(e,1,this.length),this[e]};$.prototype.readUInt16LE=function(e,t){return t||Je(e,2,this.length),this[e]|this[e+1]<<8};$.prototype.readUInt16BE=function(e,t){return t||Je(e,2,this.length),this[e]<<8|this[e+1]};$.prototype.readUInt32LE=function(e,t){return t||Je(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};$.prototype.readUInt32BE=function(e,t){return t||Je(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};$.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||Je(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};$.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||Je(e,t,this.length);for(var i=t,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};$.prototype.readInt8=function(e,t){return t||Je(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};$.prototype.readInt16LE=function(e,t){t||Je(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};$.prototype.readInt16BE=function(e,t){t||Je(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};$.prototype.readInt32LE=function(e,t){return t||Je(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};$.prototype.readInt32BE=function(e,t){return t||Je(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};$.prototype.readFloatLE=function(e,t){return t||Je(e,4,this.length),Ks(this,e,!0,23,4)};$.prototype.readFloatBE=function(e,t){return t||Je(e,4,this.length),Ks(this,e,!1,23,4)};$.prototype.readDoubleLE=function(e,t){return t||Je(e,8,this.length),Ks(this,e,!0,52,8)};$.prototype.readDoubleBE=function(e,t){return t||Je(e,8,this.length),Ks(this,e,!1,52,8)};function Tt(n,e,t,r,i,s){if(!sr(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}$.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t|0,r=r|0,!i){var s=Math.pow(2,8*r)-1;Tt(this,e,t,r,s,0)}var a=1,o=0;for(this[t]=e&255;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r};$.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t|0,r=r|0,!i){var s=Math.pow(2,8*r)-1;Tt(this,e,t,r,s,0)}var a=r-1,o=1;for(this[t+a]=e&255;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r};$.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,1,255,0),$.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function Xs(n,e,t,r){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(n.length-t,2);i<s;++i)n[t+i]=(e&255<<8*(r?i:1-i))>>>(r?i:1-i)*8}$.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,2,65535,0),$.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Xs(this,e,t,!0),t+2};$.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,2,65535,0),$.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Xs(this,e,t,!1),t+2};function qs(n,e,t,r){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(n.length-t,4);i<s;++i)n[t+i]=e>>>(r?i:3-i)*8&255}$.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,4,4294967295,0),$.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):qs(this,e,t,!0),t+4};$.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,4,4294967295,0),$.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):qs(this,e,t,!1),t+4};$.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*r-1);Tt(this,e,t,r,s-1,-s)}var a=0,o=1,c=0;for(this[t]=e&255;++a<r&&(o*=256);)e<0&&c===0&&this[t+a-1]!==0&&(c=1),this[t+a]=(e/o>>0)-c&255;return t+r};$.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*r-1);Tt(this,e,t,r,s-1,-s)}var a=r-1,o=1,c=0;for(this[t+a]=e&255;--a>=0&&(o*=256);)e<0&&c===0&&this[t+a+1]!==0&&(c=1),this[t+a]=(e/o>>0)-c&255;return t+r};$.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,1,127,-128),$.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};$.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,2,32767,-32768),$.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):Xs(this,e,t,!0),t+2};$.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,2,32767,-32768),$.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):Xs(this,e,t,!1),t+2};$.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,4,2147483647,-2147483648),$.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):qs(this,e,t,!0),t+4};$.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||Tt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),$.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):qs(this,e,t,!1),t+4};function ul(n,e,t,r,i,s){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function fl(n,e,t,r,i){return i||ul(n,e,t,4,34028234663852886e22,-34028234663852886e22),tl(n,e,t,r,23,4),t+4}$.prototype.writeFloatLE=function(e,t,r){return fl(this,e,t,!0,r)};$.prototype.writeFloatBE=function(e,t,r){return fl(this,e,t,!1,r)};function ll(n,e,t,r,i){return i||ul(n,e,t,8,17976931348623157e292,-17976931348623157e292),tl(n,e,t,r,52,8),t+8}$.prototype.writeDoubleLE=function(e,t,r){return ll(this,e,t,!0,r)};$.prototype.writeDoubleBE=function(e,t,r){return ll(this,e,t,!1,r)};$.prototype.copy=function(e,t,r,i){if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r,a;if(this===e&&r<t&&t<i)for(a=s-1;a>=0;--a)e[a+t]=this[a+r];else if(s<1e3||!$.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};$.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!$.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<r;++a)this[a]=e;else{var o=sr(e)?e:Us(new $(e,i).toString()),c=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%c]}return this};var Hh=/[^+\/0-9A-Za-z-_]/g;function Yh(n){if(n=Vh(n).replace(Hh,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function Vh(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function jh(n){return n<16?"0"+n.toString(16):n.toString(16)}function Us(n,e){e=e||1/0;for(var t,r=n.length,i=null,s=[],a=0;a<r;++a){if(t=n.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function zh(n){for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function Kh(n,e){for(var t,r,i,s=[],a=0;a<n.length&&!((e-=2)<0);++a)t=n.charCodeAt(a),r=t>>8,i=t%256,s.push(i),s.push(r);return s}function dl(n){return Ih(Yh(n))}function Js(n,e,t,r){for(var i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function Xh(n){return n!==n}function hl(n){return n!=null&&(!!n._isBuffer||_l(n)||qh(n))}function _l(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function qh(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&_l(n.slice(0,0))}var _n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ve(n,e){return e={exports:{}},n(e,e.exports),e.exports}var Jh=Math.ceil,Qh=Math.floor,Ac=function(n){return isNaN(n=+n)?0:(n>0?Qh:Jh)(n)},bc=function(n){if(n==null)throw TypeError("Can't call method on  "+n);return n},Zh=function(n){return function(e,t){var r=String(bc(e)),i=Ac(t),s=r.length,a,o;return i<0||i>=s?n?"":void 0:(a=r.charCodeAt(i),a<55296||a>56319||i+1===s||(o=r.charCodeAt(i+1))<56320||o>57343?n?r.charAt(i):a:n?r.slice(i,i+2):(a-55296<<10)+(o-56320)+65536)}},Oi=!0,ze=ve(function(n){var e=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)}),We=ve(function(n){var e=n.exports={version:"2.6.12"};typeof __e=="number"&&(__e=e)}),wv=We.version,sc=function(n){if(typeof n!="function")throw TypeError(n+" is not a function!");return n},zr=function(n,e,t){if(sc(n),e===void 0)return n;switch(t){case 1:return function(r){return n.call(e,r)};case 2:return function(r,i){return n.call(e,r,i)};case 3:return function(r,i,s){return n.call(e,r,i,s)}}return function(){return n.apply(e,arguments)}},qe=function(n){return typeof n=="object"?n!==null:typeof n=="function"},Ft=function(n){if(!qe(n))throw TypeError(n+" is not an object!");return n},Ar=function(n){try{return!!n()}catch{return!0}},bt=!Ar(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),ac=ze.document,e0=qe(ac)&&qe(ac.createElement),pl=function(n){return e0?ac.createElement(n):{}},Sl=!bt&&!Ar(function(){return Object.defineProperty(pl("div"),"a",{get:function(){return 7}}).a!=7}),Di=function(n,e){if(!qe(n))return n;var t,r;if(e&&typeof(t=n.toString)=="function"&&!qe(r=t.call(n))||typeof(t=n.valueOf)=="function"&&!qe(r=t.call(n))||!e&&typeof(t=n.toString)=="function"&&!qe(r=t.call(n)))return r;throw TypeError("Can't convert object to primitive value")},t0=Object.defineProperty,r0=bt?Object.defineProperty:function(e,t,r){if(Ft(e),t=Di(t,!0),Ft(r),Sl)try{return t0(e,t,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e},Gt={f:r0},pn=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},yr=bt?function(n,e,t){return Gt.f(n,e,pn(1,t))}:function(n,e,t){return n[e]=t,n},n0={}.hasOwnProperty,be=function(n,e){return n0.call(n,e)},Es="prototype",ct=function(n,e,t){var r=n&ct.F,i=n&ct.G,s=n&ct.S,a=n&ct.P,o=n&ct.B,c=n&ct.W,u=i?We:We[e]||(We[e]={}),d=u[Es],h=i?ze:s?ze[e]:(ze[e]||{})[Es],_,y,T;i&&(t=e);for(_ in t)y=!r&&h&&h[_]!==void 0,!(y&&be(u,_))&&(T=y?h[_]:t[_],u[_]=i&&typeof h[_]!="function"?t[_]:o&&y?zr(T,ze):c&&h[_]==T?function(R){var X=function(V,ee,q){if(this instanceof R){switch(arguments.length){case 0:return new R;case 1:return new R(V);case 2:return new R(V,ee)}return new R(V,ee,q)}return R.apply(this,arguments)};return X[Es]=R[Es],X}(T):a&&typeof T=="function"?zr(Function.call,T):T,a&&((u.virtual||(u.virtual={}))[_]=T,n&ct.R&&d&&!d[_]&&yr(d,_,T)))};ct.F=1;ct.G=2;ct.S=4;ct.P=8;ct.B=16;ct.W=32;ct.U=64;ct.R=128;var ce=ct,Ps=yr,Er={},i0={}.toString,xi=function(n){return i0.call(n).slice(8,-1)},Tc=Object("z").propertyIsEnumerable(0)?Object:function(n){return xi(n)=="String"?n.split(""):Object(n)},or=function(n){return Tc(bc(n))},s0=Math.min,Qs=function(n){return n>0?s0(Ac(n),9007199254740991):0},a0=Math.max,o0=Math.min,c0=function(n,e){return n=Ac(n),n<0?a0(n+e,0):o0(n,e)},u0=function(n){return function(e,t,r){var i=or(e),s=Qs(i.length),a=c0(r,s),o;if(n&&t!=t){for(;s>a;)if(o=i[a++],o!=o)return!0}else for(;s>a;a++)if((n||a in i)&&i[a]===t)return n||a||0;return!n&&-1}},Ni=ve(function(n){var e="__core-js_shared__",t=ze[e]||(ze[e]={});(n.exports=function(r,i){return t[r]||(t[r]=i!==void 0?i:{})})("versions",[]).push({version:We.version,mode:Oi?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),f0=0,l0=Math.random(),Zs=function(n){return"Symbol(".concat(n===void 0?"":n,")_",(++f0+l0).toString(36))},Af=Ni("keys"),Cc=function(n){return Af[n]||(Af[n]=Zs(n))},d0=u0(!1),h0=Cc("IE_PROTO"),gl=function(n,e){var t=or(n),r=0,i=[],s;for(s in t)s!=h0&&be(t,s)&&i.push(s);for(;e.length>r;)be(t,s=e[r++])&&(~d0(i,s)||i.push(s));return i},Ms="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Wi=Object.keys||function(e){return gl(e,Ms)},_0=bt?Object.defineProperties:function(e,t){Ft(e);for(var r=Wi(t),i=r.length,s=0,a;i>s;)Gt.f(e,a=r[s++],t[a]);return e},bf=ze.document,p0=bf&&bf.documentElement,S0=Cc("IE_PROTO"),Bo=function(){},oc="prototype",Ns=function(){var n=pl("iframe"),e=Ms.length,t="<",r=">",i;for(n.style.display="none",p0.appendChild(n),n.src="javascript:",i=n.contentWindow.document,i.open(),i.write(t+"script"+r+"document.F=Object"+t+"/script"+r),i.close(),Ns=i.F;e--;)delete Ns[oc][Ms[e]];return Ns()},Kr=Object.create||function(e,t){var r;return e!==null?(Bo[oc]=Ft(e),r=new Bo,Bo[oc]=null,r[S0]=e):r=Ns(),t===void 0?r:_0(r,t)},nt=ve(function(n){var e=Ni("wks"),t=ze.Symbol,r=typeof t=="function",i=n.exports=function(s){return e[s]||(e[s]=r&&t[s]||(r?t:Zs)("Symbol."+s))};i.store=e}),g0=Gt.f,Tf=nt("toStringTag"),$n=function(n,e,t){n&&!be(n=t?n:n.prototype,Tf)&&g0(n,Tf,{configurable:!0,value:e})},vl={};yr(vl,nt("iterator"),function(){return this});var v0=function(n,e,t){n.prototype=Kr(vl,{next:pn(1,t)}),$n(n,e+" Iterator")},Gn=function(n){return Object(bc(n))},Cf=Cc("IE_PROTO"),m0=Object.prototype,ml=Object.getPrototypeOf||function(n){return n=Gn(n),be(n,Cf)?n[Cf]:typeof n.constructor=="function"&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?m0:null},wi=nt("iterator"),Uo=!([].keys&&"next"in[].keys()),y0="@@iterator",Of="keys",Is="values",xf=function(){return this},Oc=function(n,e,t,r,i,s,a){v0(t,e,r);var o=function(q){if(!Uo&&q in h)return h[q];switch(q){case Of:return function(){return new t(this,q)};case Is:return function(){return new t(this,q)}}return function(){return new t(this,q)}},c=e+" Iterator",u=i==Is,d=!1,h=n.prototype,_=h[wi]||h[y0]||i&&h[i],y=_||o(i),T=i?u?o("entries"):y:void 0,R=e=="Array"&&h.entries||_,X,V,ee;if(R&&(ee=ml(R.call(new n)),ee!==Object.prototype&&ee.next&&($n(ee,c,!0),!Oi&&typeof ee[wi]!="function"&&yr(ee,wi,xf))),u&&_&&_.name!==Is&&(d=!0,y=function(){return _.call(this)}),(!Oi||a)&&(Uo||d||!h[wi])&&yr(h,wi,y),Er[e]=y,Er[c]=xf,i)if(X={values:u?y:o(Is),keys:s?y:o(Of),entries:T},a)for(V in X)V in h||Ps(h,V,X[V]);else ce(ce.P+ce.F*(Uo||d),e,X);return X},E0=Zh(!0);Oc(String,"String",function(n){this._t=String(n),this._i=0},function(){var n=this._t,e=this._i,t;return e>=n.length?{value:void 0,done:!0}:(t=E0(n,e),this._i+=t.length,{value:t,done:!1})});var Gr=function(n,e){return{value:e,done:!!n}},Av=Oc(Array,"Array",function(n,e){this._t=or(n),this._i=0,this._k=e},function(){var n=this._t,e=this._k,t=this._i++;return!n||t>=n.length?(this._t=void 0,Gr(1)):e=="keys"?Gr(0,t):e=="values"?Gr(0,n[t]):Gr(0,[t,n[t]])},"values");Er.Arguments=Er.Array;var Wf=nt("toStringTag"),Rf="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(ws=0;ws<Rf.length;ws++)As=Rf[ws],Po=ze[As],bs=Po&&Po.prototype,bs&&!bs[Wf]&&yr(bs,Wf,As),Er[As]=Er.Array;var As,Po,bs,ws,I0=nt,xc={f:I0},w0=xc.f("iterator"),yl=ve(function(n){n.exports={default:w0,__esModule:!0}});Re(yl);var Mt=ve(function(n){var e=Zs("meta"),t=Gt.f,r=0,i=Object.isExtensible||function(){return!0},s=!Ar(function(){return i(Object.preventExtensions({}))}),a=function(h){t(h,e,{value:{i:"O"+ ++r,w:{}}})},o=function(h,_){if(!qe(h))return typeof h=="symbol"?h:(typeof h=="string"?"S":"P")+h;if(!be(h,e)){if(!i(h))return"F";if(!_)return"E";a(h)}return h[e].i},c=function(h,_){if(!be(h,e)){if(!i(h))return!0;if(!_)return!1;a(h)}return h[e].w},u=function(h){return s&&d.NEED&&i(h)&&!be(h,e)&&a(h),h},d=n.exports={KEY:e,NEED:!1,fastKey:o,getWeak:c,onFreeze:u}}),bv=Mt.KEY,Tv=Mt.NEED,Cv=Mt.fastKey,Ov=Mt.getWeak,xv=Mt.onFreeze,A0=Gt.f,Wc=function(n){var e=We.Symbol||(We.Symbol=Oi?{}:ze.Symbol||{});n.charAt(0)!="_"&&!(n in e)&&A0(e,n,{value:xc.f(n)})},b0=Object.getOwnPropertySymbols,Hn={f:b0},T0={}.propertyIsEnumerable,ea={f:T0},C0=function(n){var e=Wi(n),t=Hn.f;if(t)for(var r=t(n),i=ea.f,s=0,a;r.length>s;)i.call(n,a=r[s++])&&e.push(a);return e},cc=Array.isArray||function(e){return xi(e)=="Array"},O0=Ms.concat("length","prototype"),x0=Object.getOwnPropertyNames||function(e){return gl(e,O0)},El={f:x0},Il=El.f,W0={}.toString,wl=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],R0=function(n){try{return Il(n)}catch{return wl.slice()}},F0=function(e){return wl&&W0.call(e)=="[object Window]"?R0(e):Il(or(e))},Al={f:F0},Ff=Object.getOwnPropertyDescriptor,D0=bt?Ff:function(e,t){if(e=or(e),t=Di(t,!0),Sl)try{return Ff(e,t)}catch{}if(be(e,t))return pn(!ea.f.call(e,t),e[t])},ta={f:D0},N0=Mt.KEY,bl=ta.f,ln=Gt.f,Tl=Al.f,At=ze.Symbol,$s=ze.JSON,Ts=$s&&$s.stringify,Yr="prototype",wt=nt("_hidden"),Df=nt("toPrimitive"),L0={}.propertyIsEnumerable,Ai=Ni("symbol-registry"),Ir=Ni("symbols"),Li=Ni("op-symbols"),Pt=Object[Yr],Yn=typeof At=="function"&&!!Hn.f,Mo=ze.QObject,uc=!Mo||!Mo[Yr]||!Mo[Yr].findChild,fc=bt&&Ar(function(){return Kr(ln({},"a",{get:function(){return ln(this,"a",{value:7}).a}})).a!=7})?function(n,e,t){var r=bl(Pt,e);r&&delete Pt[e],ln(n,e,t),r&&n!==Pt&&ln(Pt,e,r)}:ln,Nf=function(n){var e=Ir[n]=Kr(At[Yr]);return e._k=n,e},lc=Yn&&typeof At.iterator=="symbol"?function(n){return typeof n=="symbol"}:function(n){return n instanceof At},ra=function(e,t,r){return e===Pt&&ra(Li,t,r),Ft(e),t=Di(t,!0),Ft(r),be(Ir,t)?(r.enumerable?(be(e,wt)&&e[wt][t]&&(e[wt][t]=!1),r=Kr(r,{enumerable:pn(0,!1)})):(be(e,wt)||ln(e,wt,pn(1,{})),e[wt][t]=!0),fc(e,t,r)):ln(e,t,r)},Cl=function(e,t){Ft(e);for(var r=C0(t=or(t)),i=0,s=r.length,a;s>i;)ra(e,a=r[i++],t[a]);return e},k0=function(e,t){return t===void 0?Kr(e):Cl(Kr(e),t)},Lf=function(e){var t=L0.call(this,e=Di(e,!0));return this===Pt&&be(Ir,e)&&!be(Li,e)?!1:t||!be(this,e)||!be(Ir,e)||be(this,wt)&&this[wt][e]?t:!0},Ol=function(e,t){if(e=or(e),t=Di(t,!0),!(e===Pt&&be(Ir,t)&&!be(Li,t))){var r=bl(e,t);return r&&be(Ir,t)&&!(be(e,wt)&&e[wt][t])&&(r.enumerable=!0),r}},xl=function(e){for(var t=Tl(or(e)),r=[],i=0,s;t.length>i;)!be(Ir,s=t[i++])&&s!=wt&&s!=N0&&r.push(s);return r},Wl=function(e){for(var t=e===Pt,r=Tl(t?Li:or(e)),i=[],s=0,a;r.length>s;)be(Ir,a=r[s++])&&(!t||be(Pt,a))&&i.push(Ir[a]);return i};Yn||(At=function(){if(this instanceof At)throw TypeError("Symbol is not a constructor!");var e=Zs(arguments.length>0?arguments[0]:void 0),t=function(r){this===Pt&&t.call(Li,r),be(this,wt)&&be(this[wt],e)&&(this[wt][e]=!1),fc(this,e,pn(1,r))};return bt&&uc&&fc(Pt,e,{configurable:!0,set:t}),Nf(e)},Ps(At[Yr],"toString",function(){return this._k}),ta.f=Ol,Gt.f=ra,El.f=Al.f=xl,ea.f=Lf,Hn.f=Wl,bt&&!Oi&&Ps(Pt,"propertyIsEnumerable",Lf,!0),xc.f=function(n){return Nf(nt(n))});ce(ce.G+ce.W+ce.F*!Yn,{Symbol:At});for($o="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Go=0;$o.length>Go;)nt($o[Go++]);var $o,Go;for(Ho=Wi(nt.store),Yo=0;Ho.length>Yo;)Wc(Ho[Yo++]);var Ho,Yo;ce(ce.S+ce.F*!Yn,"Symbol",{for:function(n){return be(Ai,n+="")?Ai[n]:Ai[n]=At(n)},keyFor:function(e){if(!lc(e))throw TypeError(e+" is not a symbol!");for(var t in Ai)if(Ai[t]===e)return t},useSetter:function(){uc=!0},useSimple:function(){uc=!1}});ce(ce.S+ce.F*!Yn,"Object",{create:k0,defineProperty:ra,defineProperties:Cl,getOwnPropertyDescriptor:Ol,getOwnPropertyNames:xl,getOwnPropertySymbols:Wl});var B0=Ar(function(){Hn.f(1)});ce(ce.S+ce.F*B0,"Object",{getOwnPropertySymbols:function(e){return Hn.f(Gn(e))}});$s&&ce(ce.S+ce.F*(!Yn||Ar(function(){var n=At();return Ts([n])!="[null]"||Ts({a:n})!="{}"||Ts(Object(n))!="{}"})),"JSON",{stringify:function(e){for(var t=[e],r=1,i,s;arguments.length>r;)t.push(arguments[r++]);if(s=i=t[1],!(!qe(i)&&e===void 0||lc(e)))return cc(i)||(i=function(a,o){if(typeof s=="function"&&(o=s.call(this,a,o)),!lc(o))return o}),t[1]=i,Ts.apply($s,t)}});At[Yr][Df]||yr(At[Yr],Df,At[Yr].valueOf);$n(At,"Symbol");$n(Math,"Math",!0);$n(ze.JSON,"JSON",!0);Wc("asyncIterator");Wc("observable");var U0=We.Symbol,Rl=ve(function(n){n.exports={default:U0,__esModule:!0}});Re(Rl);var Rc=ve(function(n,e){e.__esModule=!0;var t=s(yl),r=s(Rl),i=typeof r.default=="function"&&typeof t.default=="symbol"?function(a){return typeof a}:function(a){return a&&typeof r.default=="function"&&a.constructor===r.default&&a!==r.default.prototype?"symbol":typeof a};function s(a){return a&&a.__esModule?a:{default:a}}e.default=typeof r.default=="function"&&i(t.default)==="symbol"?function(a){return typeof a>"u"?"undefined":i(a)}:function(a){return a&&typeof r.default=="function"&&a.constructor===r.default&&a!==r.default.prototype?"symbol":typeof a>"u"?"undefined":i(a)}}),P0=Re(Rc),Cs=Object.assign,Fl=!Cs||Ar(function(){var n={},e={},t=Symbol(),r="abcdefghijklmnopqrst";return n[t]=7,r.split("").forEach(function(i){e[i]=i}),Cs({},n)[t]!=7||Object.keys(Cs({},e)).join("")!=r})?function(e,t){for(var r=Gn(e),i=arguments.length,s=1,a=Hn.f,o=ea.f;i>s;)for(var c=Tc(arguments[s++]),u=a?Wi(c).concat(a(c)):Wi(c),d=u.length,h=0,_;d>h;)_=u[h++],(!bt||o.call(c,_))&&(r[_]=c[_]);return r}:Cs;ce(ce.S+ce.F,"Object",{assign:Fl});var M0=We.Object.assign,Dl=ve(function(n){n.exports={default:M0,__esModule:!0}});Re(Dl);var $0=ve(function(n,e){e.__esModule=!0;var t=r(Dl);function r(i){return i&&i.__esModule?i:{default:i}}e.default=t.default||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i}}),Nn=Re($0),Nl=function(n,e,t,r){try{return r?e(Ft(t)[0],t[1]):e(t)}catch(s){var i=n.return;throw i!==void 0&&Ft(i.call(n)),s}},G0=nt("iterator"),H0=Array.prototype,Ll=function(n){return n!==void 0&&(Er.Array===n||H0[G0]===n)},kf=function(n,e,t){e in n?Gt.f(n,e,pn(0,t)):n[e]=t},Y0=nt("toStringTag"),V0=xi(function(){return arguments}())=="Arguments",j0=function(n,e){try{return n[e]}catch{}},Fc=function(n){var e,t,r;return n===void 0?"Undefined":n===null?"Null":typeof(t=j0(e=Object(n),Y0))=="string"?t:V0?xi(e):(r=xi(e))=="Object"&&typeof e.callee=="function"?"Arguments":r},z0=nt("iterator"),Dc=We.getIteratorMethod=function(n){if(n!=null)return n[z0]||n["@@iterator"]||Er[Fc(n)]},dc=nt("iterator"),kl=!1;try{Bf=[7][dc](),Bf.return=function(){kl=!0}}catch{}var Bf,K0=function(n,e){if(!e&&!kl)return!1;var t=!1;try{var r=[7],i=r[dc]();i.next=function(){return{done:t=!0}},r[dc]=function(){return i},n(r)}catch{}return t};ce(ce.S+ce.F*!K0(function(n){}),"Array",{from:function(e){var t=Gn(e),r=typeof this=="function"?this:Array,i=arguments.length,s=i>1?arguments[1]:void 0,a=s!==void 0,o=0,c=Dc(t),u,d,h,_;if(a&&(s=zr(s,i>2?arguments[2]:void 0,2)),c!=null&&!(r==Array&&Ll(c)))for(_=c.call(t),d=new r;!(h=_.next()).done;o++)kf(d,o,a?Nl(_,s,[h.value,o],!0):h.value);else for(u=Qs(t.length),d=new r(u);u>o;o++)kf(d,o,a?s(t[o],o):t[o]);return d.length=o,d}});var X0=We.Array.from,Bl=ve(function(n){n.exports={default:X0,__esModule:!0}});Re(Bl);var q0=ve(function(n,e){e.__esModule=!0;var t=r(Bl);function r(i){return i&&i.__esModule?i:{default:i}}e.default=function(i){if(Array.isArray(i)){for(var s=0,a=Array(i.length);s<i.length;s++)a[s]=i[s];return a}else return(0,t.default)(i)}}),Le=Re(q0),J0=nt("iterator"),Q0=We.isIterable=function(n){var e=Object(n);return e[J0]!==void 0||"@@iterator"in e||Er.hasOwnProperty(Fc(e))},Z0=Q0,Ul=ve(function(n){n.exports={default:Z0,__esModule:!0}});Re(Ul);var e_=We.getIterator=function(n){var e=Dc(n);if(typeof e!="function")throw TypeError(n+" is not iterable!");return Ft(e.call(n))},t_=e_,Pl=ve(function(n){n.exports={default:t_,__esModule:!0}});Re(Pl);var r_=ve(function(n,e){e.__esModule=!0;var t=i(Ul),r=i(Pl);function i(s){return s&&s.__esModule?s:{default:s}}e.default=function(){function s(a,o){var c=[],u=!0,d=!1,h=void 0;try{for(var _=(0,r.default)(a),y;!(u=(y=_.next()).done)&&(c.push(y.value),!(o&&c.length===o));u=!0);}catch(T){d=!0,h=T}finally{try{!u&&_.return&&_.return()}finally{if(d)throw h}}return c}return function(a,o){if(Array.isArray(a))return a;if((0,t.default)(Object(a)))return s(a,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),Et=Re(r_),n_=ve(function(n,e){e.__esModule=!0,e.default=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}}),ut=Re(n_);ce(ce.S+ce.F*!bt,"Object",{defineProperty:Gt.f});var i_=We.Object,s_=function(e,t,r){return i_.defineProperty(e,t,r)},Ml=ve(function(n){n.exports={default:s_,__esModule:!0}});Re(Ml);var a_=ve(function(n,e){e.__esModule=!0;var t=r(Ml);function r(i){return i&&i.__esModule?i:{default:i}}e.default=function(){function i(s,a){for(var o=0;o<a.length;o++){var c=a[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),(0,t.default)(s,c.key,c)}}return function(s,a,o){return a&&i(s.prototype,a),o&&i(s,o),s}}()}),vt=Re(a_);function $l(){throw new Error("setTimeout has not been defined")}function Gl(){throw new Error("clearTimeout has not been defined")}var Mr=$l,$r=Gl;typeof Pn.setTimeout=="function"&&(Mr=setTimeout);typeof Pn.clearTimeout=="function"&&($r=clearTimeout);function Hl(n){if(Mr===setTimeout)return setTimeout(n,0);if((Mr===$l||!Mr)&&setTimeout)return Mr=setTimeout,setTimeout(n,0);try{return Mr(n,0)}catch{try{return Mr.call(null,n,0)}catch{return Mr.call(this,n,0)}}}function o_(n){if($r===clearTimeout)return clearTimeout(n);if(($r===Gl||!$r)&&clearTimeout)return $r=clearTimeout,clearTimeout(n);try{return $r(n)}catch{try{return $r.call(null,n)}catch{return $r.call(this,n)}}}var mr=[],Bn=!1,hn,Ls=-1;function c_(){!Bn||!hn||(Bn=!1,hn.length?mr=hn.concat(mr):Ls=-1,mr.length&&Yl())}function Yl(){if(!Bn){var n=Hl(c_);Bn=!0;for(var e=mr.length;e;){for(hn=mr,mr=[];++Ls<e;)hn&&hn[Ls].run();Ls=-1,e=mr.length}hn=null,Bn=!1,o_(n)}}function ft(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];mr.push(new Vl(n,e)),mr.length===1&&!Bn&&Hl(Yl)}function Vl(n,e){this.fun=n,this.array=e}Vl.prototype.run=function(){this.fun.apply(null,this.array)};var u_="browser",f_="browser",l_=!0,d_={},h_=[],__="",p_={},S_={},g_={};function Sn(){}var v_=Sn,m_=Sn,y_=Sn,E_=Sn,I_=Sn,w_=Sn,A_=Sn;function b_(n){throw new Error("process.binding is not supported")}function T_(){return"/"}function C_(n){throw new Error("process.chdir is not supported")}function O_(){return 0}var Ln=Pn.performance||{},x_=Ln.now||Ln.mozNow||Ln.msNow||Ln.oNow||Ln.webkitNow||function(){return new Date().getTime()};function W_(n){var e=x_.call(Ln)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return n&&(t=t-n[0],r=r-n[1],r<0&&(t--,r+=1e9)),[t,r]}var R_=new Date;function F_(){var n=new Date,e=n-R_;return e/1e3}var ks={nextTick:ft,title:u_,browser:l_,env:d_,argv:h_,version:__,versions:p_,on:v_,addListener:m_,once:y_,off:E_,removeListener:I_,removeAllListeners:w_,emit:A_,binding:b_,cwd:T_,chdir:C_,umask:O_,hrtime:W_,platform:f_,release:S_,config:g_,uptime:F_};function jl(n,e){for(var t=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}var D_=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Nc=function(n){return D_.exec(n).slice(1)};function hc(){for(var n="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;n=r+"/"+n,e=r.charAt(0)==="/"}return n=jl(Lc(n.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+n||"."}function zl(n){var e=Kl(n),t=$_(n,-1)==="/";return n=jl(Lc(n.split("/"),function(r){return!!r}),!e).join("/"),!n&&!e&&(n="."),n&&t&&(n+="/"),(e?"/":"")+n}function Kl(n){return n.charAt(0)==="/"}function N_(){var n=Array.prototype.slice.call(arguments,0);return zl(Lc(n,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function L_(n,e){n=hc(n).substr(1),e=hc(e).substr(1);function t(u){for(var d=0;d<u.length&&u[d]==="";d++);for(var h=u.length-1;h>=0&&u[h]==="";h--);return d>h?[]:u.slice(d,h-d+1)}for(var r=t(n.split("/")),i=t(e.split("/")),s=Math.min(r.length,i.length),a=s,o=0;o<s;o++)if(r[o]!==i[o]){a=o;break}for(var c=[],o=a;o<r.length;o++)c.push("..");return c=c.concat(i.slice(a)),c.join("/")}var k_="/",B_=":";function U_(n){var e=Nc(n),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function P_(n,e){var t=Nc(n)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function M_(n){return Nc(n)[3]}var Vo={extname:M_,basename:P_,dirname:U_,sep:k_,delimiter:B_,relative:L_,join:N_,isAbsolute:Kl,normalize:zl,resolve:hc};function Lc(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}var $_="ab".substr(-1)==="b"?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)},G_=ve(function(n,e){(function(t,r){n.exports=r()})(_n,function(){function t(r,i){return new Proxy({},{getPrototypeOf:function(a){return Reflect.getPrototypeOf(r[i])},setPrototypeOf:function(a,o){return Reflect.setPrototypeOf(r[i],o)},isExtensible:function(a){return Reflect.isExtensible(r[i])},preventExtensions:function(a){return Reflect.preventExtensions(r[i])},getOwnPropertyDescriptor:function(a,o){return Reflect.getOwnPropertyDescriptor(r[i],o)},defineProperty:function(a,o,c){return Reflect.defineProperty(r[i],o,c)},get:function(a,o){var c=Reflect.get(r[i],o);return typeof c=="function"&&(c=c.bind(r[i])),c},set:function(a,o,c){return Reflect.set(r[i],o,c)},has:function(a,o){return Reflect.has(r[i],o)},deleteProperty:function(a,o){return Reflect.delete(r[i],o)},ownKeys:function(a){return Reflect.ownKeys(r[i])},apply:function(a,o,c){return Reflect.apply(r[i],o,c)},construct:function(a,o,c){return Reflect.construct(r[i],o,c)}})}return t})}),kc=function(n,e){var t=(We.Object||{})[n]||Object[n],r={};r[n]=e(t),ce(ce.S+ce.F*Ar(function(){t(1)}),"Object",r)},H_=Mt.onFreeze;kc("freeze",function(n){return function(t){return n&&qe(t)?n(H_(t)):t}});var Y_=We.Object.freeze,V_=ve(function(n){n.exports={default:Y_,__esModule:!0}}),j_=Re(V_),W=j_({O_RDONLY:0,O_WRONLY:1,O_RDWR:2,O_ACCMODE:3,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,COPYFILE_EXCL:1,SEEK_SET:0,SEEK_CUR:1,SEEK_END:2,MAP_SHARED:1,MAP_PRIVATE:2}),Bs=function(){function n(e){ut(this,n),this.dev=e.dev||0,this.ino=e.ino,this.mode=e.mode,this.nlink=e.nlink,this.uid=e.uid,this.gid=e.gid,this.rdev=e.rdev||0,this.size=e.size,this.blksize=void 0,this.blocks=void 0,this.atime=e.atime,this.mtime=e.mtime,this.ctime=e.ctime,this.birthtime=e.birthtime}return vt(n,[{key:"isFile",value:function(){return(this.mode&W.S_IFMT)==W.S_IFREG}},{key:"isDirectory",value:function(){return(this.mode&W.S_IFMT)==W.S_IFDIR}},{key:"isBlockDevice",value:function(){return(this.mode&W.S_IFMT)==W.S_IFBLK}},{key:"isCharacterDevice",value:function(){return(this.mode&W.S_IFMT)==W.S_IFCHR}},{key:"isSymbolicLink",value:function(){return(this.mode&W.S_IFMT)==W.S_IFLNK}},{key:"isFIFO",value:function(){return(this.mode&W.S_IFMT)==W.S_IFIFO}},{key:"isSocket",value:function(){return(this.mode&W.S_IFMT)==W.S_IFSOCK}}]),n}(),z_=function(){function n(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];ut(this,n),this._iNodeMgr=e,this._iNode=t,this._curPath=r,e.refINode(t)}return vt(n,[{key:"changeDir",value:function(t,r){this._iNodeMgr.refINode(t),this._iNodeMgr.unrefINode(this._iNode),this._iNode=t,this._curPath=r}},{key:"getINode",value:function(){return this._iNode}},{key:"getPathStack",value:function(){return[].concat(Le(this._curPath))}},{key:"getPath",value:function(){return"/"+this._curPath.join("/")}}]),n}(),nr=0,_c=0,K_=W.S_IRWXU|W.S_IRGRP|W.S_IXGRP|W.S_IROTH|W.S_IXOTH,Wt=W.S_IRUSR|W.S_IWUSR|W.S_IRGRP|W.S_IWGRP|W.S_IROTH|W.S_IWOTH,Gs=W.S_IRWXU|W.S_IRWXG|W.S_IRWXO,Bc=W.S_IRWXU|W.S_IRWXG|W.S_IRWXO;function bi(n,e){return n&~e}function X_(n,e,t){return n===t.uid?(t.mode&W.S_IRWXU)>>6:e===t.gid?(t.mode&W.S_IRWXG)>>3:t.mode&W.S_IRWXO}function q_(n,e,t,r){return(n&X_(e,t,r))===n}var Uc=function(n,e,t){for(var r in e)t&&n[r]?n[r]=e[r]:yr(n,r,e[r]);return n},Hs=function(n,e,t,r){if(!(n instanceof e)||r!==void 0&&r in n)throw TypeError(t+": incorrect invocation!");return n},Mn=ve(function(n){var e={},t={},r=n.exports=function(i,s,a,o,c){var u=c?function(){return i}:Dc(i),d=zr(a,o,s?2:1),h=0,_,y,T,R;if(typeof u!="function")throw TypeError(i+" is not iterable!");if(Ll(u)){for(_=Qs(i.length);_>h;h++)if(R=s?d(Ft(y=i[h])[0],y[1]):d(i[h]),R===e||R===t)return R}else for(T=u.call(i);!(y=T.next()).done;)if(R=Nl(T,d,y.value,s),R===e||R===t)return R};r.BREAK=e,r.RETURN=t}),Uf=nt("species"),J_=function(n){var e=typeof We[n]=="function"?We[n]:ze[n];bt&&e&&!e[Uf]&&Gt.f(e,Uf,{configurable:!0,get:function(){return this}})},Rt=function(n,e){if(!qe(n)||n._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return n},Q_=Gt.f,Xl=Mt.fastKey,Ti=bt?"_s":"size",Os=function(n,e){var t=Xl(e),r;if(t!=="F")return n._i[t];for(r=n._f;r;r=r.n)if(r.k==e)return r},jo={getConstructor:function(n,e,t,r){var i=n(function(s,a){Hs(s,i,e,"_i"),s._t=e,s._i=Kr(null),s._f=void 0,s._l=void 0,s[Ti]=0,a!=null&&Mn(a,t,s[r],s)});return Uc(i.prototype,{clear:function(){for(var a=Rt(this,e),o=a._i,c=a._f;c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete o[c.i];a._f=a._l=void 0,a[Ti]=0},delete:function(s){var a=Rt(this,e),o=Os(a,s);if(o){var c=o.n,u=o.p;delete a._i[o.i],o.r=!0,u&&(u.n=c),c&&(c.p=u),a._f==o&&(a._f=c),a._l==o&&(a._l=u),a[Ti]--}return!!o},forEach:function(a){Rt(this,e);for(var o=zr(a,arguments.length>1?arguments[1]:void 0,3),c;c=c?c.n:this._f;)for(o(c.v,c.k,this);c&&c.r;)c=c.p},has:function(a){return!!Os(Rt(this,e),a)}}),bt&&Q_(i.prototype,"size",{get:function(){return Rt(this,e)[Ti]}}),i},def:function(n,e,t){var r=Os(n,e),i,s;return r?r.v=t:(n._l=r={i:s=Xl(e,!0),k:e,v:t,p:i=n._l,n:void 0,r:!1},n._f||(n._f=r),i&&(i.n=r),n[Ti]++,s!=="F"&&(n._i[s]=r)),n},getEntry:Os,setStrong:function(n,e,t){Oc(n,e,function(r,i){this._t=Rt(r,e),this._k=i,this._l=void 0},function(){for(var r=this,i=r._k,s=r._l;s&&s.r;)s=s.p;return!r._t||!(r._l=s=s?s.n:r._t._f)?(r._t=void 0,Gr(1)):i=="keys"?Gr(0,s.k):i=="values"?Gr(0,s.v):Gr(0,[s.k,s.v])},t?"entries":"values",!t,!0),J_(e)}},Z_=nt("species"),ep=function(n){var e;return cc(n)&&(e=n.constructor,typeof e=="function"&&(e===Array||cc(e.prototype))&&(e=void 0),qe(e)&&(e=e[Z_],e===null&&(e=void 0))),e===void 0?Array:e},tp=function(n,e){return new(ep(n))(e)},na=function(n,e){var t=n==1,r=n==2,i=n==3,s=n==4,a=n==6,o=n==5||a,c=e||tp;return function(u,d,h){for(var _=Gn(u),y=Tc(_),T=zr(d,h,3),R=Qs(y.length),X=0,V=t?c(u,R):r?c(u,0):void 0,ee,q;R>X;X++)if((o||X in y)&&(ee=y[X],q=T(ee,X,_),n)){if(t)V[X]=q;else if(q)switch(n){case 3:return!0;case 5:return ee;case 6:return X;case 2:V.push(ee)}else if(s)return!1}return a?-1:i||s?s:V}},rp=Gt.f,np=na(0),ql=function(n,e,t,r,i,s){var a=ze[n],o=a,c=i?"set":"add",u=o&&o.prototype,d={};return!bt||typeof o!="function"||!(s||u.forEach&&!Ar(function(){new o().entries().next()}))?(o=r.getConstructor(e,n,i,c),Uc(o.prototype,t),Mt.NEED=!0):(o=e(function(h,_){Hs(h,o,n,"_c"),h._c=new a,_!=null&&Mn(_,i,h[c],h)}),np("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(h){var _=h=="add"||h=="set";h in u&&!(s&&h=="clear")&&yr(o.prototype,h,function(y,T){if(Hs(this,o,h),!_&&s&&!qe(y))return h=="get"?void 0:!1;var R=this._c[h](y===0?0:y,T);return _?this:R})}),s||rp(o.prototype,"size",{get:function(){return this._c.size}})),$n(o,n),d[n]=o,ce(ce.G+ce.W+ce.F,d),s||r.setStrong(o,n,i),o},zo="Map",Wv=ql(zo,function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=jo.getEntry(Rt(this,zo),e);return t&&t.v},set:function(e,t){return jo.def(Rt(this,zo),e===0?0:e,t)}},jo,!0),ip=function(n,e){var t=[];return Mn(n,!1,t.push,t,e),t},sp=function(n){return function(){if(Fc(this)!=n)throw TypeError(n+"#toJSON isn't generic");return ip(this)}};ce(ce.P+ce.R,"Map",{toJSON:sp("Map")});var Jl=function(n){ce(ce.S,n,{of:function(){for(var t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return new this(r)}})};Jl("Map");var Ql=function(n){ce(ce.S,n,{from:function(t){var r=arguments[1],i,s,a,o;return sc(this),i=r!==void 0,i&&sc(r),t==null?new this:(s=[],i?(a=0,o=zr(r,arguments[2],2),Mn(t,!1,function(c){s.push(o(c,a++))})):Mn(t,!1,s.push,s),new this(s))}})};Ql("Map");var ap=We.Map,op=ve(function(n){n.exports={default:ap,__esModule:!0}}),Ri=Re(op);kc("getPrototypeOf",function(){return function(e){return ml(Gn(e))}});var cp=We.Object.getPrototypeOf,Zl=ve(function(n){n.exports={default:cp,__esModule:!0}}),xe=Re(Zl),up=ve(function(n,e){e.__esModule=!0;var t=r(Rc);function r(i){return i&&i.__esModule?i:{default:i}}e.default=function(i,s){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&((typeof s>"u"?"undefined":(0,t.default)(s))==="object"||typeof s=="function")?s:i}}),Xr=Re(up),Pf=function(n,e){if(Ft(n),!qe(e)&&e!==null)throw TypeError(e+": can't set as prototype!")},fp={set:Object.setPrototypeOf||("__proto__"in{}?function(n,e,t){try{t=zr(Function.call,ta.f(Object.prototype,"__proto__").set,2),t(n,[]),e=!(n instanceof Array)}catch{e=!0}return function(i,s){return Pf(i,s),e?i.__proto__=s:t(i,s),i}}({},!1):void 0),check:Pf};ce(ce.S,"Object",{setPrototypeOf:fp.set});var lp=We.Object.setPrototypeOf,ed=ve(function(n){n.exports={default:lp,__esModule:!0}});Re(ed);ce(ce.S,"Object",{create:Kr});var dp=We.Object,hp=function(e,t){return dp.create(e,t)},td=ve(function(n){n.exports={default:hp,__esModule:!0}});Re(td);var _p=ve(function(n,e){e.__esModule=!0;var t=s(ed),r=s(td),i=s(Rc);function s(a){return a&&a.__esModule?a:{default:a}}e.default=function(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof o>"u"?"undefined":(0,i.default)(o)));a.prototype=(0,r.default)(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(t.default?(0,t.default)(a,o):a.__proto__=o)}}),qr=Re(_p),pp=ve(function(n,e){(function(t,r){r(e)})(_n,function(t){var r=typeof window<"u"?window:typeof _n<"u"?_n:typeof self<"u"?self:{};function i(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}function s(f,l){return l={exports:{}},f(l,l.exports),l.exports}var a=function(f,l){return{value:l,done:!!f}},o={},c={}.toString,u=function(f){return c.call(f).slice(8,-1)},d=Object("z").propertyIsEnumerable(0)?Object:function(f){return u(f)=="String"?f.split(""):Object(f)},h=function(f){if(f==null)throw TypeError("Can't call method on  "+f);return f},_=function(f){return d(h(f))},y=!0,T=s(function(f){var l=f.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=l)}),R=s(function(f){var l=f.exports={version:"2.4.0"};typeof __e=="number"&&(__e=l)}),X=R.version,V=function(f){if(typeof f!="function")throw TypeError(f+" is not a function!");return f},ee=function(f,l,S){if(V(f),l===void 0)return f;switch(S){case 1:return function(v){return f.call(l,v)};case 2:return function(v,w){return f.call(l,v,w)};case 3:return function(v,w,E){return f.call(l,v,w,E)}}return function(){return f.apply(l,arguments)}},q=function(f){return typeof f=="object"?f!==null:typeof f=="function"},ue=function(f){if(!q(f))throw TypeError(f+" is not an object!");return f},Ee=function(f){try{return!!f()}catch{return!0}},Oe=!Ee(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),it=T.document,Cr=q(it)&&q(it.createElement),vn=function(f){return Cr?it.createElement(f):{}},Qt=!Oe&&!Ee(function(){return Object.defineProperty(vn("div"),"a",{get:function(){return 7}}).a!=7}),Or=function(f,l){if(!q(f))return f;var S,v;if(l&&typeof(S=f.toString)=="function"&&!q(v=S.call(f))||typeof(S=f.valueOf)=="function"&&!q(v=S.call(f))||!l&&typeof(S=f.toString)=="function"&&!q(v=S.call(f)))return v;throw TypeError("Can't convert object to primitive value")},Kn=Object.defineProperty,Xn=Oe?Object.defineProperty:function(l,S,v){if(ue(l),S=Or(S,!0),ue(v),Qt)try{return Kn(l,S,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported!");return"value"in v&&(l[S]=v.value),l},Dt={f:Xn},Jr=function(f,l){return{enumerable:!(f&1),configurable:!(f&2),writable:!(f&4),value:l}},Zt=Oe?function(f,l,S){return Dt.f(f,l,Jr(1,S))}:function(f,l,S){return f[l]=S,f},qn="prototype",Qe=function(f,l,S){var v=f&Qe.F,w=f&Qe.G,E=f&Qe.S,b=f&Qe.P,k=f&Qe.B,Z=f&Qe.W,ne=w?R:R[l]||(R[l]={}),_e=ne[qn],g=w?T:E?T[l]:(T[l]||{})[qn],O,F,P;w&&(S=l);for(O in S)F=!v&&g&&g[O]!==void 0,!(F&&O in ne)&&(P=F?g[O]:S[O],ne[O]=w&&typeof g[O]!="function"?S[O]:k&&F?ee(P,T):Z&&g[O]==P?function(te){var ae=function(le,pe,oe){if(this instanceof te){switch(arguments.length){case 0:return new te;case 1:return new te(le);case 2:return new te(le,pe)}return new te(le,pe,oe)}return te.apply(this,arguments)};return ae[qn]=te[qn],ae}(P):b&&typeof P=="function"?ee(Function.call,P):P,b&&((ne.virtual||(ne.virtual={}))[O]=P,f&Qe.R&&_e&&!_e[O]&&Zt(_e,O,P)))};Qe.F=1,Qe.G=2,Qe.S=4,Qe.P=8,Qe.B=16,Qe.W=32,Qe.U=64,Qe.R=128;var Ie=Qe,Jn=Zt,Ca={}.hasOwnProperty,we=function(f,l){return Ca.call(f,l)},zi=Math.ceil,Oa=Math.floor,Qn=function(f){return isNaN(f=+f)?0:(f>0?Oa:zi)(f)},xa=Math.min,Zn=function(f){return f>0?xa(Qn(f),9007199254740991):0},Wa=Math.max,Ra=Math.min,Fa=function(f,l){return f=Qn(f),f<0?Wa(f+l,0):Ra(f,l)},gu=function(f){return function(l,S,v){var w=_(l),E=Zn(w.length),b=Fa(v,E),k;if(f&&S!=S){for(;E>b;)if(k=w[b++],k!=k)return!0}else for(;E>b;b++)if((f||b in w)&&w[b]===S)return f||b||0;return!f&&-1}},Da="__core-js_shared__",Ki=T[Da]||(T[Da]={}),Qr=function(f){return Ki[f]||(Ki[f]={})},Na=0,La=Math.random(),mn=function(f){return"Symbol(".concat(f===void 0?"":f,")_",(++Na+La).toString(36))},Xi=Qr("keys"),ei=function(f){return Xi[f]||(Xi[f]=mn(f))},ka=gu(!1),dt=ei("IE_PROTO"),ur=function(f,l){var S=_(f),v=0,w=[],E;for(E in S)E!=dt&&we(S,E)&&w.push(E);for(;l.length>v;)we(S,E=l[v++])&&(~ka(w,E)||w.push(E));return w},yn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Yt=Object.keys||function(l){return ur(l,yn)},qi=Oe?Object.defineProperties:function(l,S){ue(l);for(var v=Yt(S),w=v.length,E=0,b;w>E;)Dt.f(l,b=v[E++],S[b]);return l},Ba=T.document&&document.documentElement,Ua=ei("IE_PROTO"),ti=function(){},ri="prototype",En=function(){var f=vn("iframe"),l=yn.length,S="<",v=">",w;for(f.style.display="none",Ba.appendChild(f),f.src="javascript:",w=f.contentWindow.document,w.open(),w.write(S+"script"+v+"document.F=Object"+S+"/script"+v),w.close(),En=w.F;l--;)delete En[ri][yn[l]];return En()},fr=Object.create||function(l,S){var v;return l!==null?(ti[ri]=ue(l),v=new ti,ti[ri]=null,v[Ua]=l):v=En(),S===void 0?v:qi(v,S)},Ze=s(function(f){var l=Qr("wks"),S=T.Symbol,v=typeof S=="function",w=f.exports=function(E){return l[E]||(l[E]=v&&S[E]||(v?S:mn)("Symbol."+E))};w.store=l}),Pa=Dt.f,Ji=Ze("toStringTag"),lr=function(f,l,S){f&&!we(f=S?f:f.prototype,Ji)&&Pa(f,Ji,{configurable:!0,value:l})},In={};Zt(In,Ze("iterator"),function(){return this});var ni=function(f,l,S){f.prototype=fr(In,{next:Jr(1,S)}),lr(f,l+" Iterator")},Zr=function(f){return Object(h(f))},xr=ei("IE_PROTO"),Ct=Object.prototype,fe=Object.getPrototypeOf||function(f){return f=Zr(f),we(f,xr)?f[xr]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?Ct:null},K=Ze("iterator"),Wr=!([].keys&&"next"in[].keys()),Ma="@@iterator",Qi="keys",wn="values",ii=function(){return this},Q=function(f,l,S,v,w,E,b){ni(S,l,v);var k=function(oe){if(!Wr&&oe in g)return g[oe];switch(oe){case Qi:return function(){return new S(this,oe)};case wn:return function(){return new S(this,oe)}}return function(){return new S(this,oe)}},Z=l+" Iterator",ne=w==wn,_e=!1,g=f.prototype,O=g[K]||g[Ma]||w&&g[w],F=O||k(w),P=w?ne?k("entries"):F:void 0,te=l=="Array"&&g.entries||O,ae,le,pe;if(te&&(pe=fe(te.call(new f)),pe!==Object.prototype&&(lr(pe,Z,!0),!y&&!we(pe,K)&&Zt(pe,K,ii))),ne&&O&&O.name!==wn&&(_e=!0,F=function(){return O.call(this)}),(!y||b)&&(Wr||_e||!g[K])&&Zt(g,K,F),o[l]=F,o[Z]=ii,w)if(ae={values:ne?F:k(wn),keys:E?F:k(Qi),entries:P},b)for(le in ae)le in g||Jn(g,le,ae[le]);else Ie(Ie.P+Ie.F*(Wr||_e),l,ae);return ae},x=Q(Array,"Array",function(f,l){this._t=_(f),this._i=0,this._k=l},function(){var f=this._t,l=this._k,S=this._i++;return!f||S>=f.length?(this._t=void 0,a(1)):l=="keys"?a(0,S):l=="values"?a(0,f[S]):a(0,[S,f[S]])},"values");o.Arguments=o.Array;for(var A=Ze("toStringTag"),m=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],I=0;I<5;I++){var C=m[I],st=T[C],en=st&&st.prototype;en&&!en[A]&&Zt(en,A,C),o[C]=o.Array}var si=function(f){return function(l,S){var v=String(h(l)),w=Qn(S),E=v.length,b,k;return w<0||w>=E?f?"":void 0:(b=v.charCodeAt(w),b<55296||b>56319||w+1===E||(k=v.charCodeAt(w+1))<56320||k>57343?f?v.charAt(w):b:f?v.slice(w,w+2):(b-55296<<10)+(k-56320)+65536)}},$a=si(!0);Q(String,"String",function(f){this._t=String(f),this._i=0},function(){var f=this._t,l=this._i,S;return l>=f.length?{value:void 0,done:!0}:(S=$a(f,l),this._i+=S.length,{value:S,done:!1})});var Ga=Ze("toStringTag"),Ha=u(function(){return arguments}())=="Arguments",Ya=function(f,l){try{return f[l]}catch{}},Zi=function(f){var l,S,v;return f===void 0?"Undefined":f===null?"Null":typeof(S=Ya(l=Object(f),Ga))=="string"?S:Ha?u(l):(v=u(l))=="Object"&&typeof l.callee=="function"?"Arguments":v},Va=Ze("iterator"),ja=R.isIterable=function(f){var l=Object(f);return l[Va]!==void 0||"@@iterator"in l||o.hasOwnProperty(Zi(l))},za=ja,es=s(function(f){f.exports={default:za,__esModule:!0}});i(es);var Ka=Ze("iterator"),ts=R.getIteratorMethod=function(f){if(f!=null)return f[Ka]||f["@@iterator"]||o[Zi(f)]},Xa=R.getIterator=function(f){var l=ts(f);if(typeof l!="function")throw TypeError(f+" is not iterable!");return ue(l.call(f))},qa=Xa,rs=s(function(f){f.exports={default:qa,__esModule:!0}});i(rs);var Ja=s(function(f,l){l.__esModule=!0;var S=w(es),v=w(rs);function w(E){return E&&E.__esModule?E:{default:E}}l.default=function(){function E(b,k){var Z=[],ne=!0,_e=!1,g=void 0;try{for(var O=(0,v.default)(b),F;!(ne=(F=O.next()).done)&&(Z.push(F.value),!(k&&Z.length===k));ne=!0);}catch(P){_e=!0,g=P}finally{try{!ne&&O.return&&O.return()}finally{if(_e)throw g}}return Z}return function(b,k){if(Array.isArray(b))return b;if((0,S.default)(Object(b)))return E(b,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()}),Rr=i(Ja),Qa=s(function(f,l){l.__esModule=!0,l.default=function(S,v){if(!(S instanceof v))throw new TypeError("Cannot call a class as a function")}}),tn=i(Qa);Ie(Ie.S+Ie.F*!Oe,"Object",{defineProperty:Dt.f});var Za=R.Object,eo=function(l,S,v){return Za.defineProperty(l,S,v)},ns=s(function(f){f.exports={default:eo,__esModule:!0}});i(ns);var to=s(function(f,l){l.__esModule=!0;var S=v(ns);function v(w){return w&&w.__esModule?w:{default:w}}l.default=function(){function w(E,b){for(var k=0;k<b.length;k++){var Z=b[k];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),(0,S.default)(E,Z.key,Z)}}return function(E,b,k){return b&&w(E.prototype,b),k&&w(E,k),E}}()}),An=i(to);function ai(f,l,S){var v=void 0,w=void 0;return f.allocate(l,function(E){var b=E.counter,k=E.changed,Z=E.tree;l=b,v=k,w=Z},S),[l,v,w]}function oi(f,l,S){var v=void 0,w=void 0;return f.deallocate(l,function(E){var b=E.changed,k=E.tree;v=b,w=k},S),[v,w]}function ci(f,l){var S=void 0;return f.check(l,function(v){S=v}),!!S}var is=function(f,l){var S=(R.Object||{})[f]||Object[f],v={};v[f]=l(S),Ie(Ie.S+Ie.F*Ee(function(){S(1)}),"Object",v)};is("keys",function(){return function(l){return Yt(Zr(l))}});var et=R.Object.keys,ro=s(function(f){f.exports={default:et,__esModule:!0}}),no=i(ro);is("getPrototypeOf",function(){return function(l){return fe(Zr(l))}});var io=R.Object.getPrototypeOf,so=s(function(f){f.exports={default:io,__esModule:!0}}),ss=i(so),ao=Ze,ui={f:ao},oo=ui.f("iterator"),as=s(function(f){f.exports={default:oo,__esModule:!0}});i(as);var er=s(function(f){var l=mn("meta"),S=Dt.f,v=0,w=Object.isExtensible||function(){return!0},E=!Ee(function(){return w(Object.preventExtensions({}))}),b=function(g){S(g,l,{value:{i:"O"+ ++v,w:{}}})},k=function(g,O){if(!q(g))return typeof g=="symbol"?g:(typeof g=="string"?"S":"P")+g;if(!we(g,l)){if(!w(g))return"F";if(!O)return"E";b(g)}return g[l].i},Z=function(g,O){if(!we(g,l)){if(!w(g))return!0;if(!O)return!1;b(g)}return g[l].w},ne=function(g){return E&&_e.NEED&&w(g)&&!we(g,l)&&b(g),g},_e=f.exports={KEY:l,NEED:!1,fastKey:k,getWeak:Z,onFreeze:ne}}),vu=er.KEY,mu=er.NEED,yu=er.fastKey,Eu=er.getWeak,Iu=er.onFreeze,U=Dt.f,D=function(f){var l=R.Symbol||(R.Symbol=y?{}:T.Symbol||{});f.charAt(0)!="_"&&!(f in l)&&U(l,f,{value:ui.f(f)})},M=function(f,l){for(var S=_(f),v=Yt(S),w=v.length,E=0,b;w>E;)if(S[b=v[E++]]===l)return b},z=Object.getOwnPropertySymbols,H={f:z},Y={}.propertyIsEnumerable,N={f:Y},G=function(f){var l=Yt(f),S=H.f;if(S)for(var v=S(f),w=N.f,E=0,b;v.length>E;)w.call(f,b=v[E++])&&l.push(b);return l},j=Array.isArray||function(l){return u(l)=="Array"},J=yn.concat("length","prototype"),re=Object.getOwnPropertyNames||function(l){return ur(l,J)},ie={f:re},he=ie.f,me={}.toString,ge=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fe=function(f){try{return he(f)}catch{return ge.slice()}},Be=function(l){return ge&&me.call(l)=="[object Window]"?Fe(l):he(_(l))},Ce={f:Be},ht=Object.getOwnPropertyDescriptor,_t=Oe?ht:function(l,S){if(l=_(l),S=Or(S,!0),Qt)try{return ht(l,S)}catch{}if(we(l,S))return Jr(!N.f.call(l,S),l[S])},Ot={f:_t},dr=er.KEY,Vt=Ot.f,Ke=Dt.f,rn=Ce.f,Xe=T.Symbol,Nt=T.JSON,hr=Nt&&Nt.stringify,tr="prototype",at=Ze("_hidden"),wu=Ze("toPrimitive"),Fd={}.propertyIsEnumerable,os=Qr("symbol-registry"),_r=Qr("symbols"),fi=Qr("op-symbols"),Lt=Object[tr],bn=typeof Xe=="function",co=T.QObject,uo=!co||!co[tr]||!co[tr].findChild,fo=Oe&&Ee(function(){return fr(Ke({},"a",{get:function(){return Ke(this,"a",{value:7}).a}})).a!=7})?function(f,l,S){var v=Vt(Lt,l);v&&delete Lt[l],Ke(f,l,S),v&&f!==Lt&&Ke(Lt,l,v)}:Ke,Au=function(f){var l=_r[f]=fr(Xe[tr]);return l._k=f,l},lo=bn&&typeof Xe.iterator=="symbol"?function(f){return typeof f=="symbol"}:function(f){return f instanceof Xe},cs=function(l,S,v){return l===Lt&&cs(fi,S,v),ue(l),S=Or(S,!0),ue(v),we(_r,S)?(v.enumerable?(we(l,at)&&l[at][S]&&(l[at][S]=!1),v=fr(v,{enumerable:Jr(0,!1)})):(we(l,at)||Ke(l,at,Jr(1,{})),l[at][S]=!0),fo(l,S,v)):Ke(l,S,v)},bu=function(l,S){ue(l);for(var v=G(S=_(S)),w=0,E=v.length,b;E>w;)cs(l,b=v[w++],S[b]);return l},Dd=function(l,S){return S===void 0?fr(l):bu(fr(l),S)},Tu=function(l){var S=Fd.call(this,l=Or(l,!0));return this===Lt&&we(_r,l)&&!we(fi,l)?!1:S||!we(this,l)||!we(_r,l)||we(this,at)&&this[at][l]?S:!0},Cu=function(l,S){if(l=_(l),S=Or(S,!0),!(l===Lt&&we(_r,S)&&!we(fi,S))){var v=Vt(l,S);return v&&we(_r,S)&&!(we(l,at)&&l[at][S])&&(v.enumerable=!0),v}},Ou=function(l){for(var S=rn(_(l)),v=[],w=0,E;S.length>w;)!we(_r,E=S[w++])&&E!=at&&E!=dr&&v.push(E);return v},xu=function(l){for(var S=l===Lt,v=rn(S?fi:_(l)),w=[],E=0,b;v.length>E;)we(_r,b=v[E++])&&(!S||we(Lt,b))&&w.push(_r[b]);return w};bn||(Xe=function(){if(this instanceof Xe)throw TypeError("Symbol is not a constructor!");var l=mn(arguments.length>0?arguments[0]:void 0),S=function(v){this===Lt&&S.call(fi,v),we(this,at)&&we(this[at],l)&&(this[at][l]=!1),fo(this,l,Jr(1,v))};return Oe&&uo&&fo(Lt,l,{configurable:!0,set:S}),Au(l)},Jn(Xe[tr],"toString",function(){return this._k}),Ot.f=Cu,Dt.f=cs,ie.f=Ce.f=Ou,N.f=Tu,H.f=xu,Oe&&!y&&Jn(Lt,"propertyIsEnumerable",Tu,!0),ui.f=function(f){return Au(Ze(f))}),Ie(Ie.G+Ie.W+Ie.F*!bn,{Symbol:Xe});for(var li="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),di=0;li.length>di;)Ze(li[di++]);for(var li=Yt(Ze.store),di=0;li.length>di;)D(li[di++]);Ie(Ie.S+Ie.F*!bn,"Symbol",{for:function(f){return we(os,f+="")?os[f]:os[f]=Xe(f)},keyFor:function(l){if(lo(l))return M(os,l);throw TypeError(l+" is not a symbol!")},useSetter:function(){uo=!0},useSimple:function(){uo=!1}}),Ie(Ie.S+Ie.F*!bn,"Object",{create:Dd,defineProperty:cs,defineProperties:bu,getOwnPropertyDescriptor:Cu,getOwnPropertyNames:Ou,getOwnPropertySymbols:xu}),Nt&&Ie(Ie.S+Ie.F*(!bn||Ee(function(){var f=Xe();return hr([f])!="[null]"||hr({a:f})!="{}"||hr(Object(f))!="{}"})),"JSON",{stringify:function(l){if(!(l===void 0||lo(l))){for(var S=[l],v=1,w,E;arguments.length>v;)S.push(arguments[v++]);return w=S[1],typeof w=="function"&&(E=w),(E||!j(w))&&(w=function(b,k){if(E&&(k=E.call(this,b,k)),!lo(k))return k}),S[1]=w,hr.apply(Nt,S)}}}),Xe[tr][wu]||Zt(Xe[tr],wu,Xe[tr].valueOf),lr(Xe,"Symbol"),lr(Math,"Math",!0),lr(T.JSON,"JSON",!0),D("asyncIterator"),D("observable");var Nd=R.Symbol,Wu=s(function(f){f.exports={default:Nd,__esModule:!0}});i(Wu);var ho=s(function(f,l){l.__esModule=!0;var S=E(as),v=E(Wu),w=typeof v.default=="function"&&typeof S.default=="symbol"?function(b){return typeof b}:function(b){return b&&typeof v.default=="function"&&b.constructor===v.default&&b!==v.default.prototype?"symbol":typeof b};function E(b){return b&&b.__esModule?b:{default:b}}l.default=typeof v.default=="function"&&w(S.default)==="symbol"?function(b){return typeof b>"u"?"undefined":w(b)}:function(b){return b&&typeof v.default=="function"&&b.constructor===v.default&&b!==v.default.prototype?"symbol":typeof b>"u"?"undefined":w(b)}});i(ho);var Ld=s(function(f,l){l.__esModule=!0;var S=v(ho);function v(w){return w&&w.__esModule?w:{default:w}}l.default=function(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&((typeof E>"u"?"undefined":(0,S.default)(E))==="object"||typeof E=="function")?E:w}}),Ru=i(Ld),Fu=function(f,l){if(ue(f),!q(l)&&l!==null)throw TypeError(l+": can't set as prototype!")},kd={set:Object.setPrototypeOf||("__proto__"in{}?function(f,l,S){try{S=ee(Function.call,Ot.f(Object.prototype,"__proto__").set,2),S(f,[]),l=!(f instanceof Array)}catch{l=!0}return function(w,E){return Fu(w,E),l?w.__proto__=E:S(w,E),w}}({},!1):void 0),check:Fu};Ie(Ie.S,"Object",{setPrototypeOf:kd.set});var Bd=R.Object.setPrototypeOf,Du=s(function(f){f.exports={default:Bd,__esModule:!0}});i(Du),Ie(Ie.S,"Object",{create:fr});var Ud=R.Object,Pd=function(l,S){return Ud.create(l,S)},Nu=s(function(f){f.exports={default:Pd,__esModule:!0}});i(Nu);var Md=s(function(f,l){l.__esModule=!0;var S=E(Du),v=E(Nu),w=E(ho);function E(b){return b&&b.__esModule?b:{default:b}}l.default=function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof k>"u"?"undefined":(0,w.default)(k)));b.prototype=(0,v.default)(k&&k.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),k&&(S.default?(0,S.default)(b,k):b.__proto__=k)}}),Lu=i(Md),$d=s(function(f,l){(function(S){var v=32,w=5;function E(g){return g-=g>>>1&1431655765,g=(g&858993459)+(g>>>2&858993459),(g+(g>>>4)&252645135)*16843009>>>24}function b(g,O){for(var F=0,P=0;P<g.length;P++){F*=2;var te=(g[P]+F)/O|0;F=(g[P]+F)%O,g[P]=te}return F}function k(g,O){if(O==null){g.data=[0,0,0,0,0,0,0,0,0,0],g._=0;return}if(O instanceof Z){g.data=O.data,g._=O._;return}switch(typeof O){case"number":g.data=[O|0],g._=0;break;case"string":var F=2,P=v;O.indexOf("0b")===0?O=O.substr(2):O.indexOf("0x")===0&&(O=O.substr(2),F=16,P=8),g.data=[],g._=0;var te=O.length-P,ae=O.length;do{var le=parseInt(O.slice(te>0?te:0,ae),F);if(isNaN(le))throw SyntaxError("Invalid param");if(g.data.push(le|0),te<=0)break;te-=P,ae-=P}while(1);break;default:g.data=[0];var pe=g.data;if(O instanceof Array){for(var oe=O.length-1;oe>=0;oe--){var Ve=O[oe];Ve===1/0?g._=-1:(ne(g,Ve),pe[Ve>>>w]|=1<<Ve)}break}if(Uint8Array&&O instanceof Uint8Array){var Ue=8;ne(g,O.length*Ue);for(var oe=0;oe<O.length;oe++)for(var Tn=O[oe],sn=0;sn<Ue;sn++){var Gu=oe*Ue+sn;pe[Gu>>>w]|=(Tn>>sn&1)<<Gu}break}throw SyntaxError("Invalid param")}}function Z(g){if(!(this instanceof Z))return new Z(g);k(this,g),this.data=this.data.slice()}function ne(g,O){for(var F=O>>>w,P=g.data,te=g._,ae=P.length;F>=ae;F--)P.push(te)}var _e={data:[],_:0};Z.prototype={data:[],_:0,set:function(g,O){return g|=0,ne(this,g),O===void 0||O?this.data[g>>>w]|=1<<g:this.data[g>>>w]&=~(1<<g),this},get:function(g){g|=0;var O=this.data,F=g>>>w;return F>O.length?this._&1:O[F]>>>g&1},not:function(){for(var g=this.clone(),O=g.data,F=0;F<O.length;F++)O[F]=~O[F];return g._=~g._,g},and:function(g){k(_e,g);var O=this.clone(),F=O.data,P=_e.data,te=P.length,ae=_e._,le=O._;le!==0&&ne(O,te*v-1);for(var pe=F.length,oe=Math.min(te,pe),Ve=0;Ve<oe;Ve++)F[Ve]&=P[Ve];for(;Ve<pe;Ve++)F[Ve]&=ae;return O._&=ae,O},or:function(g){k(_e,g);for(var O=this.clone(),F=O.data,P=_e.data,te=P.length-1,ae=F.length-1,le=Math.min(ae,te),pe=te;pe>le;pe--)F[pe]=P[pe];for(;pe>=0;pe--)F[pe]|=P[pe];return O._|=_e._,O},xor:function(g){k(_e,g);var O=this.clone(),F=O.data,P=_e.data,te=O._,ae=_e._,le=0,pe=F.length-1,oe=P.length-1;for(le=pe;le>oe;le--)F[le]^=ae;for(le=oe;le>pe;le--)F[le]=te^P[le];for(;le>=0;le--)F[le]^=P[le];return O._^=ae,O},andNot:function(g){return this.and(new Z(g).flip())},flip:function(g,O){if(g===void 0){for(var F=this.data,P=0;P<F.length;P++)F[P]=~F[P];this._=~this._}else if(O===void 0)ne(this,g),this.data[g>>>w]^=1<<g;else if(0<=g&&g<=O){ne(this,O);for(var P=g;P<=O;P++)this.data[P>>>w]^=1<<P}return this},clear:function(g,O){var F=this.data;if(g===void 0){for(var P=F.length-1;P>=0;P--)F[P]=0;this._=0}else if(O===void 0)g|=0,ne(this,g),F[g>>>w]&=~(1<<g);else if(g<=O){ne(this,O);for(var P=g;P<=O;P++)F[P>>>w]&=~(1<<P)}return this},slice:function(g,O){if(g===void 0)return this.clone();if(O===void 0){O=this.data.length*v;var F=Object.create(Z.prototype);F._=this._,F.data=[0];for(var P=g;P<=O;P++)F.set(P-g,this.get(P));return F}else if(g<=O&&0<=g){var F=Object.create(Z.prototype);F.data=[0];for(var P=g;P<=O;P++)F.set(P-g,this.get(P));return F}return null},setRange:function(g,O,F){for(var P=g;P<=O;P++)this.set(P,F);return this},clone:function(){var g=Object.create(Z.prototype);return g.data=this.data.slice(),g._=this._,g},toArray:Math.clz32?function(){for(var g=[],O=this.data,F=O.length-1;F>=0;F--)for(var P=O[F];P!==0;){var te=31-Math.clz32(P);P^=1<<te,g.unshift(F*v+te)}return this._!==0&&g.push(1/0),g}:function(){for(var g=[],O=this.data,F=0;F<O.length;F++)for(var P=O[F];P!==0;){var te=P&-P;P^=te,g.push(F*v+E(te-1))}return this._!==0&&g.push(1/0),g},toString:function(g){var O=this.data;if(g||(g=2),!(g&g-1)&&g<36){for(var F="",P=2+Math.log(4294967295)/Math.log(g)|0,te=O.length-1;te>=0;te--){var ae=O[te];ae<0&&(ae+=4294967296);var le=ae.toString(g);F!==""&&(F+="0".repeat(P-le.length-1)),F+=le}return this._===0?(F=F.replace(/^0+/,""),F===""&&(F="0"),F):(F="1111"+F,F.replace(/^1+/,"...1111"))}else{if(2>g||g>36)throw SyntaxError("Invalid base");for(var F=[],pe=[],te=O.length;te--;)for(var oe=v;oe--;)pe.push(O[te]>>>oe&1);do F.unshift(b(pe,g).toString(g));while(!pe.every(function(Ue){return Ue===0}));return F.join("")}},isEmpty:function(){if(this._!==0)return!1;for(var g=this.data,O=g.length-1;O>=0;O--)if(g[O]!==0)return!1;return!0},cardinality:function(){if(this._!==0)return 1/0;for(var g=0,O=this.data,F=0;F<O.length;F++){var P=O[F];P!==0&&(g+=E(P))}return g},msb:Math.clz32?function(){if(this._!==0)return 1/0;for(var g=this.data,O=g.length;O-- >0;){var F=Math.clz32(g[O]);if(F!==v)return O*v+v-1-F}return 1/0}:function(){if(this._!==0)return 1/0;for(var g=this.data,O=g.length;O-- >0;){var F=g[O],P=0;if(F){for(;(F>>>=1)>0;P++);return O*v+P}}return 1/0},ntz:function(){for(var g=this.data,O=0;O<g.length;O++){var F=g[O];if(F!==0)return F=(F^F-1)>>>1,O*v+E(F)}return 1/0},lsb:function(){for(var g=this.data,O=0;O<g.length;O++){var F=g[O],P=0;if(F){for(var te=F&-F;te>>>=1;P++);return v*O+P}}return this._&1},equals:function(g){k(_e,g);var O=this.data,F=_e.data,P=this._,te=_e._,ae=O.length-1,le=F.length-1;if(te!==P)return!1;for(var pe=ae<le?ae:le,oe=0;oe<=pe;oe++)if(O[oe]!==F[oe])return!1;for(oe=ae;oe>le;oe--)if(O[oe]!==te)return!1;for(oe=le;oe>ae;oe--)if(F[oe]!==P)return!1;return!0}},Z.fromBinaryString=function(g){return new Z("0b"+g)},Z.fromHexString=function(g){return new Z("0x"+g)},Z.Random=function(g){(g===void 0||g<0)&&(g=v);for(var O=g%v,F=[],P=Math.ceil(g/v),te=Object.create(Z.prototype),ae=0;ae<P;ae++)F.push(Math.random()*4294967296|0);return O>0&&(F[P-1]&=(1<<O)-1),te.data=F,te._=0,te},Object.defineProperty(l,"__esModule",{value:!0}),Z.default=Z,Z.BitSet=Z,f.exports=Z})(r)}),Gd=i($d);function Hd(f){return new Gd(new Uint8Array(f/8-1)).flip(0,f-1)}function Fr(f,l){return f.set(l,0)}function hi(f,l){return f.set(l,1)}function nn(f){return f.isEmpty()}function Yd(f,l){return f.cardinality()===l}function ku(f){var l=f.ntz();return l===1/0&&(l=null),l}function _o(f,l){return!f.get(l)}var Bu=function f(l,S,v,w,E){tn(this,f),this.blockSize=l,this.shrink=S,this.begin=v,this.depth=w,this.bitMap=E||Hd(l)},us=function(f){Lu(l,f);function l(S,v,w,E){return tn(this,l),Ru(this,(l.__proto__||ss(l)).call(this,S,v,w,0,E))}return An(l,[{key:"allocate",value:function(v,w,E){var b=void 0;if(v==null?b=ku(this.bitMap):b=v-this.begin,b!==null&&b<this.blockSize)if(_o(this.bitMap,b))w({counter:this.begin+b,changed:!1,bitMap:this.bitMap,tree:this});else{var k=void 0,Z=void 0;!E||E.has(this)?(k=this.bitMap,Fr(k,b),Z=this):(k=this.bitMap.clone(),Fr(k,b),Z=new l(this.blockSize,this.shrink,this.begin,k),E.add(Z)),w({counter:this.begin+b,changed:!0,bitMap:k,tree:Z})}else{var ne=new Vd(this.blockSize,this.shrink,this.begin,this.depth+1);E&&(E.add(ne),E.add(ne.bitMap)),ne.bitMapTrees[0]=this,nn(this.bitMap)&&Fr(ne.bitMap,0),ne.allocate(v,w,E)}}},{key:"deallocate",value:function(v,w,E){var b=v-this.begin;if(b>=0&&b<this.blockSize)if(_o(this.bitMap,b)){var k=void 0,Z=void 0;!E||E.has(this)?(k=this.bitMap,hi(k,b),Z=this):(k=this.bitMap.clone(),hi(k,b),Z=new l(this.blockSize,this.shrink,this.begin,k),E.add(Z)),w({exists:!0,changed:!0,bitMap:k,tree:Z})}else w({exists:!0,changed:!1,bitMap:this.bitMap,tree:this});else w({exists:!1,changed:!1,bitMap:this.bitMap,tree:this})}},{key:"check",value:function(v,w){var E=v-this.begin;E>=0&&E<this.blockSize?_o(this.bitMap,E)?w(!0):w(!1):w(null)}}]),l}(Bu),Vd=function(f){Lu(l,f);function l(S,v,w,E,b,k){tn(this,l);var Z=Ru(this,(l.__proto__||ss(l)).call(this,S,v,w,E,b));return Z.bitMapTrees=k||[],Z}return An(l,[{key:"allocate",value:function(v,w,E){var b=this,k=void 0;if(v==null?k=ku(this.bitMap):k=Math.floor((v-this.begin)/Math.pow(this.blockSize,this.depth)),k!=null&&this.bitMapTrees[k]){var Z=k;this.bitMapTrees[k].allocate(v,function(ae){var le=ae.counter,pe=ae.changed,oe=ae.bitMap,Ve=ae.tree,Ue=b.bitMap,Tn=b;if(pe){if(!E&&nn(oe))Fr(Ue,Z);else if(E&&E.has(b))nn(oe)&&(E.has(b.bitMap)||(Ue=b.bitMap.clone(),E.add(Ue),b.bitMap=Ue),Fr(Ue,Z)),Tn.bitMapTrees[Z]=Ve;else if(E){nn(oe)&&(Ue=b.bitMap.clone(),E.add(Ue),Fr(Ue,Z));var sn=b.bitMapTrees.slice();sn[Z]=Ve,Tn=new l(b.blockSize,b.shrink,b.begin,b.depth,Ue,sn),E.add(Tn)}}w({counter:le,changed:pe,bitMap:Ue,tree:Tn})},E)}else if(k===null||k>=this.blockSize){var ne=new l(this.blockSize,this.shrink,this.begin,this.depth+1);E&&(E.add(ne),E.add(ne.bitMap)),ne.bitMapTrees[0]=this,nn(this.bitMap)&&Fr(ne.bitMap,0),ne.allocate(v,w,E)}else{var _e=this.begin+k*Math.pow(this.blockSize,this.depth),g=this.depth-1,O=void 0;g===0?O=new us(this.blockSize,this.shrink,_e):O=new l(this.blockSize,this.shrink,_e,g),E&&(E.add(O),E.add(O.bitMap));var F=void 0;if(!E||E.has(this))this.bitMapTrees[k]=O,F=this;else{var P=this.bitMapTrees.slice();P[k]=O,F=new l(this.blockSize,this.shrink,this.begin,this.depth,this.bitMap,P),E.add(F)}var te=k;O.allocate(v,function(ae){var le=ae.counter,pe=ae.changed,oe=ae.bitMap,Ve=ae.tree,Ue=b.bitMap;oe&&nn(oe)&&(E&&!E.has(b.bitMap)&&(Ue=b.bitMap.clone(),E.add(Ue),F.bitMap=Ue),Fr(Ue,te)),w({counter:le,changed:pe,bitMap:Ue,tree:F})},E)}}},{key:"deallocate",value:function(v,w,E){var b=this,k=Math.floor((v-this.begin)/Math.pow(this.blockSize,this.depth));if(this.bitMapTrees[k]){var Z=nn(this.bitMapTrees[k].bitMap);this.bitMapTrees[k].deallocate(v,function(ne){var _e=ne.exists,g=ne.changed,O=ne.bitMap,F=ne.tree,P=b.bitMap,te=b;if(!_e)w({exists:_e,changed:g,bitMap:P,tree:te});else{if(g){if(!E&&Z)hi(P,k);else if(E&&E.has(b))Z&&(E.has(b.bitMap)||(P=b.bitMap.clone(),E.add(P),b.bitMap=P),hi(P,k)),te.bitMapTrees[k]=F;else if(E){Z&&(P=b.bitMap.clone(),E.add(P),hi(P,k));var ae=b.bitMapTrees.slice();ae[k]=F,te=new l(b.blockSize,b.shrink,b.begin,b.depth,P,ae),E.add(te)}b.shrink&&(F instanceof us&&Yd(O,b.blockSize)||F instanceof l&&no(F.bitMapTrees).length===0)&&delete te.bitMapTrees[k]}w({exists:!0,changed:g,bitMap:P,tree:te})}},E)}else w({exists:!1,changed:!1,bitMap:this.bitMap,tree:this})}},{key:"check",value:function(v,w){var E=Math.floor((v-this.begin)/Math.pow(this.blockSize,this.depth));this.bitMapTrees[E]?this.bitMapTrees[E].check(v,function(b){w(b)}):w(null)}}]),l}(Bu),jd=function(){function f(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,w=arguments[3];if(tn(this,f),S%32!==0)throw new RangeError("Blocksize for Counter must be a multiple of 32");this._begin=l,this._tree=w||new us(S,v,0)}return An(f,[{key:"allocate",value:function(S){if(S!=null){if(S<this._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");S=S-this._begin}var v=ai(this._tree,S),w=Rr(v,3),E=w[0],b=w[1],k=w[2];return this._tree=k,S==null?E+this._begin:b}},{key:"deallocate",value:function(S){var v=oi(this._tree,S-this._begin),w=Rr(v,2),E=w[0],b=w[1];return this._tree=b,E}},{key:"check",value:function(S){return ci(this._tree,S-this._begin)}}]),f}(),Uu=function(f,l,S){for(var v in l)S&&f[v]?f[v]=l[v]:Zt(f,v,l[v]);return f},po=function(f,l,S,v){if(!(f instanceof l)||v!==void 0&&v in f)throw TypeError(S+": incorrect invocation!");return f},zd=function(f,l,S,v){try{return v?l(ue(S)[0],S[1]):l(S)}catch(E){var w=f.return;throw w!==void 0&&ue(w.call(f)),E}},Kd=Ze("iterator"),Xd=Array.prototype,qd=function(f){return f!==void 0&&(o.Array===f||Xd[Kd]===f)},Pu=s(function(f){var l={},S={},v=f.exports=function(w,E,b,k,Z){var ne=Z?function(){return w}:ts(w),_e=ee(b,k,E?2:1),g=0,O,F,P,te;if(typeof ne!="function")throw TypeError(w+" is not iterable!");if(qd(ne)){for(O=Zn(w.length);O>g;g++)if(te=E?_e(ue(F=w[g])[0],F[1]):_e(w[g]),te===l||te===S)return te}else for(P=ne.call(w);!(F=P.next()).done;)if(te=zd(P,_e,F.value,E),te===l||te===S)return te};v.BREAK=l,v.RETURN=S}),Jd=Ze("species"),Qd=function(f){var l;return j(f)&&(l=f.constructor,typeof l=="function"&&(l===Array||j(l.prototype))&&(l=void 0),q(l)&&(l=l[Jd],l===null&&(l=void 0))),l===void 0?Array:l},Zd=function(f,l){return new(Qd(f))(l)},So=function(f,l){var S=f==1,v=f==2,w=f==3,E=f==4,b=f==6,k=f==5||b,Z=l||Zd;return function(ne,_e,g){for(var O=Zr(ne),F=d(O),P=ee(_e,g,3),te=Zn(F.length),ae=0,le=S?Z(ne,te):v?Z(ne,0):void 0,pe,oe;te>ae;ae++)if((k||ae in F)&&(pe=F[ae],oe=P(pe,ae,O),f)){if(S)le[ae]=oe;else if(oe)switch(f){case 3:return!0;case 5:return pe;case 6:return ae;case 2:le.push(pe)}else if(E)return!1}return b?-1:w||E?E:le}},go=er.getWeak,eh=So(5),th=So(6),rh=0,fs=function(f){return f._l||(f._l=new Mu)},Mu=function(){this.a=[]},vo=function(f,l){return eh(f.a,function(S){return S[0]===l})};Mu.prototype={get:function(f){var l=vo(this,f);if(l)return l[1]},has:function(f){return!!vo(this,f)},set:function(f,l){var S=vo(this,f);S?S[1]=l:this.a.push([f,l])},delete:function(f){var l=th(this.a,function(S){return S[0]===f});return~l&&this.a.splice(l,1),!!~l}};var $u={getConstructor:function(f,l,S,v){var w=f(function(E,b){po(E,w,l,"_i"),E._i=rh++,E._l=void 0,b!=null&&Pu(b,S,E[v],E)});return Uu(w.prototype,{delete:function(E){if(!q(E))return!1;var b=go(E);return b===!0?fs(this).delete(E):b&&we(b,this._i)&&delete b[this._i]},has:function(b){if(!q(b))return!1;var k=go(b);return k===!0?fs(this).has(b):k&&we(k,this._i)}}),w},def:function(f,l,S){var v=go(ue(l),!0);return v===!0?fs(f).set(l,S):v[f._i]=S,f},ufstore:fs},nh=Dt.f,ih=So(0),sh=function(f,l,S,v,w,E){var b=T[f],k=b,Z=w?"set":"add",ne=k&&k.prototype,_e={};return!Oe||typeof k!="function"||!(E||ne.forEach&&!Ee(function(){new k().entries().next()}))?(k=v.getConstructor(l,f,w,Z),Uu(k.prototype,S),er.NEED=!0):(k=l(function(g,O){po(g,k,f,"_c"),g._c=new b,O!=null&&Pu(O,w,g[Z],g)}),ih("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(g){var O=g=="add"||g=="set";g in ne&&!(E&&g=="clear")&&Zt(k.prototype,g,function(F,P){if(po(this,k,g),!O&&E&&!q(F))return g=="get"?void 0:!1;var te=this._c[g](F===0?0:F,P);return O?this:te})}),"size"in ne&&nh(k.prototype,"size",{get:function(){return this._c.size}})),lr(k,f),_e[f]=k,Ie(Ie.G+Ie.W+Ie.F,_e),E||v.setStrong(k,f,w),k};sh("WeakSet",function(f){return function(){return f(this,arguments.length>0?arguments[0]:void 0)}},{add:function(l){return $u.def(this,l,!0)}},$u,!1,!0);var ah=R.WeakSet,oh=s(function(f){f.exports={default:ah,__esModule:!0}}),mo=i(oh),ch=function(){function f(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,w=arguments[3];if(tn(this,f),S%32!==0)throw new RangeError("Blocksize for Counter must be a multiple of 32");this._begin=l,this._blockSize=S,this._shrink=v,this._tree=w||new us(S,v,0)}return An(f,[{key:"allocate",value:function(S){if(S!=null){if(S<this._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");S=S-this._begin}var v=ai(this._tree,S,new mo),w=Rr(v,3),E=w[0],b=w[1],k=w[2],Z=void 0;return b?Z=new f(this._begin,this._blockSize,this._shrink,k):Z=this,S==null?[E+this._begin,Z]:[b,Z]}},{key:"deallocate",value:function(S){var v=oi(this._tree,S-this._begin,new mo),w=Rr(v,2),E=w[0],b=w[1],k=void 0;return E?k=new f(this._begin,this._blockSize,this._shrink,b):k=this,[E,k]}},{key:"check",value:function(S){return ci(this._tree,S-this._begin)}},{key:"transaction",value:function(S){var v=this,w=new mo,E=this._tree,b=!1,k={allocate:function(ne){if(ne!=null){if(ne<v._begin)throw new RangeError("counter needs to be greater or equal to the beginning offset");ne=ne-v._begin}var _e=ai(E,ne,w),g=Rr(_e,3),O=g[0],F=g[1],P=g[2];return b=F,E=P,ne==null?O+v._begin:b},deallocate:function(ne){var _e=oi(E,ne-v._begin,w),g=Rr(_e,2),O=g[0],F=g[1];return b=O,E=F,b},check:function(ne){return ci(E,ne-v._begin)}};return S(k),b?new f(this._begin,this._blockSize,this._shrink,E):this}}]),f}();t.default=jd,t.CounterImmutable=ch,Object.defineProperty(t,"__esModule",{value:!0})})}),Ys=Re(pp),Sp=12,Vs=20,rd=Math.pow(2,Sp)-1,nd=Math.pow(2,Vs)-1,pc=0,Sc=0,kn=function(n){qr(e,n);function e(t,r){ut(this,e);var i=Xr(this,(e.__proto__||xe(e)).call(this,r));return i.code=t,i}return e}(Error);Object.defineProperty(kn,"ERROR_RANGE",{value:1});Object.defineProperty(kn,"ERROR_CONFLICT",{value:2});var ia=function(){function n(){ut(this,n),this._chrCounterMaj=new Ys(pc),this._chrDevices=new Ri}return vt(n,[{key:"getChr",value:function(t,r){var i=this._chrDevices.get(t);if(i){var s=Et(i,1),a=s[0];return a.get(r)}}},{key:"registerChr",value:function(t,r,i){var s=void 0,a=void 0,o=void 0,c=void 0;try{if(r===void 0)r=this._chrCounterMaj.allocate(),s=r;else{var u=this._chrDevices.get(r);if(!u)this._chrCounterMaj.allocate(r),s=r;else{var d=Et(u,2);c=d[0],o=d[1]}}if((!c||!o)&&(o=new Ys(Sc),c=new Ri),i===void 0)i=o.allocate(),a=i;else if(!c.has(i))o.allocate(i),a=i;else throw new kn(kn.ERROR_CONFLICT);if(r>rd||r<pc||i>nd||i<Sc)throw new kn(kn.ERROR_RANGE);c.set(i,t),this._chrDevices.set(r,[c,o]);return}catch(h){throw s!=null&&this._chrCounterMaj.deallocate(s),a!=null&&o&&o.deallocate(a),h}}},{key:"deregisterChr",value:function(t,r){var i=this._chrDevices.get(t);if(i){var s=Et(i,2),a=s[0],o=s[1];a.delete(r)&&o.deallocate(r),a.size||(this._chrDevices.delete(t),this._chrCounterMaj.deallocate(t))}}}]),n}();function br(n,e){return n<<Vs|e}function sa(n){var e=n>>Vs,t=n&(1<<Vs)-1;return[e,t]}var Ko=Mt.getWeak,gp=na(5),vp=na(6),mp=0,xs=function(n){return n._l||(n._l=new id)},id=function(){this.a=[]},Xo=function(n,e){return gp(n.a,function(t){return t[0]===e})};id.prototype={get:function(n){var e=Xo(this,n);if(e)return e[1]},has:function(n){return!!Xo(this,n)},set:function(n,e){var t=Xo(this,n);t?t[1]=e:this.a.push([n,e])},delete:function(n){var e=vp(this.a,function(t){return t[0]===n});return~e&&this.a.splice(e,1),!!~e}};var Ws={getConstructor:function(n,e,t,r){var i=n(function(s,a){Hs(s,i,e,"_i"),s._t=e,s._i=mp++,s._l=void 0,a!=null&&Mn(a,t,s[r],s)});return Uc(i.prototype,{delete:function(s){if(!qe(s))return!1;var a=Ko(s);return a===!0?xs(Rt(this,e)).delete(s):a&&be(a,this._i)&&delete a[this._i]},has:function(a){if(!qe(a))return!1;var o=Ko(a);return o===!0?xs(Rt(this,e)).has(a):o&&be(o,this._i)}}),i},def:function(n,e,t){var r=Ko(Ft(e),!0);return r===!0?xs(n).set(e,t):r[n._i]=t,n},ufstore:xs},Rv=ve(function(n){var e=na(0),t=Rt,r=!ze.ActiveXObject&&"ActiveXObject"in ze,i="WeakMap",s=Mt.getWeak,a=Object.isExtensible,o=Ws.ufstore,c,u=function(_){return function(){return _(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(y){if(qe(y)){var T=s(y);return T===!0?o(Rt(this,i)).get(y):T?T[this._i]:void 0}},set:function(y,T){return Ws.def(Rt(this,i),y,T)}},h=n.exports=ql(i,u,d,Ws,!0,!0);t&&r&&(c=Ws.getConstructor(u,i),Fl(c.prototype,d),Mt.NEED=!0,e(["delete","has","get","set"],function(_){var y=h.prototype,T=y[_];Ps(y,_,function(R,X){if(qe(R)&&!a(R)){this._f||(this._f=new c);var V=this._f[_](R,X);return _=="set"?this:V}return T.call(this,R,X)})}))});Jl("WeakMap");Ql("WeakMap");var yp=We.WeakMap,Ep=ve(function(n){n.exports={default:yp,__esModule:!0}}),Ip=Re(Ep);ce(ce.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}});var wp=We.Math.log2,Ap=ve(function(n){n.exports={default:wp,__esModule:!0}}),bp=Re(Ap);function js(n,e){if(n.maxByteLength<e){var t=1<<Math.ceil(bp(e)),r=new ArrayBuffer(e,{maxByteLength:t}),i=new Uint8Array(n),s=new Uint8Array(r);return s.set(i),r}return n.byteLength<e&&n.resize(e),n}function gc(n,e){var t=n.byteLength+e.byteLength,r=n;n.maxByteLength<t&&(newBuf=js(n,t),newBuf.set(e,n.byteLength),r=newBuf);var i=new Uint8Array(r),s=new Uint8Array(e);return i.set(s,n.byteLength),newBuf}function Mf(n){var e=new ArrayBuffer(n.byteLength,{maxByteLength:n.maxByteLength}),t=new Uint8Array(n),r=new Uint8Array(e);return r.set(t,n.byteLength),e}var aa=function(){function n(e,t){ut(this,n);var r=new Date;this._metadata=new Bs(Nn({},e,{mode:e.mode,nlink:e.nlink||0,atime:r,mtime:r,ctime:r,birthtime:r})),this._iNodeMgr=t}return vt(n,[{key:"getMetadata",value:function(){return this._metadata}}]),n}(),It=function(n){qr(e,n);function e(t,r){ut(this,e);var i=Xr(this,(e.__proto__||xe(e)).call(this,{ino:t.ino,uid:t.uid,gid:t.gid,mode:W.S_IFREG|t.mode&~W.S_IFMT,size:t.data?t.data.byteLength:0},r));return i._data=t.data?t.data:new ArrayBuffer(0),i}return vt(e,[{key:"getData",value:function(){return this._data}},{key:"setData",value:function(r){this._data=r}},{key:"read",value:function(){}},{key:"write",value:function(r,i,s){var a=this._data,o=void 0;if(s)a=gc(a,r),o=r.byteLength;else{i=a.byteLength<i?a.byteLength:i;var c=a.byteLength-i,u=r.byteLength-c;u>0&&(a=js(a,a.byteLength+u)),o=r.byteLength;var d=new Uint8Array(a);d.set(new Uint8Array(r),i)}return this._data=a,this._metadata.size=this._data.byteLength,o}},{key:"destructor",value:function(){}}]),e}(aa),Ne=function(n){qr(e,n);function e(t,r){ut(this,e),t.parent===void 0&&(t.parent=t.ino);var i=void 0;t.parent===t.ino?i=2:(i=1,r.linkINode(r.getINode(t.parent)));var s=Xr(this,(e.__proto__||xe(e)).call(this,{ino:t.ino,mode:W.S_IFDIR|t.mode&~W.S_IFMT,uid:t.uid,gid:t.gid,nlink:i,size:4096},r));return s._dir=new Ri([[".",t.ino],["..",t.parent]]),s}return vt(e,[{key:"getEntries",value:function(){return this._metadata.atime=new Date,this._dir.entries()}},{key:"getEntryIndex",value:function(r){return this._dir.get(r)}},{key:"getEntry",value:function(r){var i=this._dir.get(r);if(i!==void 0)return this._iNodeMgr.getINode(i)}},{key:"addEntry",value:function(r,i){if(r==="."||r==="..")throw new Error("Not allowed to add `.` or `..` entries");var s=new Date;this._metadata.mtime=s,this._metadata.ctime=s,this._iNodeMgr.linkINode(this._iNodeMgr.getINode(i)),this._dir.set(r,i)}},{key:"deleteEntry",value:function(r){if(r==="."||r==="..")throw new Error("Not allowed to delete `.` or `..` entries");var i=this._dir.get(r);if(i!==void 0){var s=new Date;this._metadata.mtime=s,this._metadata.ctime=s,this._dir.delete(r),this._iNodeMgr.unlinkINode(this._iNodeMgr.getINode(i))}}},{key:"renameEntry",value:function(r,i){if(r==="."||r===".."||i==="."||r==="..")throw new Error("Not allowed to rename `.` or `..` entries");var s=this._dir.get(r);if(s!=null){var a=new Date;this._metadata.mtime=a,this._metadata.ctime=a,this._dir.delete(r),this._dir.set(i,s)}}},{key:"destructor",value:function(){if(this._dir.get(".")!==this._dir.get("..")){var r=this._dir.get("..");r!=null&&this._iNodeMgr.unlinkINode(this._iNodeMgr.getINode(r))}}}]),e}(aa),Un=function(n){qr(e,n);function e(t,r){ut(this,e);var i=Xr(this,(e.__proto__||xe(e)).call(this,{ino:t.ino,mode:W.S_IFLNK|t.mode&~W.S_IFMT,uid:t.uid,gid:t.gid,size:new TextEncoder().encode(t.link).byteLength},r));return i._link=t.link,i}return vt(e,[{key:"getLink",value:function(){return this._link}},{key:"destructor",value:function(){}}]),e}(aa),Jt=function(n){qr(e,n);function e(t,r){ut(this,e);var i=Xr(this,(e.__proto__||xe(e)).call(this,{ino:t.ino,mode:W.S_IFCHR|t.mode&~W.S_IFMT,uid:t.uid,gid:t.gid,rdev:t.rdev,size:0},r));return i.teardown=t.teardown,i}return vt(e,[{key:"getFileDesOps",value:function(){var r=sa(this.getMetadata().rdev),i=Et(r,2),s=i[0],a=i[1];return this._iNodeMgr._devMgr.getChr(s,a)}},{key:"destructor",value:function(){this.teardown!==void 0&&this.teardown()}}]),e}(aa),Pc=function(){function n(e){ut(this,n),this._counter=new Ys(1),this._iNodes=new Ri,this._iNodeRefs=new Ip,this._devMgr=e}return vt(n,[{key:"createINode",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.ino=this._counter.allocate(),r.mode=typeof r.mode=="number"?r.mode:0,r.uid=typeof r.uid=="number"?r.uid:nr,r.gid=typeof r.gid=="number"?r.gid:_c;var i=new t(r,this);return this._iNodes.set(r.ino,i),this._iNodeRefs.set(i,0),[i,r.ino]}},{key:"getINode",value:function(t){return this._iNodes.get(t)}},{key:"linkINode",value:function(t){t&&++t.getMetadata().nlink}},{key:"unlinkINode",value:function(t){t&&(--t.getMetadata().nlink,this._gcINode(t))}},{key:"refINode",value:function(t){if(t){var r=this._iNodeRefs.get(t);r!==void 0&&this._iNodeRefs.set(t,r+1)}}},{key:"unrefINode",value:function(t){if(t){var r=this._iNodeRefs.get(t);r!==void 0&&(this._iNodeRefs.set(t,r-1),this._gcINode(t))}}},{key:"_gcINode",value:function(t){var r=t.getMetadata(),i=r.nlink+this._iNodeRefs.get(t);if(i===0||i===1&&t instanceof Ne){var s=r.ino;t.destructor(),this._iNodes.delete(s),this._counter.deallocate(s)}}}]),n}(),Tp=ve(function(n){(function(e,t,r){n.exports?n.exports=r():t[e]=r()})("prr",_n,function(){var e=typeof Object.defineProperty=="function"?function(i,s,a){return Object.defineProperty(i,s,a),i}:function(i,s,a){return i[s]=a.value,i},t=function(i,s){var a=typeof s=="object",o=!a&&typeof s=="string",c=function(u){return a?!!s[u]:o?s.indexOf(u[0])>-1:!1};return{enumerable:c("enumerable"),configurable:c("configurable"),writable:c("writable"),value:i}},r=function(i,s,a,o){var c;if(o=t(a,o),typeof s=="object"){for(c in s)Object.hasOwnProperty.call(s,c)&&(o.value=s[c],e(i,c,o));return i}return e(i,s,o)};return r})});function sd(n,e,t){e&&typeof e!="string"&&(e=e.message||e.name),Tp(this,{type:n,name:n,cause:typeof e!="string"?e:t,message:e},"ewr")}function Mc(n,e){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),sd.call(this,"CustomError",n,e)}Mc.prototype=new Error;function Cp(n,e,t){var r=function(i,s){sd.call(this,e,i,s),e=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(n.errno[this.cause.errno]?n.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,r)};return r.prototype=t?new t:new Mc,r}var Op=function(n){var e=function(t,r){return Cp(n,t,r)};return{CustomError:Mc,FilesystemError:e("FilesystemError"),createError:e}},ki=ve(function(n){var e=n.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];n.exports.errno={},n.exports.code={},e.forEach(function(t){n.exports.errno[t.errno]=t,n.exports.code[t.code]=t}),n.exports.custom=Op(n.exports),n.exports.create=n.exports.custom.createError}),Fv=ki.all,Dv=ki.errno,B=ki.code,Nv=ki.custom,Lv=ki.create,L=function(n){qr(e,n);function e(t,r,i,s){ut(this,e);var a=t.code+": "+t.description;r!=null&&(a+=", "+r,i!=null&&(a+=" -> "+i));var o=Xr(this,(e.__proto__||xe(e)).call(this,a));return o.errno=t.errno,o.code=t.code,o.errnoDescription=t.description,s!=null&&(o.syscall=s),o}return vt(e,[{key:"setPaths",value:function(r,i){var s=this.code+": "+this.errnoDescription+", "+r;i!=null&&(s+=" -> "+i),this.message=s}},{key:"setSyscall",value:function(r){this.syscall=r}}]),e}(Error),xp=function(){function n(e,t){ut(this,n),this._iNode=e,this._flags=t,this._pos=0}return vt(n,[{key:"getINode",value:function(){return this._iNode}},{key:"getFlags",value:function(){return this._flags}},{key:"setFlags",value:function(t){this._flags=t}},{key:"getPos",value:function(){return this._pos}},{key:"setPos",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W.SEEK_SET,i=this.getINode(),s=void 0;switch(!0){case i instanceof It:case i instanceof Ne:switch(r){case W.SEEK_SET:s=t;break;case W.SEEK_CUR:s=this._pos+t;break;case W.SEEK_END:s=i.getData().length+t;break;default:s=this._pos}if(s<0)throw new L(B.EINVAL);this._pos=s;break;case i instanceof Jt:var a=i.getFileDesOps();if(a)if(a.setPos)a.setPos(this,t,r);else throw new L(B.ESPIPE);else throw new L(B.ENXIO);break;default:throw new L(B.ESPIPE)}}},{key:"read",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=void 0;r===null?i=this._pos:i=r;var s=this._iNode,a=void 0;switch(!0){case s instanceof It:var o=s.getData(),c=s.getMetadata();a=o.copy(t,0,i),c.atime=new Date;break;case s instanceof Jt:var u=s.getFileDesOps();if(u)if(u.read)a=u.read(this,t,i);else throw new L(B.EINVAL);else throw new L(B.ENXIO);break;default:throw new L(B.EINVAL)}return r===null&&(this._pos=i+a),a}},{key:"write",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=void 0;r===null?s=this._pos:s=r;var a=this._iNode,o=void 0;switch(!0){case a instanceof It:var c=a.getData(),u=a.getMetadata();if((this.getFlags()|i)&W.O_APPEND)s=c.length,c=$.concat([c,t]),o=t.length;else{if(s>c.length)c=$.concat([c,$.alloc(s-c.length),$.allocUnsafe(t.length)]);else if(s<=c.length){var d=c.length-s,h=t.length-d;h>0&&(c=$.concat([c,$.allocUnsafe(h)]))}o=t.copy(c,s)}a.setData(c);var _=new Date;u.mtime=_,u.ctime=_,u.size=c.length;break;case a instanceof Jt:var y=a.getFileDesOps();if(y)if(y.write)o=y.write(this,t,s,i);else throw new L(B.EINVAL);else throw new L(B.ENXIO);break;default:throw new L(B.EINVAL)}return r===null&&(this._pos=s+o),o}}]),n}(),$c=function(){function n(e){ut(this,n),this._counter=new Ys(0),this._fds=new Ri,this._iNodeMgr=e}return vt(n,[{key:"createFd",value:function(t,r){this._iNodeMgr.refINode(t);var i=this._counter.allocate(),s=new xp(t,r);if(t instanceof Jt){var a=t.getFileDesOps();if(a)a.open&&a.open(s);else throw new L(B.ENXIO)}return this._fds.set(i,s),[s,i]}},{key:"getFd",value:function(t){return this._fds.get(t)}},{key:"dupFd",value:function(t){var r=this._fds.get(t);if(r){this._iNodeMgr.refINode(r.getINode());var i=this._counter.allocate();return this._fds.set(i,r),t}}},{key:"deleteFd",value:function(t){var r=this._fds.get(t);if(r){var i=r.getINode();if(i instanceof Jt){var s=i.getFileDesOps();if(s)s.close&&s.close(r);else throw new L(B.ENXIO)}this._fds.delete(t),this._counter.deallocate(t),this._iNodeMgr.unrefINode(i)}}}]),n}(),Wp=ta.f;kc("getOwnPropertyDescriptor",function(){return function(e,t){return Wp(or(e),t)}});var Rp=We.Object,Fp=function(e,t){return Rp.getOwnPropertyDescriptor(e,t)},ad=ve(function(n){n.exports={default:Fp,__esModule:!0}});Re(ad);var Dp=ve(function(n,e){e.__esModule=!0;var t=i(Zl),r=i(ad);function i(s){return s&&s.__esModule?s:{default:s}}e.default=function s(a,o,c){a===null&&(a=Function.prototype);var u=(0,r.default)(a,o);if(u===void 0){var d=(0,t.default)(a);return d===null?void 0:s(d,o,c)}else{if("value"in u)return u.value;var h=u.get;return h===void 0?void 0:h.call(c)}}}),tt=Re(Dp),qo;function Vr(){}Vr.prototype=Object.create(null);function ye(){ye.init.call(this)}ye.EventEmitter=ye;ye.usingDomains=!1;ye.prototype.domain=void 0;ye.prototype._events=void 0;ye.prototype._maxListeners=void 0;ye.defaultMaxListeners=10;ye.init=function(){this.domain=null,ye.usingDomains&&qo.active&&!(this instanceof qo.Domain)&&(this.domain=qo.active),(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Vr,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function od(n){return n._maxListeners===void 0?ye.defaultMaxListeners:n._maxListeners}ye.prototype.getMaxListeners=function(){return od(this)};function Np(n,e,t){if(e)n.call(t);else for(var r=n.length,i=Bi(n,r),s=0;s<r;++s)i[s].call(t)}function Lp(n,e,t,r){if(e)n.call(t,r);else for(var i=n.length,s=Bi(n,i),a=0;a<i;++a)s[a].call(t,r)}function kp(n,e,t,r,i){if(e)n.call(t,r,i);else for(var s=n.length,a=Bi(n,s),o=0;o<s;++o)a[o].call(t,r,i)}function Bp(n,e,t,r,i,s){if(e)n.call(t,r,i,s);else for(var a=n.length,o=Bi(n,a),c=0;c<a;++c)o[c].call(t,r,i,s)}function Up(n,e,t,r){if(e)n.apply(t,r);else for(var i=n.length,s=Bi(n,i),a=0;a<i;++a)s[a].apply(t,r)}ye.prototype.emit=function(e){var t,r,i,s,a,o,c,u=!1,d=e==="error";if(o=this._events,o)d=d&&o.error==null;else if(!d)return!1;if(c=this.domain,d){if(t=arguments[1],c)t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=c,t.domainThrown=!1,c.emit("error",t);else{if(t instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}return!1}if(r=o[e],!r)return!1;var _=typeof r=="function";switch(i=arguments.length,i){case 1:Np(r,_,this);break;case 2:Lp(r,_,this,arguments[1]);break;case 3:kp(r,_,this,arguments[1],arguments[2]);break;case 4:Bp(r,_,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),a=1;a<i;a++)s[a-1]=arguments[a];Up(r,_,this,s)}return u&&c.exit(),!0};function cd(n,e,t,r){var i,s,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(s=n._events,s?(s.newListener&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),a=s[e]):(s=n._events=new Vr,n._eventsCount=0),!a)a=s[e]=t,++n._eventsCount;else if(typeof a=="function"?a=s[e]=r?[t,a]:[a,t]:r?a.unshift(t):a.push(t),!a.warned&&(i=od(n),i&&i>0&&a.length>i)){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=n,o.type=e,o.count=a.length,Pp(o)}return n}function Pp(n){typeof console.warn=="function"?console.warn(n):console.log(n)}ye.prototype.addListener=function(e,t){return cd(this,e,t,!1)};ye.prototype.on=ye.prototype.addListener;ye.prototype.prependListener=function(e,t){return cd(this,e,t,!0)};function ud(n,e,t){var r=!1;function i(){n.removeListener(e,i),r||(r=!0,t.apply(n,arguments))}return i.listener=t,i}ye.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,ud(this,e,t)),this};ye.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,ud(this,e,t)),this};ye.prototype.removeListener=function(e,t){var r,i,s,a,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(r=i[e],!r)return this;if(r===t||r.listener&&r.listener===t)--this._eventsCount===0?this._events=new Vr:(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=r[a].listener,s=a;break}if(s<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount===0)return this._events=new Vr,this;delete i[e]}else Mp(r,s);i.removeListener&&this.emit("removeListener",e,o||t)}return this};ye.prototype.removeAllListeners=function(e){var t,r;if(r=this._events,!r)return this;if(!r.removeListener)return arguments.length===0?(this._events=new Vr,this._eventsCount=0):r[e]&&(--this._eventsCount===0?this._events=new Vr:delete r[e]),this;if(arguments.length===0){for(var i=Object.keys(r),s=0,a;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new Vr,this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this};ye.prototype.listeners=function(e){var t,r,i=this._events;return i?(t=i[e],t?typeof t=="function"?r=[t.listener||t]:r=$p(t):r=[]):r=[],r};ye.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):fd.call(n,e)};ye.prototype.listenerCount=fd;function fd(n){var e=this._events;if(e){var t=e[n];if(typeof t=="function")return 1;if(t)return t.length}return 0}ye.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Mp(n,e){for(var t=e,r=t+1,i=n.length;r<i;t+=1,r+=1)n[t]=n[r];n.pop()}function Bi(n,e){for(var t=new Array(e);e--;)t[e]=n[e];return t}function $p(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}var vc;typeof Object.create=="function"?vc=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:vc=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var Vn=vc,Gp=/%[sdj%]/g;function Hp(n){if(!Hc(n)){for(var e=[],t=0;t<arguments.length;t++)e.push(jr(arguments[t]));return e.join(" ")}for(var t=1,r=arguments,i=r.length,s=String(n).replace(Gp,function(o){if(o==="%%")return"%";if(t>=i)return o;switch(o){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch{return"[Circular]"}default:return o}}),a=r[t];t<i;a=r[++t])Gc(a)||!Ui(a)?s+=" "+a:s+=" "+jr(a);return s}function ld(n,e){if(Hr(Pn.process))return function(){return ld(n,e).apply(this,arguments)};if(ks.noDeprecation===!0)return n;var t=!1;function r(){if(!t){if(ks.throwDeprecation)throw new Error(e);ks.traceDeprecation?console.trace(e):console.error(e),t=!0}return n.apply(this,arguments)}return r}var Rs={},Jo;function Yp(n){if(Hr(Jo)&&(Jo=ks.env.NODE_DEBUG||""),n=n.toUpperCase(),!Rs[n])if(new RegExp("\\b"+n+"\\b","i").test(Jo)){var e=0;Rs[n]=function(){var t=Hp.apply(null,arguments);console.error("%s %d: %s",n,e,t)}}else Rs[n]=function(){};return Rs[n]}function jr(n,e){var t={seen:[],stylize:jp};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),dd(e)?t.showHidden=e:e&&Zp(t,e),Hr(t.showHidden)&&(t.showHidden=!1),Hr(t.depth)&&(t.depth=2),Hr(t.colors)&&(t.colors=!1),Hr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=Vp),zs(t,n,t.depth)}jr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};jr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Vp(n,e){var t=jr.styles[e];return t?"\x1B["+jr.colors[t][0]+"m"+n+"\x1B["+jr.colors[t][1]+"m":n}function jp(n,e){return n}function zp(n){var e={};return n.forEach(function(t,r){e[t]=!0}),e}function zs(n,e,t){if(n.customInspect&&e&&tc(e.inspect)&&e.inspect!==jr&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(t,n);return Hc(r)||(r=zs(n,r,t)),r}var i=Kp(n,e);if(i)return i;var s=Object.keys(e),a=zp(s);if(n.showHidden&&(s=Object.getOwnPropertyNames(e)),ec(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Qo(e);if(s.length===0){if(tc(e)){var o=e.name?": "+e.name:"";return n.stylize("[Function"+o+"]","special")}if(Zo(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if($f(e))return n.stylize(Date.prototype.toString.call(e),"date");if(ec(e))return Qo(e)}var c="",u=!1,d=["{","}"];if(Jp(e)&&(u=!0,d=["[","]"]),tc(e)){var h=e.name?": "+e.name:"";c=" [Function"+h+"]"}if(Zo(e)&&(c=" "+RegExp.prototype.toString.call(e)),$f(e)&&(c=" "+Date.prototype.toUTCString.call(e)),ec(e)&&(c=" "+Qo(e)),s.length===0&&(!u||e.length==0))return d[0]+c+d[1];if(t<0)return Zo(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special");n.seen.push(e);var _;return u?_=Xp(n,e,t,a,s):_=s.map(function(y){return mc(n,e,t,a,y,u)}),n.seen.pop(),qp(_,c,d)}function Kp(n,e){if(Hr(e))return n.stylize("undefined","undefined");if(Hc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,"string")}if(Qp(e))return n.stylize(""+e,"number");if(dd(e))return n.stylize(""+e,"boolean");if(Gc(e))return n.stylize("null","null")}function Qo(n){return"["+Error.prototype.toString.call(n)+"]"}function Xp(n,e,t,r,i){for(var s=[],a=0,o=e.length;a<o;++a)hd(e,String(a))?s.push(mc(n,e,t,r,String(a),!0)):s.push("");return i.forEach(function(c){c.match(/^\d+$/)||s.push(mc(n,e,t,r,c,!0))}),s}function mc(n,e,t,r,i,s){var a,o,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?c.set?o=n.stylize("[Getter/Setter]","special"):o=n.stylize("[Getter]","special"):c.set&&(o=n.stylize("[Setter]","special")),hd(r,i)||(a="["+i+"]"),o||(n.seen.indexOf(c.value)<0?(Gc(t)?o=zs(n,c.value,null):o=zs(n,c.value,t-1),o.indexOf(`
`)>-1&&(s?o=o.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):o=`
`+o.split(`
`).map(function(u){return"   "+u}).join(`
`))):o=n.stylize("[Circular]","special")),Hr(a)){if(s&&i.match(/^\d+$/))return o;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+o}function qp(n,e,t){var r=0,i=n.reduce(function(s,a){return r++,a.indexOf(`
`)>=0&&r++,s+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+n.join(`,
  `)+" "+t[1]:t[0]+e+" "+n.join(", ")+" "+t[1]}function Jp(n){return Array.isArray(n)}function dd(n){return typeof n=="boolean"}function Gc(n){return n===null}function Qp(n){return typeof n=="number"}function Hc(n){return typeof n=="string"}function Hr(n){return n===void 0}function Zo(n){return Ui(n)&&Yc(n)==="[object RegExp]"}function Ui(n){return typeof n=="object"&&n!==null}function $f(n){return Ui(n)&&Yc(n)==="[object Date]"}function ec(n){return Ui(n)&&(Yc(n)==="[object Error]"||n instanceof Error)}function tc(n){return typeof n=="function"}function Yc(n){return Object.prototype.toString.call(n)}function Zp(n,e){if(!e||!Ui(e))return n;for(var t=Object.keys(e),r=t.length;r--;)n[t[r]]=e[t[r]];return n}function hd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function gn(){this.head=null,this.tail=null,this.length=0}gn.prototype.push=function(n){var e={data:n,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};gn.prototype.unshift=function(n){var e={data:n,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};gn.prototype.shift=function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}};gn.prototype.clear=function(){this.head=this.tail=null,this.length=0};gn.prototype.join=function(n){if(this.length===0)return"";for(var e=this.head,t=""+e.data;e=e.next;)t+=n+e.data;return t};gn.prototype.concat=function(n){if(this.length===0)return $.alloc(0);if(this.length===1)return this.head.data;for(var e=$.allocUnsafe(n>>>0),t=this.head,r=0;t;)t.data.copy(e,r),r+=t.data.length,t=t.next;return e};var eS=$.isEncoding||function(n){switch(n&&n.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function tS(n){if(n&&!eS(n))throw new Error("Unknown encoding: "+n)}function Pi(n){switch(this.encoding=(n||"utf8").toLowerCase().replace(/[-_]/,""),tS(n),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=nS;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=iS;break;default:this.write=rS;return}this.charBuffer=new $(6),this.charReceived=0,this.charLength=0}Pi.prototype.write=function(n){for(var e="";this.charLength;){var t=n.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:n.length;if(n.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";n=n.slice(t,n.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=e.charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,n.length===0)return e;break}this.detectIncompleteChar(n);var r=n.length;this.charLength&&(n.copy(this.charBuffer,0,n.length-this.charReceived,r),r-=this.charReceived),e+=n.toString(this.encoding,0,r);var r=e.length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),n.copy(this.charBuffer,0,0,s),e.substring(0,r)}return e};Pi.prototype.detectIncompleteChar=function(n){for(var e=n.length>=3?3:n.length;e>0;e--){var t=n[n.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};Pi.prototype.end=function(n){var e="";if(n&&n.length&&(e=this.write(n)),this.charReceived){var t=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,t).toString(i)}return e};function rS(n){return n.toString(this.encoding)}function nS(n){this.charReceived=n.length%2,this.charLength=this.charReceived?2:0}function iS(n){this.charReceived=n.length%3,this.charLength=this.charReceived?3:0}ke.ReadableState=_d;var Ae=Yp("stream");Vn(ke,ye);function sS(n,e,t){if(typeof n.prependListener=="function")return n.prependListener(e,t);!n._events||!n._events[e]?n.on(e,t):Array.isArray(n._events[e])?n._events[e].unshift(t):n._events[e]=[t,n._events[e]]}function aS(n,e){return n.listeners(e).length}function _d(n,e){n=n||{},this.objectMode=!!n.objectMode,e instanceof $t&&(this.objectMode=this.objectMode||!!n.readableObjectMode);var t=n.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new gn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(this.decoder=new Pi(n.encoding),this.encoding=n.encoding)}function ke(n){if(!(this instanceof ke))return new ke(n);this._readableState=new _d(n,this),this.readable=!0,n&&typeof n.read=="function"&&(this._read=n.read),ye.call(this)}ke.prototype.push=function(n,e){var t=this._readableState;return!t.objectMode&&typeof n=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(n=$.from(n,e),e="")),pd(this,t,n,e,!1)};ke.prototype.unshift=function(n){var e=this._readableState;return pd(this,e,n,"",!0)};ke.prototype.isPaused=function(){return this._readableState.flowing===!1};function pd(n,e,t,r,i){var s=uS(e,t);if(s)n.emit("error",s);else if(t===null)e.reading=!1,fS(n,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");n.emit("error",a)}else if(e.endEmitted&&i){var o=new Error("stream.unshift() after end event");n.emit("error",o)}else{var c;e.decoder&&!i&&!r&&(t=e.decoder.write(t),c=!e.objectMode&&t.length===0),i||(e.reading=!1),c||(e.flowing&&e.length===0&&!e.sync?(n.emit("data",t),n.read(0)):(e.length+=e.objectMode?1:t.length,i?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&oa(n))),lS(n,e)}else i||(e.reading=!1);return oS(e)}function oS(n){return!n.ended&&(n.needReadable||n.length<n.highWaterMark||n.length===0)}ke.prototype.setEncoding=function(n){return this._readableState.decoder=new Pi(n),this._readableState.encoding=n,this};var Gf=8388608;function cS(n){return n>=Gf?n=Gf:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function Hf(n,e){return n<=0||e.length===0&&e.ended?0:e.objectMode?1:n!==n?e.flowing&&e.length?e.buffer.head.data.length:e.length:(n>e.highWaterMark&&(e.highWaterMark=cS(n)),n<=e.length?n:e.ended?e.length:(e.needReadable=!0,0))}ke.prototype.read=function(n){Ae("read",n),n=parseInt(n,10);var e=this._readableState,t=n;if(n!==0&&(e.emittedReadable=!1),n===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ae("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?rc(this):oa(this),null;if(n=Hf(n,e),n===0&&e.ended)return e.length===0&&rc(this),null;var r=e.needReadable;Ae("need readable",r),(e.length===0||e.length-n<e.highWaterMark)&&(r=!0,Ae("length less than watermark",r)),e.ended||e.reading?(r=!1,Ae("reading or ended",r)):r&&(Ae("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(n=Hf(t,e)));var i;return n>0?i=Sd(n,e):i=null,i===null?(e.needReadable=!0,n=0):e.length-=n,e.length===0&&(e.ended||(e.needReadable=!0),t!==n&&e.ended&&rc(this)),i!==null&&this.emit("data",i),i};function uS(n,e){var t=null;return!hl(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!n.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function fS(n,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,oa(n)}}function oa(n){var e=n._readableState;e.needReadable=!1,e.emittedReadable||(Ae("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?ft(Yf,n):Yf(n))}function Yf(n){Ae("emit readable"),n.emit("readable"),Vc(n)}function lS(n,e){e.readingMore||(e.readingMore=!0,ft(dS,n,e))}function dS(n,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ae("maybeReadMore read 0"),n.read(0),t!==e.length);)t=e.length;e.readingMore=!1}ke.prototype._read=function(n){this.emit("error",new Error("not implemented"))};ke.prototype.pipe=function(n,e){var t=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=n;break;case 1:r.pipes=[r.pipes,n];break;default:r.pipes.push(n);break}r.pipesCount+=1,Ae("pipe count=%d opts=%j",r.pipesCount,e);var i=!e||e.end!==!1,s=i?o:d;r.endEmitted?ft(s):t.once("end",s),n.on("unpipe",a);function a(V){Ae("onunpipe"),V===t&&d()}function o(){Ae("onend"),n.end()}var c=hS(t);n.on("drain",c);var u=!1;function d(){Ae("cleanup"),n.removeListener("close",T),n.removeListener("finish",R),n.removeListener("drain",c),n.removeListener("error",y),n.removeListener("unpipe",a),t.removeListener("end",o),t.removeListener("end",d),t.removeListener("data",_),u=!0,r.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&c()}var h=!1;t.on("data",_);function _(V){Ae("ondata"),h=!1;var ee=n.write(V);ee===!1&&!h&&((r.pipesCount===1&&r.pipes===n||r.pipesCount>1&&gd(r.pipes,n)!==-1)&&!u&&(Ae("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,h=!0),t.pause())}function y(V){Ae("onerror",V),X(),n.removeListener("error",y),aS(n,"error")===0&&n.emit("error",V)}sS(n,"error",y);function T(){n.removeListener("finish",R),X()}n.once("close",T);function R(){Ae("onfinish"),n.removeListener("close",T),X()}n.once("finish",R);function X(){Ae("unpipe"),t.unpipe(n)}return n.emit("pipe",t),r.flowing||(Ae("pipe resume"),t.resume()),n};function hS(n){return function(){var e=n._readableState;Ae("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&n.listeners("data").length&&(e.flowing=!0,Vc(n))}}ke.prototype.unpipe=function(n){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return n&&n!==e.pipes?this:(n||(n=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,n&&n.emit("unpipe",this),this);if(!n){var t=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)t[i].emit("unpipe",this);return this}var s=gd(e.pipes,n);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),n.emit("unpipe",this),this)};ke.prototype.on=function(n,e){var t=ye.prototype.on.call(this,n,e);if(n==="data")this._readableState.flowing!==!1&&this.resume();else if(n==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&oa(this,r):ft(_S,this))}return t};ke.prototype.addListener=ke.prototype.on;function _S(n){Ae("readable nexttick read 0"),n.read(0)}ke.prototype.resume=function(){var n=this._readableState;return n.flowing||(Ae("resume"),n.flowing=!0,pS(this,n)),this};function pS(n,e){e.resumeScheduled||(e.resumeScheduled=!0,ft(SS,n,e))}function SS(n,e){e.reading||(Ae("resume read 0"),n.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,n.emit("resume"),Vc(n),e.flowing&&!e.reading&&n.read(0)}ke.prototype.pause=function(){return Ae("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ae("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Vc(n){var e=n._readableState;for(Ae("flow",e.flowing);e.flowing&&n.read()!==null;);}ke.prototype.wrap=function(n){var e=this._readableState,t=!1,r=this;n.on("end",function(){if(Ae("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&r.push(a)}r.push(null)}),n.on("data",function(a){if(Ae("wrapped data"),e.decoder&&(a=e.decoder.write(a)),!(e.objectMode&&a==null)&&!(!e.objectMode&&(!a||!a.length))){var o=r.push(a);o||(t=!0,n.pause())}});for(var i in n)this[i]===void 0&&typeof n[i]=="function"&&(this[i]=function(a){return function(){return n[a].apply(n,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return ES(s,function(a){n.on(a,r.emit.bind(r,a))}),r._read=function(a){Ae("wrapped _read",a),t&&(t=!1,n.resume())},r};ke._fromList=Sd;function Sd(n,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!n||n>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=gS(n,e.buffer,e.decoder),t}function gS(n,e,t){var r;return n<e.head.data.length?(r=e.head.data.slice(0,n),e.head.data=e.head.data.slice(n)):n===e.head.data.length?r=e.shift():r=t?vS(n,e):mS(n,e),r}function vS(n,e){var t=e.head,r=1,i=t.data;for(n-=i.length;t=t.next;){var s=t.data,a=n>s.length?s.length:n;if(a===s.length?i+=s:i+=s.slice(0,n),n-=a,n===0){a===s.length?(++r,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=s.slice(a));break}++r}return e.length-=r,i}function mS(n,e){var t=$.allocUnsafe(n),r=e.head,i=1;for(r.data.copy(t),n-=r.data.length;r=r.next;){var s=r.data,a=n>s.length?s.length:n;if(s.copy(t,t.length-n,0,a),n-=a,n===0){a===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++i}return e.length-=i,t}function rc(n){var e=n._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,ft(yS,e,n))}function yS(n,e){!n.endEmitted&&n.length===0&&(n.endEmitted=!0,e.readable=!1,e.emit("end"))}function ES(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)}function gd(n,e){for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}rt.WritableState=jc;Vn(rt,ye);function IS(){}function wS(n,e,t){this.chunk=n,this.encoding=e,this.callback=t,this.next=null}function jc(n,e){Object.defineProperty(this,"buffer",{get:ld(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),n=n||{},this.objectMode=!!n.objectMode,e instanceof $t&&(this.objectMode=this.objectMode||!!n.writableObjectMode);var t=n.highWaterMark,r=this.objectMode?16:16*1024;this.highWaterMark=t||t===0?t:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=n.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){WS(e,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ed(this)}jc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};function rt(n){if(!(this instanceof rt)&&!(this instanceof $t))return new rt(n);this._writableState=new jc(n,this),this.writable=!0,n&&(typeof n.write=="function"&&(this._write=n.write),typeof n.writev=="function"&&(this._writev=n.writev)),ye.call(this)}rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function AS(n,e){var t=new Error("write after end");n.emit("error",t),ft(e,t)}function bS(n,e,t,r){var i=!0,s=!1;return t===null?s=new TypeError("May not write null values to stream"):!$.isBuffer(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(n.emit("error",s),ft(r,s),i=!1),i}rt.prototype.write=function(n,e,t){var r=this._writableState,i=!1;return typeof e=="function"&&(t=e,e=null),$.isBuffer(n)?e="buffer":e||(e=r.defaultEncoding),typeof t!="function"&&(t=IS),r.ended?AS(this,t):bS(this,r,n,t)&&(r.pendingcb++,i=CS(this,r,n,e,t)),i};rt.prototype.cork=function(){var n=this._writableState;n.corked++};rt.prototype.uncork=function(){var n=this._writableState;n.corked&&(n.corked--,!n.writing&&!n.corked&&!n.finished&&!n.bufferProcessing&&n.bufferedRequest&&vd(this,n))};rt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function TS(n,e,t){return!n.objectMode&&n.decodeStrings!==!1&&typeof e=="string"&&(e=$.from(e,t)),e}function CS(n,e,t,r,i){t=TS(e,t,r),$.isBuffer(t)&&(r="buffer");var s=e.objectMode?1:t.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var o=e.lastBufferedRequest;e.lastBufferedRequest=new wS(t,r,i),o?o.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else yc(n,e,!1,s,t,r,i);return a}function yc(n,e,t,r,i,s,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,t?n._writev(i,e.onwrite):n._write(i,s,e.onwrite),e.sync=!1}function OS(n,e,t,r,i){--e.pendingcb,t?ft(i,r):i(r),n._writableState.errorEmitted=!0,n.emit("error",r)}function xS(n){n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0}function WS(n,e){var t=n._writableState,r=t.sync,i=t.writecb;if(xS(t),e)OS(n,t,r,e,i);else{var s=md(t);!s&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&vd(n,t),r?ft(Vf,n,t,s,i):Vf(n,t,s,i)}}function Vf(n,e,t,r){t||RS(n,e),e.pendingcb--,r(),yd(n,e)}function RS(n,e){e.length===0&&e.needDrain&&(e.needDrain=!1,n.emit("drain"))}function vd(n,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(n._writev&&t&&t.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=t;for(var a=0;t;)i[a]=t,t=t.next,a+=1;yc(n,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Ed(e)}else{for(;t;){var o=t.chunk,c=t.encoding,u=t.callback,d=e.objectMode?1:o.length;if(yc(n,e,!1,d,o,c,u),t=t.next,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=t,e.bufferProcessing=!1}rt.prototype._write=function(n,e,t){t(new Error("not implemented"))};rt.prototype._writev=null;rt.prototype.end=function(n,e,t){var r=this._writableState;typeof n=="function"?(t=n,n=null,e=null):typeof e=="function"&&(t=e,e=null),n!=null&&this.write(n,e),r.corked&&(r.corked=1,this.uncork()),!r.ending&&!r.finished&&FS(this,r,t)};function md(n){return n.ending&&n.length===0&&n.bufferedRequest===null&&!n.finished&&!n.writing}function jf(n,e){e.prefinished||(e.prefinished=!0,n.emit("prefinish"))}function yd(n,e){var t=md(e);return t&&(e.pendingcb===0?(jf(n,e),e.finished=!0,n.emit("finish")):jf(n,e)),t}function FS(n,e,t){e.ending=!0,yd(n,e),t&&(e.finished?ft(t):n.once("finish",t)),e.ended=!0,n.writable=!1}function Ed(n){var e=this;this.next=null,this.entry=null,this.finish=function(t){var r=e.entry;for(e.entry=null;r;){var i=r.callback;n.pendingcb--,i(t),r=r.next}n.corkedRequestsFree?n.corkedRequestsFree.next=e:n.corkedRequestsFree=e}}Vn($t,ke);var zf=Object.keys(rt.prototype);for(Fs=0;Fs<zf.length;Fs++)Ds=zf[Fs],$t.prototype[Ds]||($t.prototype[Ds]=rt.prototype[Ds]);var Ds,Fs;function $t(n){if(!(this instanceof $t))return new $t(n);ke.call(this,n),rt.call(this,n),n&&n.readable===!1&&(this.readable=!1),n&&n.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,n&&n.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",DS)}function DS(){this.allowHalfOpen||this._writableState.ended||ft(NS,this)}function NS(n){n.end()}Vn(ar,$t);function LS(n){this.afterTransform=function(e,t){return kS(n,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function kS(n,e,t){var r=n._transformState;r.transforming=!1;var i=r.writecb;if(!i)return n.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,t!=null&&n.push(t),i(e);var s=n._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&n._read(s.highWaterMark)}function ar(n){if(!(this instanceof ar))return new ar(n);$t.call(this,n),this._transformState=new LS(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(t){Kf(e,t)}):Kf(e)})}ar.prototype.push=function(n,e){return this._transformState.needTransform=!1,$t.prototype.push.call(this,n,e)};ar.prototype._transform=function(n,e,t){throw new Error("Not implemented")};ar.prototype._write=function(n,e,t){var r=this._transformState;if(r.writecb=t,r.writechunk=n,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ar.prototype._read=function(n){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function Kf(n,e){if(e)return n.emit("error",e);var t=n._writableState,r=n._transformState;if(t.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return n.push(null)}Vn(Fi,ar);function Fi(n){if(!(this instanceof Fi))return new Fi(n);ar.call(this,n)}Fi.prototype._transform=function(n,e,t){t(null,n)};Vn(wr,ye);wr.Readable=ke;wr.Writable=rt;wr.Duplex=$t;wr.Transform=ar;wr.PassThrough=Fi;wr.Stream=wr;function wr(){ye.call(this)}wr.prototype.pipe=function(n,e){var t=this;function r(d){n.writable&&n.write(d)===!1&&t.pause&&t.pause()}t.on("data",r);function i(){t.readable&&t.resume&&t.resume()}n.on("drain",i),!n._isStdio&&(!e||e.end!==!1)&&(t.on("end",a),t.on("close",o));var s=!1;function a(){s||(s=!0,n.end())}function o(){s||(s=!0,typeof n.destroy=="function"&&n.destroy())}function c(d){if(u(),ye.listenerCount(this,"error")===0)throw d}t.on("error",c),n.on("error",c);function u(){t.removeListener("data",r),n.removeListener("drain",i),t.removeListener("end",a),t.removeListener("close",o),t.removeListener("error",c),n.removeListener("error",c),t.removeListener("end",u),t.removeListener("close",u),n.removeListener("close",u)}return t.on("end",u),t.on("close",u),n.on("close",u),n.emit("pipe",t),n};var Xf=function(n){qr(e,n);function e(t,r,i){ut(this,e);var s=Xr(this,(e.__proto__||xe(e)).call(this,{highWaterMark:r.highWaterMark,encoding:r.encoding}));return s._fs=i,s.bytesRead=0,s.path=t,s.fd=r.fd===void 0?null:r.fd,s.flags=r.flags===void 0?"r":r.flags,s.mode=r.mode===void 0?Wt:r.mode,s.autoClose=r.autoClose===void 0?!0:r.autoClose,s.start=r.start,s.end=r.end===void 0?1/0:r.end,s.pos=r.start,typeof s.fd!="number"&&s._open(),tt(e.prototype.__proto__||xe(e.prototype),"on",s).call(s,"end",function(){s.autoClose&&s.destroy()}),s}return vt(e,[{key:"_open",value:function(){var r=this;this._fs.open(this.path,this.flags,this.mode,function(i,s){if(i){r.autoClose&&r.destroy(),tt(e.prototype.__proto__||xe(e.prototype),"emit",r).call(r,"error",i);return}r.fd=s,tt(e.prototype.__proto__||xe(e.prototype),"emit",r).call(r,"open",s),tt(e.prototype.__proto__||xe(e.prototype),"read",r).call(r)})}},{key:"_read",value:function(r){var i=this;if(typeof this.fd!="number"){tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"open",function(){i._read(r)});return}if(!this.destroyed){if(this.pos!=null&&(r=Math.min(this.end-this.pos+1,r)),r<=0){this.push(null);return}this._fs.read(this.fd,$.allocUnsafe(r),0,r,this.pos,function(s,a,o){if(s){i.autoClose&&i.destroy(),tt(e.prototype.__proto__||xe(e.prototype),"emit",i).call(i,"error",s);return}a>0?(i.bytesRead+=a,i.push(o.slice(0,a))):i.push(null)}),this.pos!=null&&(this.pos+=r)}}},{key:"_destroy",value:function(r,i){this._close(function(s){i(r||s)})}},{key:"_close",value:function(r){var i=this;if(r&&tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"close",r),typeof this.fd!="number"){tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"open",function(){i._close()});return}if(this.closed)return ft(function(){return tt(e.prototype.__proto__||xe(e.prototype),"emit",i).call(i,"close")});this.closed=!0,this._fs.close(this.fd,function(s){s?i.emit("error",s):i.emit("close")}),this.fd=null}}]),e}(ke),qf=function(n){qr(e,n);function e(t,r,i){ut(this,e);var s=Xr(this,(e.__proto__||xe(e)).call(this,{highWaterMark:r.highWaterMark}));return s._fs=i,s.bytesWritten=0,s.path=t,s.fd=r.fd===void 0?null:r.fd,s.flags=r.flags===void 0?"w":r.flags,s.mode=r.mode===void 0?Wt:r.mode,s.autoClose=r.autoClose===void 0?!0:r.autoClose,s.start=r.start,s.pos=s.start,r.encoding&&tt(e.prototype.__proto__||xe(e.prototype),"setDefaultEncoding",s).call(s,r.encoding),typeof s.fd!="number"&&s._open(),tt(e.prototype.__proto__||xe(e.prototype),"on",s).call(s,"finish",function(){s.autoClose&&s.destroy()}),s}return vt(e,[{key:"_open",value:function(){var r=this;this._fs.open(this.path,this.flags,this.mode,function(i,s){if(i){r.autoClose&&r.destroy(),tt(e.prototype.__proto__||xe(e.prototype),"emit",r).call(r,"error",i);return}r.fd=s,tt(e.prototype.__proto__||xe(e.prototype),"emit",r).call(r,"open",s)})}},{key:"_write",value:function(r,i,s){var a=this;if(typeof this.fd!="number")return tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"open",function(){a._write(r,i,s)});this._fs.write(this.fd,r,0,r.length,this.pos,function(o,c){if(o){a.autoClose&&a.destroy(),s(o);return}a.bytesWritten+=c,s()}),this.pos!==void 0&&(this.pos+=r.length)}},{key:"_writev",value:function(r,i){this._write($.concat(r.map(function(s){return s.chunk})),void 0,i)}},{key:"_destroy",value:function(r,i){this._close(function(s){i(r||s)})}},{key:"_close",value:function(r){var i=this;if(r&&tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"close",r),typeof this.fd!="number"){tt(e.prototype.__proto__||xe(e.prototype),"once",this).call(this,"open",function(){i._close()});return}if(this.closed)return ft(function(){return tt(e.prototype.__proto__||xe(e.prototype),"emit",i).call(i,"close")});this.closed=!0,this._fs.close(this.fd,function(s){s?i.emit("error",s):i.emit("close")}),this.fd=null}},{key:"_final",value:function(r){r()}}]),e}(rt),Jf=Vo.posix?Vo.posix.join:Vo.join,Se=function(e){if(e)throw e},zc=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:18,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new ia,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Pc(r),s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new $c(i);ut(this,n);var a=void 0;if(typeof t=="number"){if(a=i.getINode(t),!(a instanceof Ne))throw TypeError("rootIndex must point to a root directory")}else{var o=i.createINode(Ne,{mode:K_,uid:nr,gid:_c}),c=Et(o,1);a=c[0]}this._uid=nr,this._gid=_c,this._umask=e,this._devMgr=r,this._iNodeMgr=i,this._fdMgr=s,this._root=a,this._cwd=new z_(i,a),this.constants=W,this.ReadStream=Xf,this.WriteStream=qf}return vt(n,[{key:"getUmask",value:function(){return this._umask}},{key:"setUmask",value:function(t){this._umask=t}},{key:"getUid",value:function(){return this._uid}},{key:"setUid",value:function(t){this._uid=t}},{key:"getGid",value:function(){return this._gid}},{key:"setGid",value:function(t){this._gid=t}},{key:"getCwd",value:function(){return this._cwd.getPath()}},{key:"chdir",value:function(t){t=this._getPath(t);var r=this._navigate(t,!0);if(!r.target)throw new L(B.ENOENT,t);if(!(r.target instanceof Ne))throw new L(B.ENOTDIR,t);if(!this._checkPermissions(W.X_OK,r.target.getMetadata()))throw new L(B.EACCES,t);this._cwd.changeDir(r.target,r.pathStack)}},{key:"access",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.accessSync.bind(this),[t].concat(Le(i.slice(0,a))),o,o)}},{key:"accessSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W.F_OK;t=this._getPath(t);var i=this._navigate(t,!0).target;if(!i)throw new L(B.ENOENT,t);if(r!==W.F_OK&&!this._checkPermissions(r,i.getMetadata()))throw new L(B.EACCES,t)}},{key:"appendFile",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.appendFileSync.bind(this),[t,r].concat(Le(s.slice(0,o))),c,c)}},{key:"appendFileSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"undefined",i=arguments[2];i=this._getOptions({encoding:"utf8",mode:Wt,flag:"a"},i),r=this._getBuffer(r,i.encoding);var s=void 0;try{var a=void 0;if(typeof t=="number"){if(a=this._fdMgr.getFd(t),!a)throw new L(B.EBADF,null,null,"appendFile");if(!(a.getFlags()&(W.O_WRONLY|W.O_RDWR)))throw new L(B.EBADF,null,null,"appendFile")}else{var o=this._openSync(t,i.flag,i.mode),c=Et(o,2);a=c[0],s=c[1]}try{a.write(r,null,W.O_APPEND)}catch(u){throw u instanceof RangeError?new L(B.EFBIG,null,null,"appendFile"):u}}finally{s!==void 0&&this.closeSync(s)}}},{key:"chmod",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;this._callAsync(this.chmodSync.bind(this),[t,r],i,i)}},{key:"chmodSync",value:function(t,r){t=this._getPath(t);var i=this._navigate(t,!0).target;if(!i)throw new L(B.ENOENT,t);if(typeof r!="number")throw new TypeError("mode must be an integer");var s=i.getMetadata();if(this._uid!==nr&&this._uid!==s.uid)throw new L(B.EPERM,null,null,"chmod");s.mode=s.mode&W.S_IFMT|r}},{key:"chown",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.chownSync.bind(this),[t,r,i],s,s)}},{key:"chownSync",value:function(t,r,i){t=this._getPath(t);var s=this._navigate(t,!0).target;if(!s)throw new L(B.ENOENT,t);var a=s.getMetadata();if(this._uid!==nr){if(a.uid!==this._uid)throw new L(B.EPERM,null,null,"chown");if(this._uid!==r)throw new L(B.EPERM,null,null,"chown")}typeof r=="number"&&(a.uid=r),typeof i=="number"&&(a.gid=i)}},{key:"chownr",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.chownrSync.bind(this),[t,r,i],s,s)}},{key:"chownrSync",value:function(t,r,i){var s=this;t=this._getPath(t),this.chownSync(t,r,i);var a=void 0;try{a=this.readdirSync(t)}catch(o){if(o&&o.code==="ENOTDIR")return;throw o}a.forEach(function(o){var c=Jf(t,o);s.lstatSync(c).isSymbolicLink()||s.chownrSync(c,r,i)})}},{key:"close",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.closeSync.bind(this),[t],r,r)}},{key:"closeSync",value:function(t){if(!this._fdMgr.getFd(t))throw new L(B.EBADF,null,null,"close");this._fdMgr.deleteFd(t)}},{key:"copyFile",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.copyFileSync.bind(this),[t,r].concat(Le(s.slice(0,o))),c,c)}},{key:"copyFileSync",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;t=this._getPath(t),r=this._getPath(r);var s=void 0,a=void 0,o=void 0,c=void 0;try{var u=this._openSync(t,W.O_RDONLY),d=Et(u,2);s=d[0],a=d[1];var h=s.getINode();if(h instanceof Ne)throw new L(B.EBADF,t,r);var _=W.WRONLY|W.O_CREAT;i&W.COPYFILE_EXCL&&(_|=W.O_EXCL);var y=this._openSync(r,_,h.getMetadata().mode),T=Et(y,2);o=T[0],c=T[1];var R=o.getINode();if(R instanceof It)R.setData(Mf(h.getData()));else throw new L(B.EINVAL,t,r)}finally{a!==void 0&&this.closeSync(a),c!==void 0&&this.closeSync(c)}}},{key:"createReadStream",value:function(t,r){if(t=this._getPath(t),r=this._getOptions({flags:"r",encoding:null,fd:null,mode:Wt,autoClose:!0,end:1/0},r),r.start!==void 0&&r.start>r.end)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new Xf(t,r,this)}},{key:"createWriteStream",value:function(t,r){if(t=this._getPath(t),r=this._getOptions({flags:"w",defaultEncoding:"utf8",fd:null,mode:Wt,autoClose:!0},r),r.start!==void 0&&r.start<0)throw new RangeError("ERR_VALUE_OUT_OF_RANGE");return new qf(t,r,this)}},{key:"exists",value:function(t,r){r||(r=function(){}),this._callAsync(this.existsSync.bind(this),[t],r,r)}},{key:"existsSync",value:function(t){t=this._getPath(t);try{return!!this._navigate(t,!0).target}catch{return!1}}},{key:"fallocate",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.fallocateSync.bind(this),[t,r,i],s,s)}},{key:"fallocateSync",value:function(t,r,i){if(r<0||i<=0)throw new L(B.EINVAL,null,null,"fallocate");var s=this._fdMgr.getFd(t);if(!s)throw new L(B.EBADF,null,null,"fallocate");var a=s.getINode();if(!(a instanceof It))throw new L(B.ENODEV,null,null,"fallocate");if(!(s.getFlags()&(W.O_WRONLY|W.O_RDWR)))throw new L(B.EBADF,null,null,"fallocate");var o=a.getData(),c=a.getMetadata();if(r+i>o.length){var u=void 0;try{u=js(o,r+i-o.length)}catch(d){throw d instanceof RangeError?new L(B.EFBIG,null,null,"fallocate"):d}a.setData(u),c.size=u.length}c.ctime=new Date}},{key:"mmap",value:function(t,r,i){for(var s=arguments.length,a=Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];var c=a.findIndex(function(d){return typeof d=="function"}),u=a[c]||Se;c=c>=0?c:a.length,this._callAsync(this.mmapSync.bind(this),[t,r,i].concat(Le(a.slice(0,c))),function(d){return u(null,d)},u)}},{key:"mmapSync",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<1||s<0)throw new L(B.EINVAL,null,null,"mmap");var a=this._fdMgr.getFd(i);if(!a)throw new L(B.EBADF,null,null,"mmap");var o=a.getFlags()&W.O_ACCMODE;if(o===W.O_WRONLY)throw new L(B.EACCES,null,null,"mmap");var c=a.getINode();if(!(c instanceof It))throw new L(B.ENODEV,null,null,"mmap");switch(r){case W.MAP_PRIVATE:return Mf(c.getData().slice(s,s+t));case W.MAP_SHARED:if(o!==W.O_RDWR)throw new L(B.EACCES,null,null,"mmap");return G_(c,"_data").slice(s,s+t);default:throw new L(B.EINVAL,null,null,"mmap")}}},{key:"fchmod",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;this._callAsync(this.fchmodSync.bind(this),[t,r],i,i)}},{key:"fchmodSync",value:function(t,r){var i=this._fdMgr.getFd(t);if(!i)throw new L(B.EBADF,null,null,"fchmod");if(typeof r!="number")throw new TypeError("mode must be an integer");var s=i.getINode().getMetadata();if(this._uid!==nr&&this._uid!==s.uid)throw new L(B.EPERM,null,null,"fchmod");s.mode=s.mode&W.S_IMFT|r}},{key:"fchown",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.fchmodSync.bind(this),[t,r,i],s,s)}},{key:"fchownSync",value:function(t,r,i){var s=this._fdMgr.getFd(t);if(!s)throw new L(B.EBADF,null,null,"fchown");var a=s.getINode().getMetadata();if(this._uid!==nr){if(a.uid!==this._uid)throw new L(B.EPERM,null,null,"fchown");if(this._uid!==r)throw new L(B.EPERM,null,null,"fchown")}typeof r=="number"&&(a.uid=r),typeof i=="number"&&(a.gid=i)}},{key:"fdatasync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.fchmodSync.bind(this),[t],r,r)}},{key:"fdatasyncSync",value:function(t){if(!this._fdMgr.getFd(t))throw new L(B.EBADF,null,null,"fdatasync")}},{key:"fstat",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.fstatSync.bind(this),[t],function(i){return r(null,i)},r)}},{key:"fstatSync",value:function(t){var r=this._fdMgr.getFd(t);if(!r)throw new L(B.EBADF,null,null,"fstat");return new Bs(Nn({},r.getINode().getMetadata()))}},{key:"fsync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.fsyncSync.bind(this),[t],r,r)}},{key:"fsyncSync",value:function(t){if(!this._fdMgr.getFd(t))throw new L(B.EBADF,null,null,"fsync")}},{key:"ftruncate",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.ftruncateSync.bind(this),[t].concat(Le(i.slice(0,a))),o,o)}},{key:"ftruncateSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(r<0)throw new L(B.EINVAL,null,null,"ftruncate");var i=this._fdMgr.getFd(t);if(!i)throw new L(B.EBADF,null,null,"ftruncate");var s=i.getINode();if(!(s instanceof It))throw new L(B.EINVAL,null,null,"ftruncate");if(!(i.getFlags()&(W.O_WRONLY|W.O_RDWR)))throw new L(B.EINVAL,null,null,"ftruncate");var a=s.getData(),o=s.getMetadata(),c=void 0;try{r>a.length?(c=js(a,r),s.setData(c)):r<a.length?(a.resize(r),s.setData(c)):c=a}catch(d){throw d instanceof RangeError?new L(B.EFBIG,null,null,"ftruncate"):d}var u=new Date;o.mtime=u,o.ctime=u,o.size=c.length,i.setPos(Math.min(c.length,i.getPos()))}},{key:"futimes",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.futimesSync.bind(this),[t,r,i],s,s)}},{key:"futimesSync",value:function(t,r,i){var s=this._fdMgr.getFd(t);if(!s)throw new L(B.EBADF,null,null,"futimes");var a=s.getINode().getMetadata(),o=void 0,c=void 0;if(typeof r=="number")o=new Date(r*1e3);else if(typeof r=="string")o=new Date(parseInt(r)*1e3);else if(r instanceof Date)o=r;else throw TypeError("atime and mtime must be dates or unixtime in seconds");if(typeof i=="number")c=new Date(i*1e3);else if(typeof i=="string")c=new Date(parseInt(i)*1e3);else if(i instanceof Date)c=i;else throw TypeError("atime and mtime must be dates or unixtime in seconds");a.atime=o,a.mtime=c,a.ctime=new Date}},{key:"lchmod",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;this._callAsync(this.lchmodSync.bind(this),[t,r],i,i)}},{key:"lchmodSync",value:function(t,r){t=this._getPath(t);var i=this._navigate(t,!1).target;if(!i)throw new L(B.ENOENT,t);if(typeof r!="number")throw new TypeError("mode must be an integer");var s=i.getMetadata();if(this._uid!==nr&&this._uid!==s.uid)throw new L(B.EPERM,null,null,"lchmod");s.mode=s.mode&W.S_IFMT|r}},{key:"lchown",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.lchownSync.bind(this),[t,r,i],s,s)}},{key:"lchownSync",value:function(t,r,i){t=this._getPath(t);var s=this._navigate(t,!1).target;if(!s)throw new L(B.ENOENT,t);var a=s.getMetadata();if(this._uid!==nr){if(a.uid!==this._uid)throw new L(B.EPERM,null,null,"lchown");if(this._uid!==r)throw new L(B.EPERM,null,null,"lchown")}typeof r=="number"&&(a.uid=r),typeof i=="number"&&(a.gid=i)}},{key:"link",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;this._callAsync(this.linkSync.bind(this),[t,r],i,i)}},{key:"linkSync",value:function(t,r){t=this._getPath(t),r=this._getPath(r);var i=void 0,s=void 0;if(i=this._navigate(t,!1),s=this._navigate(r,!1),!i.target)throw new L(B.ENOENT,t,r,"link");if(i.target instanceof Ne)throw new L(B.EPERM,t,r,"link");if(s.target)throw new L(B.EEXIST,t,r,"link");if(s.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t,r,"link");if(!this._checkPermissions(W.W_OK,s.dir.getMetadata()))throw new L(B.EACCES,t,r,"link");var a=i.dir.getEntryIndex(i.name);s.dir.addEntry(s.name,a),i.target.getMetadata().ctime=new Date}},{key:"lseek",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.lseekSync.bind(this),[t,r].concat(Le(s.slice(0,o))),c,c)}},{key:"lseekSync",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:W.SEEK_SET,s=this._fdMgr.getFd(t);if(!s)throw new L(B.EBADF,null,null,"lseek");if([W.SEEK_SET,W.SEEK_CUR,W.SEEK_END].indexOf(i)===-1)throw new L(B.EINVAL,null,null,"lseek");try{s.setPos(r,i)}catch(a){throw a instanceof L&&a.setSyscall("lseek"),a}}},{key:"lstat",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.lstatSync.bind(this),[t],function(i){return r(null,i)},r)}},{key:"lstatSync",value:function(t){t=this._getPath(t);var r=this._navigate(t,!1).target;if(r)return new Bs(Nn({},r.getMetadata()));throw new L(B.ENOENT,t)}},{key:"mkdir",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.mkdirSync.bind(this),[t].concat(Le(i.slice(0,a))),o,o)}},{key:"mkdirSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gs;t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");var i=this._navigate(t,!0);if(i.target)throw new L(B.EEXIST,t,null,"mkdir");if(!i.target&&i.remaining)throw new L(B.ENOENT,t,null,"mkdir");if(!i.target){if(i.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t,null,"mkdir");if(!this._checkPermissions(W.W_OK,i.dir.getMetadata()))throw new L(B.EACCES,t,null,"mkdir");var s=this._iNodeMgr.createINode(Ne,{mode:bi(r,this._umask),uid:this._uid,gid:this._gid,parent:i.dir.getEntryIndex(".")}),a=Et(s,2),o=a[1];i.dir.addEntry(i.name,o)}}},{key:"mkdirp",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.mkdirpSync.bind(this),[t].concat(Le(i.slice(0,a))),o,o)}},{key:"mkdirpSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gs;t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");for(var i=void 0,s=void 0,a=void 0,o=this._navigate(t,!0);;)if(o.target){if(o.target instanceof Ne)break;throw new L(B.ENOTDIR,t)}else{if(o.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t);if(!this._checkPermissions(W.W_OK,o.dir.getMetadata()))throw new L(B.EACCES,t);var c=this._iNodeMgr.createINode(Ne,{mode:bi(r,this._umask),uid:this._uid,gid:this._gid,parent:o.dir.getEntryIndex(".")}),u=Et(c,2);if(i=u[0],s=u[1],o.dir.addEntry(o.name,s),o.remaining)a=i,o=this._navigateFrom(a,o.remaining,!0);else break}}},{key:"mkdtemp",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.mkdtempSync.bind(this),[t].concat(Le(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"mknod",value:function(t,r,i,s){for(var a=arguments.length,o=Array(a>4?a-4:0),c=4;c<a;c++)o[c-4]=arguments[c];var u=o.findIndex(function(h){return typeof h=="function"}),d=o[u]||Se;u=u>=0?u:o.length,this._callAsync(this.mknodSync.bind(this),[t,r,i,s].concat(Le(o.slice(0,u))),d,d)}},{key:"mknodSync",value:function(t,r,i,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Wt;t=this._getPath(t);var o=this._navigate(t,!1);if(o.target)throw new L(B.EEXIST,t,null,"mknod");if(o.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t,null,"mknod");if(!this._checkPermissions(W.W_OK,o.dir.getMetadata()))throw new L(B.EACCES,t,null,"mknod");var c=void 0;switch(r){case W.S_IFREG:var u=this._iNodeMgr.createINode(It,{mode:bi(a,this._umask),uid:this._uid,gid:this._gid}),d=Et(u,2);c=d[1];break;case W.S_IFCHR:if(typeof i!="number"||typeof s!="number")throw TypeError("major and minor must set as numbers when creating device nodes");if(i>rd||s>nd||s<pc||s<Sc)throw new L(B.EINVAL,t,null,"mknod");var h=this._iNodeMgr.createINode(Jt,{mode:bi(a,this._umask),uid:this._uid,gid:this._gid,rdev:br(i,s)}),_=Et(h,2);c=_[1];break;default:throw new L(B.EPERM,t,null,"mknod")}o.dir.addEntry(o.name,c)}},{key:"open",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.openSync.bind(this),[t,r].concat(Le(s.slice(0,o))),function(u){return c(null,u)},c)}},{key:"openSync",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wt;return this._openSync(t,r,i)[1]}},{key:"_openSync",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wt;if(t=this._getPath(t),typeof r=="string")switch(r){case"r":case"rs":r=W.O_RDONLY;break;case"r+":case"rs+":r=W.O_RDWR;break;case"w":r=W.O_WRONLY|W.O_CREAT|W.O_TRUNC;break;case"wx":r=W.O_WRONLY|W.O_CREAT|W.O_TRUNC|W.O_EXCL;break;case"w+":r=W.O_RDWR|W.O_CREAT|W.O_TRUNC;break;case"wx+":r=W.O_RDWR|W.O_CREAT|W.O_TRUNC|W.O_EXCL;break;case"a":r=W.O_WRONLY|W.O_APPEND|W.O_CREAT;break;case"ax":r=W.O_WRONLY|W.O_APPEND|W.O_CREAT|W.O_EXCL;break;case"a+":r=W.O_RDWR|W.O_APPEND|W.O_CREAT;break;case"ax+":r=W.O_RDWR|W.O_APPEND|W.O_CREAT|W.O_EXCL;break;default:throw new TypeError("Unknown file open flag: "+r)}if(typeof r!="number")throw new TypeError("Unknown file open flag: "+r);var s=this._navigate(t,!1);if(s.target instanceof Un){if(r&W.O_NOFOLLOW)throw new L(B.ELOOP,t,null,"open");s=this._navigateFrom(s.dir,s.name+s.remaining,!0,void 0,void 0,t)}var a=s.target;if(a){if(r&W.O_CREAT&&r&W.O_EXCL)throw new L(B.EEXIST,t,null,"open");if(a instanceof Ne&&r&(W.O_WRONLY|r&W.O_RDWR))throw new L(B.EISDIR,t,null,"open");if(r&W.O_DIRECTORY&&!(a instanceof Ne))throw new L(B.ENOTDIR,t,null,"open");r&W.O_TRUNC&&a instanceof It&&r&(W.O_WRONLY|W.O_RDWR)&&a.setData(new ArrayBuffer(0));var d=void 0;if(r&W.O_RDWR?d=W.R_OK|W.W_OK:r&W.O_WRONLY?d=W.W_OK:d=W.R_OK,!this._checkPermissions(d,a.getMetadata()))throw new L(B.EACCES,t,null,"open")}else if(!s.remaining&&r&W.O_CREAT){if(s.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t,null,"open");if(!this._checkPermissions(W.W_OK,s.dir.getMetadata()))throw new L(B.EACCES,t,null,"open");var o=void 0,c=this._iNodeMgr.createINode(It,{mode:bi(i,this._umask),uid:this._uid,gid:this._gid}),u=Et(c,2);a=u[0],o=u[1],s.dir.addEntry(s.name,o)}else throw new L(B.ENOENT,t,null,"open");try{var h=this._fdMgr.createFd(a,r);return h}catch(_){throw _ instanceof L&&(_.setPaths(t),_.setSyscall("open")),_}}},{key:"read",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.readSync.bind(this),[t,r].concat(Le(s.slice(0,o))),function(u){return c(null,u,r)},c)}},{key:"readSync",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=this._fdMgr.getFd(t);if(!o)throw new L(B.EBADF,null,null,"read");if(typeof a=="number"&&a<0)throw new L(B.EINVAL,null,null,"read");if(o.getINode().getMetadata().isDirectory())throw new L(B.EISDIR,null,null,"read");var c=o.getFlags();if(c&W.O_WRONLY)throw new L(B.EBADF,null,null,"read");if(i<0||i>r.length)throw new RangeError("Offset is out of bounds");if(s<0||s>r.length)throw new RangeError("Length extends beyond buffer");r=this._getBuffer(r).slice(i,i+s);var u=void 0;try{u=o.read(r,a)}catch(d){throw d instanceof L&&(d.syscall="read"),d}return u}},{key:"readdir",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.readdirSync.bind(this),[t].concat(Le(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"readFile",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.readFileSync.bind(this),[t].concat(Le(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"readFileSync",value:function(t,r){r=this._getOptions({encoding:null,flag:"r"},r);var i=void 0;try{var s=new ArrayBuffer(4096),a=new ArrayBuffer(0),o=null;if(typeof t=="number")for(;o!==0;)o=this.readSync(t,s,0,s.length),a=gc(a,s.slice(0,o));else for(i=this.openSync(t,r.flag);o!==0;)o=this.readSync(i,s,0,s.length),a=gc(a,s.slice(0,o));return r.encoding?a.toString(r.encoding):a}finally{i!==void 0&&this.closeSync(i)}}},{key:"readlink",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.readlinkSync.bind(this),[t].concat(Le(i.slice(0,a))),function(c){return o(null,c)},o)}},{key:"rename",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;this._callAsync(this.renameSync.bind(this),[t,r],i,i)}},{key:"renameSync",value:function(t,r){t=this._getPath(t),r=this._getPath(r);var i=this._navigate(t,!1),s=this._navigate(r,!1);if(!i.target)throw new L(B.ENOENT,t,r,"rename");if(i.target instanceof Ne){if(s.target&&!(s.target instanceof Ne))throw new L(B.ENOTDIR,t,r,"rename");if(i.target===this._root||s.target===this._root)throw new L(B.EBUSY,t,r,"rename");if(s.target&&[].concat(Le(s.target.getEntries())).length-2)throw new L(B.ENOTEMPTY,t,r,"rename");if(i.name==="."||i.name===".."||s.name==="."||s.name==="..")throw new L(B.EBUSY,t,r,"rename");if(i.pathStack.length<s.pathStack.length){for(var a=!0,o=0;o<i.pathStack.length;++o)if(i.pathStack[o]!==s.pathStack[o]){a=!1;break}if(a)throw new L(B.EINVAL,t,r,"rename")}}else if(s.target&&s.target instanceof Ne)throw new L(B.EISDIR,t,r,"rename");if(!this._checkPermissions(W.W_OK,i.dir.getMetadata())||!this._checkPermissions(W.W_OK,s.dir.getMetadata()))throw new L(B.EACCES,t,r,"rename");if(i.dir===s.dir){i.dir.renameEntry(i.name,s.name);return}var c=i.dir.getEntryIndex(i.name);if(s.target)s.target.getMetadata().ctime=new Date,s.dir.deleteEntry(s.name),s.dir.addEntry(s.name,c);else{if(s.dir.getMetadata().nlink<2)throw new L(B.ENOENT,t,r,"rename");s.dir.addEntry(s.name,c)}i.target.getMetadata().ctime=new Date,i.dir.deleteEntry(i.name)}},{key:"rmdir",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.rmdirSync.bind(this),[t],r,r)}},{key:"rmdirSync",value:function(t){t=this._getPath(t),t=t.replace(/(.+?)\/+$/,"$1");var r=this._navigate(t,!1);if(!r.name)throw new L(B.EBUSY,t,null,"rmdir");if(r.name==="."||r.name==="..")throw new L(B.EINVAL,t,null,"rmdir");if(!r.target)throw new L(B.ENOENT,t,null,"rmdir");if(!(r.target instanceof Ne))throw new L(B.ENOTDIR,t,null,"rmdir");if([].concat(Le(r.target.getEntries())).length-2)throw new L(B.ENOTEMPTY,t,null,"rmdir");if(!this._checkPermissions(W.W_OK,r.dir.getMetadata()))throw new L(B.EACCES,t,null,"rmdir");r.dir.deleteEntry(r.name)}},{key:"stat",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.statSync.bind(this),[t],function(i){return r(null,i)},r)}},{key:"statSync",value:function(t){t=this._getPath(t);var r=this._navigate(t,!0).target;if(r)return new Bs(Nn({},r.getMetadata()));throw new L(B.ENOENT,t)}},{key:"symlink",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.symlinkSync.bind(this),[t,r].concat(Le(s.slice(0,o))),c,c)}},{key:"symlinkSync",value:function(t,r){if(t=this._getPath(t),r=this._getPath(r),!t)throw new L(B.ENOENT,r,t,"symlink");var i=this._navigate(r,!1);if(i.target)throw new L(B.EEXIST,r,t,"symlink");if(i.dir.getMetadata().nlink<2)throw new L(B.ENOENT,r,t,"symlink");if(!this._checkPermissions(W.W_OK,i.dir.getMetadata()))throw new L(B.EACCES,r,t,"symlink");var s=this._iNodeMgr.createINode(Un,{mode:Bc,uid:this._uid,gid:this._gid,link:t}),a=Et(s,2),o=a[1];i.dir.addEntry(i.name,o)}},{key:"truncate",value:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];var a=i.findIndex(function(c){return typeof c=="function"}),o=i[a]||Se;a=a>=0?a:i.length,this._callAsync(this.truncateSync.bind(this),[t].concat(Le(i.slice(0,a))),o,o)}},{key:"truncateSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(r<0)throw new L(B.EINVAL,null,null,"ftruncate");if(typeof t=="number")this.ftruncateSync(t,r);else{t=this._getPath(t);var i=void 0;try{i=this.openSync(t,W.O_WRONLY),this.ftruncateSync(i,r)}finally{i!==void 0&&this.closeSync(i)}}}},{key:"unlink",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;this._callAsync(this.unlinkSync.bind(this),[t],r,r)}},{key:"unlinkSync",value:function(t){t=this._getPath(t);var r=this._navigate(t,!1);if(!r.target)throw new L(B.ENOENT,t);if(!this._checkPermissions(W.W_OK,r.dir.getMetadata()))throw new L(B.EACCES,t);if(r.target instanceof Ne)throw new L(B.EISDIR,t);r.target.getMetadata().ctime=new Date,r.dir.deleteEntry(r.name)}},{key:"utimes",value:function(t,r,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Se;this._callAsync(this.utimesSync.bind(this),[t,r,i],s,s)}},{key:"utimesSync",value:function(t,r,i){t=this._getPath(t);var s=this._navigate(t,!0).target;if(!s)throw new L(B.ENOENT,t,null,"utimes");var a=s.getMetadata(),o=void 0,c=void 0;if(typeof r=="number")o=new Date(r*1e3);else if(typeof r=="string")o=new Date(parseInt(r)*1e3);else if(r instanceof Date)o=r;else throw TypeError("atime and mtime must be dates or unixtime in seconds");if(typeof i=="number")c=new Date(i*1e3);else if(typeof i=="string")c=new Date(parseInt(i)*1e3);else if(i instanceof Date)c=i;else throw TypeError("atime and mtime must be dates or unixtime in seconds");a.atime=o,a.mtime=c,a.ctime=new Date}},{key:"write",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.writeSync.bind(this),[t,r].concat(Le(s.slice(0,o))),function(u){return c(null,u,r)},c)}},{key:"writeSync",value:function(t,r,i,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=this._fdMgr.getFd(t);if(!o)throw new L(B.EBADF,null,null,"write");if(typeof a=="number"&&a<0)throw new L(B.EINVAL,null,null,"write");var c=o.getFlags();if(!(c&(W.O_WRONLY|W.O_RDWR)))throw new L(B.EBADF,null,null,"write");var u=void 0;if(typeof r=="string")a=typeof i=="number"?i:null,s=typeof s=="string"?s:"utf8",u=this._getBuffer(r,s);else{if(i=typeof i=="number"?i:0,i<0||i>r.length)throw new RangeError("Offset is out of bounds");if(s=typeof s=="number"?s:r.length,s<0||s>r.length)throw new RangeError("Length is out of bounds");u=this._getBuffer(r).slice(i,i+s)}try{return o.write(u,a)}catch(d){throw d instanceof RangeError?new L(B.EFBIG,null,null,"write"):(d instanceof L&&d.setSyscall("write"),d)}}},{key:"writeFile",value:function(t,r){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var o=s.findIndex(function(u){return typeof u=="function"}),c=s[o]||Se;o=o>=0?o:s.length,this._callAsync(this.writeFileSync.bind(this),[t,r].concat(Le(s.slice(0,o))),c,c)}},{key:"writeFileSync",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"undefined",i=arguments[2];i=this._getOptions({encoding:"utf8",mode:Wt,flag:"w"},i);var s=void 0;try{var a=this._getBuffer(r,i.encoding);typeof t=="number"?this.writeSync(t,a,0,a.length,0):(s=this.openSync(t,i.flag,i.mode),this.writeSync(s,a,0,a.length,0))}finally{s!==void 0&&this.closeSync(s)}}},{key:"_callAsync",value:function(t,r,i,s){ft(function(){try{var a=t.apply(void 0,Le(r));a=a===void 0?null:a,i(a)}catch(o){s(o)}})}},{key:"_getPath",value:function(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return new TextDecoder().decode(t);if((typeof t>"u"?"undefined":P0(t))==="object"&&typeof t.pathname=="string")return this._getPathFromURL(t);throw new TypeError("path must be a string or Buffer or URL")}},{key:"_getPathFromURL",value:function(t){if(t.hostname)throw new TypeError("ERR_INVALID_FILE_URL_HOST");var r=t.pathname;if(r.match(/%2[fF]/))throw new TypeError("ERR_INVALID_FILE_URL_PATH");return decodeURIComponent(r)}},{key:"_getOptions",value:function(t,r){return typeof r=="string"?Nn({},t,{encoding:r}):Nn({},t,r)}},{key:"_checkPermissions",value:function(t,r){return this._uid!==nr?q_(t,this._uid,this._gid,r):!0}},{key:"_parsePath",value:function(t){var r=t.match(/^([\s\S]*?)(?:\/+|$)([\s\S]*)/);if(r){var i=r[1]||"",s=r[2]||"";return{segment:i,rest:s}}else throw new Error("Could not parse pathS: "+t)}},{key:"_navigate",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t;if(t===void 0)throw new L(B.ENOENT,i);return t=t.replace(/\/+/,"/"),t=t.replace(/\/$/,"/."),t[0]==="/"||t===""?(t=t.substring(1),t?this._navigateFrom(this._root,t,r,[],i):{dir:this._root,target:this._root,name:"",remaining:"",pathStack:[]}):this._navigateFrom(this._cwd.getINode(),t,r,this._cwd.getPathStack(),i)}},{key:"_navigateFrom",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:r;if(!r)throw new L(B.ENOENT,a);if(!this._checkPermissions(W.X_OK,t.getMetadata()))throw new L(B.EACCES,a);var o=this._parsePath(r);o.segment!=="."&&(o.segment===".."?s.pop():s.push(o.segment));var c=void 0,u=void 0,d=t.getEntry(o.segment);if(d instanceof It||d instanceof Jt){if(!o.rest)return{dir:t,target:d,name:o.segment,remaining:"",pathStack:s};throw new L(B.ENOTDIR,a)}else if(d instanceof Ne){if(!o.rest)return{dir:t,target:d,name:o.segment,remaining:"",pathStack:s};c=d,u=o.rest}else if(d instanceof Un){if(!i)return{dir:t,target:d,name:o.segment,remaining:o.rest,pathStack:s};if(u=Jf(d.getLink(),o.rest),u[0]==="/")return this._navigate(u,i,a);s.pop(),c=t}else return{dir:t,target:null,name:o.segment,remaining:o.rest,pathStack:s};return this._navigateFrom(c,u,i,s,a)}}]),n}(),BS={setPos:function(e,t,r){e._pos=0},read:function(e,t,r){return 0},write:function(e,t,r,i){return t.length}},US={setPos:function(e,t,r){e._pos=0},read:function(e,t,r){return t.fill(0),t.length},write:function(e,t,r,i){return t.length}},PS={setPos:function(e,t,r){e._pos=0},read:function(e,t,r){return t.fill(0),t.length},write:function(e,t,r,i){throw new L(B.ENOSPC)}},Ci;typeof window<"u"?Ci=window:typeof _n<"u"?Ci=_n:typeof self<"u"?Ci=self:Ci={};var Dn=Ci,Id={},Qf=Object.freeze({default:Id}),Zf=Qf&&Id||Qf;function MS(n){if(Dn.crypto&&Dn.crypto.getRandomValues)return Dn.crypto.getRandomValues(n);if(typeof Dn.msCrypto=="object"&&typeof Dn.msCrypto.getRandomValues=="function")return Dn.msCrypto.getRandomValues(n);if(Zf.randomBytes){if(!(n instanceof Uint8Array))throw new TypeError("expected Uint8Array");if(n.length>65536){var e=new Error;throw e.code=22,e.message="Failed to execute 'getRandomValues' on 'Crypto': The ArrayBufferView's byte length ("+n.length+") exceeds the number of bytes of entropy available via this API (65536).",e.name="QuotaExceededError",e}var t=Zf.randomBytes(n.length);return n.set(t),n}else throw new Error("No secure random number generator available.")}var $S=MS;function GS(){var n=new Uint8Array(1);return $S(n),n[0]}var HS=GS;function YS(n){for(var e="",t=0;t<n;t++)e+=String.fromCharCode(HS());return e}var VS=YS,wd={setPos:function(e,t,r){e._pos=0},read:function(e,t,r){var i=$.from(VS(t.length),"ascii");return i.copy(t),i.length},write:function(e,t,r,i){return t.length}},jn=new ia;jn.registerChr(BS,1,3);jn.registerChr(US,1,5);jn.registerChr(PS,1,7);jn.registerChr(wd,1,8);jn.registerChr(wd,1,9);var lt=new zc(void 0,void 0,jn);lt.mkdirSync("/dev");lt.chmodSync("/dev",509);lt.mknodSync("/dev/null",W.S_IFCHR,1,3);lt.mknodSync("/dev/zero",W.S_IFCHR,1,5);lt.mknodSync("/dev/full",W.S_IFCHR,1,7);lt.mknodSync("/dev/random",W.S_IFCHR,1,8);lt.mknodSync("/dev/urandom",W.S_IFCHR,1,9);lt.chmodSync("/dev/null",438);lt.chmodSync("/dev/zero",438);lt.chmodSync("/dev/full",438);lt.chmodSync("/dev/random",438);lt.chmodSync("/dev/urandom",438);lt.mkdirSync("/tmp");lt.chmodSync("/tmp",511);lt.mkdirSync("/root");lt.chmodSync("/root",448);function qc(n){switch(n.mode&W.S_IFMT){case W.S_IFREG:return 4;case W.S_IFDIR:return 3;case W.S_IFBLK:return 1;case W.S_IFCHR:return 2;case W.S_IFLNK:return 7;case W.S_IFSOCK:return 6;default:return 0}}function $i(n){return{dev:BigInt(n.dev),ino:BigInt(n.ino),nlink:BigInt(n.nlink),filetype:qc(n),size:BigInt(n.size),atim:BigInt(n.atime),mtim:BigInt(n.mtime),ctim:BigInt(n.ctime)}}var zn=class{virtualFs;constructor(){let e=new ia,t=new Pc(e),[r,i]=t.createINode(Ne,{}),s=new $c(t);this.virtualFs=new zc(18,i,e,t,s)}fsname(){return"VirtualFilesystem"}async mkdirat(e,t){let r,i;if(e===void 0)r=this.virtualFs._navigate(t,!1);else if(e instanceof Ht)i=e,r=this.virtualFs._navigateFrom(i.dir,t,!1);else return 28;if(r.target)return 20;let[s,a]=this.virtualFs._iNodeMgr.createINode(Ne,{mode:Gs,uid:0,gid:0,parent:r.dir._dir["."]});return r.dir.addEntry(t,a),0}async getFilestat(e){try{let t=this.virtualFs.statSync(e);return{err:0,filestat:$i(t)}}catch(t){return t.errno}}async unlinkat(e,t,r){try{let i;if(e===void 0)i=this.virtualFs._navigate(t,!1);else if(e instanceof Ht)i=this.virtualFs._navigateFrom(e.dir,t,!1);else return 28;if(!i.target)return 44;if(r)i.target instanceof Ne;else if(i instanceof Ne)return 31;return i.dir.deleteEntry(i.name),0}catch(i){return i.errno}}async open(e,t,r,i,s,a,o){let c=this.virtualFs._navigate(e,!1);if(c.target){let u,d;c.remaining?(u=54,d=e.length-c.remaining.length-1):(d=-1,r&De&&r&pr?u=20:u=0);let h;return c.target instanceof Ne?h=new Ht(a,i,s,c.target,this.virtualFs._iNodeMgr):(c.target instanceof It||c.target instanceof Un)&&!(r&ot)?h=new ca(a,i,s,this.virtualFs._fdMgr.createFd(c.target,W.O_RDWR)[0]):(h=new Ht(a,i,s,c.dir,this.virtualFs._iNodeMgr),r&ot?u=54:c.target instanceof Jt&&(u=43)),{err:u,index:d,desc:h}}else if(r&De){let[u,d]=this.virtualFs._iNodeMgr.createINode(It,{mode:Wt,uid:0,gid:0});c.dir.addEntry(c.name,d);let[h,_]=this.virtualFs._fdMgr.createFd(u,W.O_RDWR);return{err:0,index:-1,desc:new ca(a,i,s,h)}}else return{err:44,index:-1,desc:new Ht(a,i,s,c.dir,this.virtualFs._iNodeMgr)}}async renameat(e,t,r,i){let s,a;if(e===void 0)s=this.virtualFs._navigate(t,!1);else if(e instanceof Ht)a=e,s=this.virtualFs._navigateFrom(a.dir,t,!1);else return 28;let o,c;if(r===void 0)o=this.virtualFs._navigate(i,!1);else if(r instanceof Ht)c=r,o=this.virtualFs._navigateFrom(c.dir,i,!1);else return 28;if(!s.target)return 44;if(o.target)return 20;if(o.remaining.length!==0)return 44;let u=s.dir.getEntryIndex(s.name);return o.dir.addEntry(o.name,u),s.dir.deleteEntry(s.name,u),0}async symlinkat(e,t,r){let i,s;if(t===void 0)i=this.virtualFs._navigate(r,!1);else if(t instanceof Ht)s=t,i=this.virtualFs._navigateFrom(s.dir,r,!1);else return 28;if(i.target)return 20;let[a,o]=this.virtualFs._iNodeMgr.createINode(Un,{mode:Bc,uid:0,gid:0,link:e});return s.dir.addEntry(i.name,o),0}async initialize(e){return 0}async mknodat(e,t,r,i){return 28}};function Ad(n,e,t,r,i){n.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:r,fs_filetype:qc(i)}}var Xc=class extends WritableStream{constructor(e){super({async write(t){await e.write(t.buffer),new WritableStream}})}},ca=class extends Lr{desc;cursor;constructor(e,t,r,i){super(),this.desc=i,Ad(this,e,t,r,i._iNode.getMetadata()),e&1&&this.fdstat.fs_filetype!==7?this.cursor=i._iNode._data.byteLength:this.cursor=0}async arrayBuffer(){return{err:0,buffer:this.desc._iNode._data}}async pread(e,t){return{err:0,buffer:this.desc._iNode._data.slice(Number(t),e+Number(t))}}async read(e){let t=this.desc._iNode._data.slice(this.cursor,this.cursor+e);return this.cursor+=t.byteLength,{err:0,buffer:t}}async read_str(){let e;return this.fdstat.fs_filetype===4?new TextDecoder().decode(e=this.desc._iNode._data):e=this.desc._iNode._link,{err:0,content:e}}async write(e){try{let t=await this.desc._iNode.write(e,this.cursor);return this.cursor+=t,{err:0,written:t}}catch(t){return{err:t.errno,written:0n}}}async pwrite(e,t){try{return{err:0,written:await this.desc._iNode.write(e,Number(t))}}catch(r){return r.errno}}async seek(e,t){let r;switch(this.fdstat.fs_filetype===7?r=BigInt((await this.desc._iNode._link).length):r=BigInt((await this.desc._iNode._data).byteLength),t){case Nr:if(this.cursor+Number(e)<0n)return{offset:BigInt(this.cursor),err:28};this.cursor+=Number(e);break;case xn:if(e<0n)return{offset:BigInt(this.cursor),err:28};this.cursor=Number(e);break;case Wn:if(r<-e)return{offset:BigInt(this.cursor),err:28};this.cursor=Number(r+e);break;default:return{offset:BigInt(this.cursor),err:28}}return{err:0,offset:BigInt(this.cursor)}}async truncate(e){try{return this.desc._iNode._data.resize(Number(e)),0}catch(t){return t.errno}}async writableStream(){try{return{err:0,stream:new Xc(this)}}catch(e){return e.errno}}async getFilestat(){return{err:0,filestat:$i(this.desc._iNode.getMetadata())}}async setFilestatTimes(e,t){return t!==void 0&&(this.desc._iNode._metadata.mtime=t),e!==void 0&&(this.desc._iNode._metadata.atime=e),0}async close(){return 0}addPollSub(e,t,r){return Promise.resolve({userdata:e,eventType:t,error:0,nbytes:BigInt(this.desc._iNode._data.byteLength)})}},Ht=class extends kr{dir;inodeMgr;dirents;constructor(e,t,r,i,s){super(),this.dir=i,this.inodeMgr=s,Ad(this,e,t,r,i.getMetadata()),this.dirents=void 0}async readdir(e){try{return(this.dirents===void 0||e)&&(this.dirents=Array.from(this.dir._dir).filter(([t,r])=>t!=="."&&t!=="..").map(([t,r],i)=>({d_next:BigInt(i+1),d_ino:BigInt(r),name:t,d_type:qc(this.inodeMgr.getINode(r).getMetadata())}))),{err:0,dirents:this.dirents}}catch(t){return{err:t.errno,dirents:[]}}}async getFilestat(){return{err:0,filestat:$i(this.dir.getMetadata())}}async setFilestatTimes(e,t){return t!==void 0&&(this.dir._metadata.mtime=t),e!==void 0&&(this.dir._metadata.atime=e),0}};var Gi=class extends zn{driverManager;async initialize(e){let t=e;return this.driverManager=t.driverManager,0}fsname(){return"DeviceFilesystem"}async mknodat(e,t,r,i){let s,a;if(e===void 0)s=this.virtualFs._navigate(t,!1);else if(e instanceof Ht)a=e,s=this.virtualFs._navigateFrom(a.dir,t,!1);else return 28;if(s.target)return 20;let[o,c]=this.virtualFs._iNodeMgr.createINode(Jt,{mode:Wt,uid:0,gid:0,rdev:r,parent:s.dir._dir["."]});s.dir.addEntry(t,c);let[u,d]=sa(r);return this.driverManager.getDriver(u).initDevice(d,i),0}async open(e,t,r,i,s,a,o){let c=await super.open(e,t,r,i,s,a,o);if(c.err!==43)return c;let u=this.virtualFs._navigateFrom(c.desc.dir,je(e),!1),[d,h]=sa(u.target._metadata.rdev),_=this.driverManager.getDriver(d),{err:y,desc:T}=await _.getDesc(h,a,i,s,u.target);return y!==0?c:{err:0,index:-1,desc:T}}},Tr=class extends Rn{ino;constructor(e,t,r,i){super(e,t,r),this.ino=i}async getFilestat(){return{err:0,filestat:$i(this.ino._metadata)}}};async function bd(n,e,t){let r=new Gi;return await n.initialize(e),await r.initialize({driverManager:n}),await r.mknodat(void 0,"null",br(0,0),{}),await r.mknodat(void 0,"zero",br(0,1),{}),await r.mknodat(void 0,"urandom",br(0,2),{}),await r.mknodat(void 0,"ttyH0",br(1,0),t),await r.mknodat(void 0,"wget0",br(2,0),{devfs:r}),r}var qS=40,JS={fsa:Fn,vfs:zn,devfs:Gi};async function Hi(n,e){let t=JS[n];if(t){let r=new t;return{err:await r.initialize(e),filesystem:r}}return{err:28,filesystem:void 0}}var fa=class{mounts;constructor(){this.mounts={}}abspath(e,t){if(e!==void 0&&!t.startsWith("/")){let r=e.getPath();return t.length===0?r:`${r==="/"?"":r}/${t}`}return t}async getDescInfo(e,t,r=0,i=0,s=Ge,a=Ge,o=0,c=qS){let u=cf(e),d,h;for(d=u.length;d>0;d=u.lastIndexOf("/",d-1)){let R=u.slice(0,d);if(h=this.mounts[R],h!==void 0)break}if(h===void 0&&(h=this.mounts["/"]),h===void 0)throw new Error("No filesystem mounted at root");let{err:_,index:y,desc:T}=await h.open(u.slice(d),r,i,s,a,o,t);if(T){let R=y>-1?u.slice(0,d+y):u;if(await T.initialize(R)!==0)return{desc:void 0,err:56,fs:void 0,path:u}}if(r&1)switch(_){case 0:case 54:{let R=await T.getFdstat();if(R!==void 0&&R.fs_filetype===7){if(c===0)return{desc:T,err:32,fs:h,path:u};let{err:X,content:V}=await T.read_str();if(X!==0)return{desc:void 0,err:_,fs:h,path:void 0};let ee;if(V.startsWith("/"))if(y!==-1){let q=u.slice(d+y);ee=V.concat(q)}else ee=V;else{let q=y===-1?T.getPath().lastIndexOf("/"):T.getPath().lastIndexOf("/",d+y-1),ue=u.slice(0,q+1);if(_===0)ee=ue.concat(V);else{let Ee=u.slice(d+y);ee=ue.concat(V,Ee)}}return await this.getDescInfo(ee,t,r,i,s,a,o,c-1)}break}default:return{desc:void 0,err:_,fs:h,path:void 0}}return _===0?(i&On&&await T.truncate(0n),{desc:T,err:_,fs:h,path:u}):{desc:void 0,err:_,fs:h,path:u}}async open(e,t=0,r=0,i=0,s=Ge,a=Ge,o=-1){return await this.getDescInfo(e,o,t,r,s,a,i)}async openat(e,t,r=0,i=0,s=0,a=Ge,o=Ge,c=-1){let u=this.abspath(e,t);return await this.getDescInfo(u,c,r,i,a,o,s)}async createDir(e,t=void 0,r=-1){let i=this.abspath(t,e);i.endsWith("/")&&(i=i.slice(0,-1));let{desc:s,fs:a,err:o}=await this.getDescInfo(Kt(i),r,1);return o!==0?o:await a.mkdirat(s,je(i))}async addSymlink(e,t,r=void 0,i=-1){let s;r!==void 0&&!t.startsWith("/")?s=`${r.getPath()}/${t}`:s=t;let{desc:a,fs:o,err:c}=await this.getDescInfo(Kt(s),i,1);return c!==0?c:o.symlinkat(e,a,je(t))}async removeEntry(e,t,r=void 0,i=-1){let s=this.abspath(r,e),{desc:a,fs:o,err:c}=await this.getDescInfo(Kt(s),i,1);return c!==0?c:await o.unlinkat(a,je(s),t)}async move(e,t,r,i,s=-1){let a=this.abspath(e,t),o=Kt(a),c=this.abspath(r,i),u=Kt(c);if(Object.keys(this.mounts).some(X=>{X.startsWith(a)})||a.startsWith(c))return 10;let d=await this.getDescInfo(o,s,1,ot);if(d.err!==0)return d.err;let h=await this.getDescInfo(a,s,1);if(h.err!==0)return h.err;let _=await h.desc.getFilestat();if(_.err!==0)return _.err;let y=_.filestat,T=await this.getDescInfo(u,s,1,ot);if(T.err!==0)return T.err;let R=await this.getDescInfo(c,s,1);if(R.err===0){let X=await R.desc.getFilestat();if(X.err!==0)return X.err;let V=X.filestat;if(y.dev!==V.dev)return 75;if(V.filetype===3){if(y.filetype!==3)return 54;let{err:ee,dirents:q}=await R.desc.readdir(!1);if(ee!==0)return ee;if(q.length!==0)return 55}}return T.fs.renameat(d.desc,je(a),T.desc,je(c))}async addMount(e,t,r,i,s,a,o,c=-1){let u=this.abspath(r,i),d;if(u!=="/"){if(d=await this.getDescInfo(u,c,1,ot),d.err!==0)return d.err;if((await d.desc.readdir(!0)).dirents.length!==0)return 55}else if(this.mounts["/"]!==void 0)return 10;let h=this.abspath(e,t),_;if(h===""){let y=await Hi(s,o);if(y.err!==0)return y.err;_=y.filesystem}else{let y=await this.getDescInfo(h,c,1,ot);if(y.err!==0)return y.err;let T=await y.desc.mountFs(o);if(T.err!==0)return T.err;_=T.fs}return this.mounts[u]=_,0}async addMountFs(e,t,r=-1){if(this.mounts[e]!==void 0)return 10;if(e==="/")return this.mounts[e]=t,0;let i=await this.getDescInfo(e,r,1,ot);return i.err!==0?i.err:(await i.desc.readdir(!0)).dirents.length===0?(this.mounts[e]=t,0):55}removeMount(e){return Object.keys(this.mounts).every(t=>t===e||!t.startsWith(e))?this.mounts[e]?(delete this.mounts[e],0):44:10}async readLink(e,t,r=-1){let{err:i,desc:s}=await this.openat(e,t,0,0,0,Ge,Ge,r);if(i!==0)return{err:i,path:void 0};if((await s.getFdstat()).fs_filetype!==7)return{err:28,path:void 0};let{err:o,content:c}=await s.read_str();return{err:o,path:c}}getMounts(){return this.mounts}};var la=class extends Lr{procNode;contents;cursor;constructor(e,t,r,i){super(),this.procNode=i,this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:r,fs_filetype:this.procNode.getFilestat().filetype},this.contents=new TextEncoder().encode(this.procNode.read()),this.cursor=0n}addPollSub(e,t,r){return Promise.resolve({userdata:e,eventType:t,nbytes:BigInt(this.contents.byteLength),error:0})}arrayBuffer(){return Promise.resolve({err:0,buffer:this.contents})}close(){return Promise.resolve(0)}getFilestat(){return Promise.resolve({err:0,filestat:this.procNode.getFilestat()})}pread(e,t){let r=this.contents.slice(Number(t),Number(t)+e);return Promise.resolve({err:0,buffer:r})}pwrite(e,t){return Promise.resolve({err:2,written:0n})}read(e,t){let r=this.contents.slice(Number(this.cursor),Number(this.cursor)+e);return this.cursor+=BigInt(r.byteLength),Promise.resolve({err:0,buffer:r})}read_str(){return Promise.resolve({err:0,content:new TextDecoder().decode(this.contents)})}seek(e,t){let r=BigInt(this.contents.byteLength);switch(t){case Nr:if(this.cursor+e<0n)return Promise.resolve({offset:this.cursor,err:28});this.cursor+=e;break;case xn:if(e<0n)return Promise.resolve({offset:this.cursor,err:28});this.cursor=e;break;case Wn:if(r<-e)return Promise.resolve({offset:this.cursor,err:28});this.cursor=r+e;break;default:return Promise.resolve({offset:this.cursor,err:28})}return Promise.resolve({err:0,offset:this.cursor})}setFilestatTimes(e,t){return Promise.resolve(8)}truncate(e){return Promise.resolve(2)}writableStream(){return Promise.resolve({err:2,stream:void 0})}write(e){return Promise.resolve({err:2,written:0n})}},da=class extends kr{procNode;dirents;constructor(e,t,r,i){super(),this.procNode=i,this.fdstat={fs_flags:e,fs_rights_base:t,fs_rights_inheriting:r,fs_filetype:3}}async readdir(e){if(this.dirents===void 0||e){let t=this.procNode.listNodes();if(t.err!==0)return{err:t.err,dirents:void 0};this.dirents=Object.entries(t.nodes).map(([r,i],s)=>({d_next:BigInt(s+1),d_ino:0n,name:r,d_type:i.getFilestat().filetype}))}return{err:0,dirents:this.dirents}}getFilestat(){return Promise.resolve({err:0,filestat:this.procNode.getFilestat()})}setFilestatTimes(e,t){return Promise.resolve(8)}};var Sa;function Td(n){Sa=n}function Cd(n){return new pa(n)}var Jc=class{constructor(){}getFilestat(){return Jc.filestat}},ha=Jc;pt(ha,"filestat",{dev:0n,ino:0n,filetype:7,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var Qc=class{getFilestat(){return Qc.filestat}},_a=Qc;pt(_a,"filestat",{dev:0n,ino:0n,filetype:4,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var Zc=class{pid;constructor(e){this.pid=e}getFilestat(){return Zc.filestat}},Yi=Zc;pt(Yi,"filestat",{dev:0n,ino:0n,filetype:3,nlink:1n,size:0n,mtim:0n,atim:0n,ctim:0n});var ga=class extends _a{read(){return Object.entries(Sa.filesystem.getMounts()).map(([e,t])=>`${e} ${t.fsname()}`).join(`
`)+`
`}},va=class extends ha{pid;constructor(e){super(),this.pid=e}read(){return this.pid.toString()}},eu=class extends Yi{listNodes(){let e={};for(let[t,r]of Object.entries(eu.specialNodes))e[t]=new r(this.pid);for(let t of Object.keys(Sa.processInfos))e[t.toString()]=new Vi(Number(t));return{err:0,nodes:e}}getNode(e){if(e==="")return{err:0,node:this};let t=Number(e);if(isNaN(t)){if(e==="self")return{err:0,node:new va(this.pid)}}else if(Sa.processInfos[t]!==void 0)return{err:0,node:new Vi(t)};return{err:44,node:void 0}}},pa=eu;pt(pa,"specialNodes",{self:va});var tu=class extends Yi{listNodes(){let e={};for(let[t,r]of Object.entries(tu.specialNodes))e[t]=new r(this.pid);return{err:0,nodes:e}}getNode(e){switch(e){case"mountinfo":return{err:0,node:new ga};default:return{err:44,node:void 0}}}},Vi=tu;pt(Vi,"specialNodes",{mountinfo:ga});var ma=class{processManager;constructor(e){this.processManager=e,Td(this.processManager)}fsname(){return"ProcFilesystem"}mkdirat(e,t){return Promise.resolve(2)}getFilestat(e){return Promise.resolve({err:58,filestat:void 0})}open(e,t,r,i,s,a,o){let c=Cd(o),u=0,d=-1,h=e.startsWith("/")?0:-1,_=e.indexOf("/",h+1);do{let R=_===-1?e.slice(h+1):e.slice(h+1,_);if(c.getFilestat().filetype!==3){u=54,d=h;break}let X=c.getNode(R);if(X.err!==0){u=X.err,d=_;break}c=X.node;let V=e.indexOf("/",_+1);h=_,_=V}while(h!==-1);h===-1&&(d=-1,u===0?r&ot&&c.getFilestat().filetype!==3?u=54:r&De&&r&pr&&(u=20):u===44&&r&De&&(u=2));let y,T=c.getFilestat().filetype;if(T===3)y=new da(a,i,s,c);else{let R=c;y=new la(a,i,s,R)}return Promise.resolve({err:u,index:d,desc:y})}unlinkat(e,t,r){return Promise.resolve(2)}renameat(e,t,r,i){return Promise.resolve(2)}symlinkat(e,t,r){return Promise.resolve(2)}initialize(e){return Promise.resolve(0)}mknodat(e,t,r,i){return Promise.resolve(2)}};var ya=class{devices;async initDriver(){return this.devices={[0]:ji,[1]:ru,[2]:nu},0}async initDevice(e){return 0}async teardownDevice(e){return 0}async teardownDriver(){return 0}async getDesc(e,t,r,i,s){return{desc:new this.devices[e](t,r,i,s),err:0}}},ji=class extends Tr{isatty(){return!1}async read(e,t){return{err:0,buffer:new ArrayBuffer(0)}}async pread(e,t){return{err:0,buffer:new ArrayBuffer(0)}}async arrayBuffer(){return{err:0,buffer:new ArrayBuffer(0)}}async read_str(){return{err:0,content:""}}async write(e){return{err:0,written:BigInt(e.byteLength)}}async pwrite(e,t){return{err:0,written:BigInt(e.byteLength)}}async seek(e,t){return{err:0,offset:0n}}async truncate(e){return 0}},ru=class extends ji{async read(e,t){let r=new ArrayBuffer(e);return new Uint8Array(r).fill(0,0,e),{err:0,buffer:r}}async pread(e,t){return this.read(e)}},nu=class extends ji{async read(e,t){let r=new ArrayBuffer(e),i=new Uint8Array(r);for(var s=0;s<e;s++)i.set([Math.floor(Math.random()*256)],s);return{err:0,buffer:r}}async pread(e,t){return this.read(e)}};var iu=class{bufSize;start;end;buffers;constructor(e=1<<16){this.bufSize=e,this.start=0,this.end=0,this.buffers=[],this.getNewBuffer()}getNewBuffer(){this.buffers.push(new ArrayBuffer(this.bufSize)),this.end=0}discardBuffer(){this.start=0,this.buffers.length===1&&(this.end=0),this.buffers.shift()}push(e){let t=0;for(;t<e.length;){(this.end>=this.bufSize||this.buffers.length===0)&&this.getNewBuffer();let r=new Uint8Array(this.buffers[this.buffers.length-1],this.end,this.bufSize-this.end),{written:i,read:s}=new TextEncoder().encodeInto(e.slice(t),r);if(t+=s,this.end+=i,this.end<this.bufSize&&t<e.length){let a=new TextEncoder().encode(e[t]),o=this.bufSize-this.end;r.set(a.slice(0,o),this.end-r.byteOffset),this.getNewBuffer(),new Uint8Array(this.buffers[this.buffers.length-1],this.end,this.bufSize-this.end).set(a.slice(o)),t++,this.end+=a.length-o}}}pop(e,t){let r=0;for(;r<t;){let i=t-r;if(this.buffers.length===1?i>this.end-this.start&&(i=this.end-this.start):i>this.bufSize-this.start&&(i=this.bufSize-this.start),i===0)break;let s=new Uint8Array(this.buffers[0],this.start,i);e.set(s,r),this.start+=i,r+=i,this.start>=this.bufSize&&this.discardBuffer()}return r}length(){if(this.buffers.length<=1)return this.end-this.start;{let e=this.buffers.length>2?this.buffers.length*this.bufSize:0;return this.bufSize-this.start+this.end+e}}},wa=class{foregroundPid;bufRequestQueue;subs;termios;driverBuffer;driverBufferCursor;userBuffer;constructor(e,t=1<<16){this.bufRequestQueue=[],this.subs=[],this.termios=e,this.driverBuffer="",this.driverBufferCursor=0,this.userBuffer=new iu(t)}splitBuf(e){let t=new ArrayBuffer(e),r=new Uint8Array(t),i=this.userBuffer.pop(r,e);return t.slice(0,i)}detectBreakCondition(e){for(let t=2;t<e.length;++t)if(e.charCodeAt(t)!==0)return t;return e.length}stripOffBytes(e){let t="";for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);t+=String.fromCharCode(i&127)[0]}return t}pushDriverInputBuffer(e){this.termios.lFlag&8&&this.printTerminal(e),this.driverBuffer=this.driverBuffer.slice(0,this.driverBufferCursor)+e+this.driverBuffer.slice(this.driverBufferCursor),this.driverBufferCursor+=e.length}pushNLDriverInputBuffer(){this.driverBuffer+=`
`,this.termios.lFlag&2&&((this.termios.lFlag&8||this.termios.lFlag&64)&&this.printTerminal(`\r
`),this.flushDriverInputBuffer())}flushDriverInputBuffer(){this.userBuffer.push(this.driverBuffer),this.driverBuffer="",this.driverBufferCursor=0}resolveUserReadRequests(){if(this.userBuffer.length()!==0)for(;this.userBuffer.length()!==0&&this.bufRequestQueue.length>0;){let e=this.bufRequestQueue.shift(),t=new ArrayBuffer(e.len),r=new Uint8Array(t),i=this.userBuffer.pop(r,e.len);e.resolve({err:0,buffer:t.slice(0,i)})}else{let e=this.bufRequestQueue.filter(t=>t.pid===this.foregroundPid);this.bufRequestQueue=this.bufRequestQueue.filter(t=>t.pid!==this.foregroundPid),e.forEach(t=>t.resolve({err:0,buffer:new ArrayBuffer(0)}))}}processTerminalInput(e,t){let r=this.termios.iFlag,i=this.termios.cFlag,s=this.termios.lFlag;if(i&128){for(r&32&&(t=this.stripOffBytes(t));t.length>0;){let a=t.charCodeAt(0);if(a===0&&t.length>1&&t.charCodeAt(1)===0){let o=this.detectBreakCondition(t);r&1||(r&2?this.flushDriverInputBuffer():r&8?this.driverBuffer+="\xFF\0\0":this.driverBuffer+="\0"),t=t.slice(o);continue}switch(a){case 10:{s&2?r&64?r&128||(r&256?this.pushNLDriverInputBuffer():this.pushDriverInputBuffer("\r")):this.pushNLDriverInputBuffer():this.pushNLDriverInputBuffer();break}case 13:{s&2?r&128||(r&256?this.pushNLDriverInputBuffer():this.pushDriverInputBuffer("\r")):this.pushDriverInputBuffer("\r");break}case 17:case 19:{r&1024||this.pushDriverInputBuffer(t[0]);break}case 3:case 26:case 28:{s&1?a===3&&this.foregroundPid!==null&&e.publishEvent(zt,this.foregroundPid):this.pushDriverInputBuffer(t[0]);break}case 4:{s&2?(this.flushDriverInputBuffer(),this.resolveUserReadRequests()):this.pushDriverInputBuffer(t[0]);break}case 21:{s&2&&s&32?this.removeFromCursorToLeft(this.driverBufferCursor):this.pushDriverInputBuffer(t[0]);break}case 127:{s&2&&s&16?this.removeFromCursorToLeft(1):this.pushDriverInputBuffer(t[0]);break}case 27:{if(s&2)if(t[1]==="["){switch(t[2]){case"C":{this.moveCursorRight(1);break}case"D":{this.moveCursorLeft(1);break}default:break}t=t.slice(3);continue}else{t=t.slice(2);continue}else this.pushDriverInputBuffer(t[0]);break}default:{this.pushDriverInputBuffer(t[0]);break}}t=t.slice(1)}if(s&2||this.flushDriverInputBuffer(),this.userBuffer.length()!==0&&this.resolveUserReadRequests(),this.userBuffer.length()!==0){for(let a of this.subs)a.resolve({userdata:a.userdata,error:0,nbytes:BigInt(this.userBuffer.length()),eventType:Dr});this.subs.length=0}}}dataForUser(){return this.userBuffer.length()}readToUser(e){return this.splitBuf(e)}sendTerminalOutput(e){return this.termios.oFlag&4&&(e=e.replaceAll(`
`,`\r
`)),this.printTerminal(e),e}};var fg={iFlag:5376,oFlag:5,cFlag:176,lFlag:32827},lu=class extends wa{terminal;constructor(e){super({...fg}),this.terminal=e,this.terminal.setInsertMode(!0)}printTerminal(e){this.terminal.io.print(e)}moveCursorRight(e){let t=e>=this.driverBuffer.length-this.driverBufferCursor?this.driverBuffer.length-this.driverBufferCursor:e;t!==0&&(this.terminal.io.print(`\x1B[${t}C`),this.driverBufferCursor+=t)}moveCursorLeft(e){let t=e>=this.driverBufferCursor?this.driverBufferCursor:e;t!==0&&(this.terminal.io.print(`\x1B[${t}D`),this.driverBufferCursor-=t)}removeFromCursorToLeft(e){let t=e>=this.driverBufferCursor?this.driverBufferCursor:e;t!==0&&(this.terminal.cursorLeft(t),this.terminal.io.print(`\x1B[${t}P`),this.driverBuffer=this.driverBuffer.slice(0,this.driverBufferCursor-t)+this.driverBuffer.slice(this.driverBufferCursor),this.driverBufferCursor-=t)}getScreenSize(){let e=this.terminal.scrollPort_.getScreenSize();return{cellsWidth:this.terminal.screenSize.width,cellsHeight:this.terminal.screenSize.height,pxWidth:e.width,pxHeight:e.height}}},Aa=class{maxTty;freedTerminals;processManager;terminals;async initDriver(e){let t=e;return this.processManager=t.processManager,this.terminals=[],this.freedTerminals=[],this.maxTty=0,0}__initFsaDropImport(e,t,r,i){t.addEventListener("dragover",function(o){o.stopPropagation(),o.preventDefault(),o.dataTransfer.dropEffect="copy"},!1);let s=this;t.addEventListener("drop",async function(a){a.stopPropagation(),a.preventDefault();let o=i.processInfos[s.terminals[e].foregroundPid].cwd;await Promise.all((Object.values(a.dataTransfer.items)||[]).map(async c=>{let u=await c.getAsFileSystemHandle(),d=`${o}/${u.name}`;if(u.kind==="file"){let h=(await u.getFile()).stream(),_=await i.filesystem.open(d,De);if(_.err!==0)return;let{err:y,stream:T}=await _.desc.writableStream();return new Promise(async R=>{await h.pipeTo(T),r&&r(d,u.name),R()})}else if(u.kind==="directory"){let h=`/tmp/temp_mount_${u.name}`;await i.filesystem.createDir(h);let{err:_,filesystem:y}=await Hi("fsa",{dir:u,keepMetadata:!1});if(_!==0)return;await i.filesystem.addMountFs(h,y),await i.spawnProcess(0,null,"/usr/bin/wash",new Pr({0:void 0,1:void 0,2:void 0,3:new yt((await i.filesystem.open("/")).desc)}),["/usr/bin/wash","-c",`cp -r ${h} ${d} ; umount ${h}`],ys,!1,qt)}}))})}__initTerminal(e){let t=new lu(e);t.terminal.installKeyboard(),t.terminal.keyboard.bindings.addBindings({"Ctrl-R":"PASS"});let r=s=>{t.processTerminalInput(this.processManager,s)},i=t.terminal.io.push();return i.onVTKeystroke=r,i.sendString=r,i.onTerminalResize=(s,a)=>{t.foregroundPid!==null&&this.processManager.publishEvent(rf,t.foregroundPid)},t}async initDevice(e,t){let r=t,i=this.freedTerminals.pop();i||(i=this.maxTty++);let s=this.__initTerminal(r.terminal);return this.terminals[i]=s,this.__initFsaDropImport(i,r.terminal.div_.getElementsByTagName("iframe")[0].contentWindow,()=>{},this.processManager),0}async teardownDevice(e){return this.terminals[e]?(delete this.terminals[e],this.freedTerminals.push(e),0):44}async teardownDriver(){return 0}async getDesc(e,t,r,i,s){return this.terminals[e]===void 0?{err:43,desc:void 0}:{err:0,desc:new du(t,r,i,s,this.terminals[e])}}async wrapCallback(e){try{await e()}catch(t){throw Object.values(this.terminals).forEach(r=>{r.terminal.io.println(`[ERROR] Unrecoverable kernel error: ${t}`)}),t}}},du=class extends Tr{hterm;constructor(e,t,r,i,s){super(e,t,r,i),this.hterm=s}isatty(){return!0}async write(e){let t=this.hterm.sendTerminalOutput(new TextDecoder().decode(e));return window.stdoutAttached&&(window.buffer+=t),{err:0,written:BigInt(e.byteLength)}}async read(e,t){return this.hterm.dataForUser()>0?{err:0,buffer:this.hterm.readToUser(e)}:this.fdstat.fs_flags&4?{err:0,buffer:new ArrayBuffer(0)}:new Promise(r=>{this.hterm.bufRequestQueue.push({len:e,pid:t,resolve:r})})}async ioctl(e,t){let r=42;switch(e){case 1:{if(t.byteLength<16)break;let i=new Int32Array(t.buffer,t.byteOffset);i[0]=this.hterm.termios.iFlag,i[1]=this.hterm.termios.oFlag,i[2]=this.hterm.termios.cFlag,i[3]=this.hterm.termios.lFlag,r=0;break}case 2:{if(t.byteLength<16)break;let i=new Int32Array(t.buffer,t.byteOffset);this.hterm.termios.iFlag=i[0],this.hterm.termios.oFlag=i[1],this.hterm.termios.cFlag=i[2],this.hterm.termios.lFlag=i[3],r=0;break}case 19:{if(t.byteLength<8)break;let i=await this.hterm.getScreenSize(),s=new Uint16Array(t.buffer,t.byteOffset);s[0]=i.cellsHeight,s[1]=i.cellsWidth,s[2]=i.pxWidth,s[3]=i.pxHeight,r=0;break}default:{1<=e&&e<=96&&2147767344<=e&&e<=2147767360&&35073<=e&&e<=35079?r=58:r=28;break}}return r}addPollSub(e,t,r){switch(t){case ls:return Promise.resolve({userdata:e,error:0,eventType:t,nbytes:0n});case Dr:return this.hterm.dataForUser()===0?new Promise(i=>{this.hterm.subs.push({pid:r,userdata:e,tag:t,resolve:i})}):Promise.resolve({userdata:e,error:0,eventType:t,nbytes:BigInt(this.hterm.dataForUser())});default:return Promise.resolve({userdata:e,error:28,eventType:jt,nbytes:0n})}}};var ba=class{responses;topResponseId;devfs;initDriver(e){return this.topResponseId=1,this.responses={},Promise.resolve(0)}teardownDriver(e){return Promise.resolve(0)}initDevice(e,t){return e===0&&(this.devfs=t.devfs),Promise.resolve(0)}teardownDevice(e,t){return Promise.resolve(0)}async makeRequest(e){try{return this.responses[this.topResponseId]=await fetch(e),this.devfs.mknodat(void 0,`wget0r${this.topResponseId}`,br(2,this.topResponseId),{}),{err:0,minor:this.topResponseId++}}catch(t){return console.log(t),{err:28,minor:-1}}}async getDesc(e,t,r,i,s){return e===0?{err:0,desc:new hu(t,r,i,s,this)}:this.responses[e]===void 0?{desc:void 0,err:44}:{err:0,desc:new _u(t,r,i,s,this.responses[e],()=>this.invalidateResponse(e))}}async invalidateResponse(e){return delete this.responses[e],this.devfs.unlinkat(void 0,`wget0r${e}`,!1)}},hu=class extends Tr{driver;constructor(e,t,r,i,s){super(e,t,r,i),this.driver=s}isatty(){return!1}async write(e){let t=new TextDecoder().decode(e),{err:r,minor:i}=await this.driver.makeRequest(t);return{err:r,written:BigInt(i)}}},_u=class extends Tr{response;invalidate;currentBuffer;body;headers;hCursor;bCursor;constructor(e,t,r,i,s,a){super(e,t,r,i),this.response=s,this.invalidate=a,this.currentBuffer=1,this.hCursor=0,this.bCursor=0;let o=[];for(let[c,u]of this.response.headers.entries())o.push(`${c}: ${u}`);this.headers=new TextEncoder().encode(o.join(`
`))}isatty(){return!1}async read(e,t){let r;return this.currentBuffer===1?(this.body===void 0&&(this.body=await this.response.arrayBuffer()),r=this.body.slice(this.bCursor,this.bCursor+e),this.bCursor+=r.byteLength):(r=this.headers.slice(this.hCursor,this.hCursor+e),this.hCursor+=r.byteLength),{err:0,buffer:r}}close(){return this.invalidate()}async ioctl(e,t){switch(e){case 0:{if(t===void 0||t.byteLength<4)return 42;let r=new Int32Array(t.buffer,t.byteOffset);return r[0]=this.response.status,0}case 2:return this.currentBuffer=1,0;case 1:return this.currentBuffer=0,0;default:return 28}}};var Ta=class{drivers;constructor(){this.drivers={}}async initialize(e){let t=new ya,r=await t.initDriver();if(r!==0)return r;let i=new Aa;if(r=await i.initDriver({processManager:e}),r!==0)return r;let s=new ba;return r=await s.initDriver({}),r!==0?r:(this.drivers[0]=t,this.drivers[1]=i,this.drivers[2]=s,0)}getDriver(e){return this.drivers[e]}};var lg="fsa0",pu="/config.json",dg={"/usr/bin/wash":["resources/wash","resources/wash.md5"]},hg={"/etc/motd":"resources/motd.txt","/usr/bin/coreutils":"resources/coreutils","/usr/local/bin/wasibox":"resources/wasibox"};async function Wd(n){await n.createDir("/usr"),await n.createDir("/usr/bin");let e=Object.entries(dg).map(async([t,[r,i]])=>{let s=await n.open(t);if(s.err===0){let a=await uf(s.desc,131072),o=new TextDecoder().decode((await(await fetch(i)).arrayBuffer()).slice(0,32));if(a===o)return 0}return Su(n,t,r,!0)});return await Promise.all(e)}async function _g(n){let e=[await n.open("/dev/ttyH0",0,0,0,Ju,0n),await n.open("/dev/ttyH0",0,0,1,Eo,0n),await n.open("/dev/ttyH0",0,0,1,Qu,0n),await n.open("/")];for(var t=0;t<e.length;t++){if(e[t].err!==0)throw`Cannot open fd=${t}, error code=${e[t].err}!`;if(e[t]===void 0)throw`Cannot open fd=${t}, descriptor is undefined!`}return new Pr({0:new yt(e[0].desc),1:new yt(e[1].desc),2:new yt(e[2].desc),3:new yt(e[3].desc)})}async function Su(n,e,t,r=!0){let{err:i,desc:s}=await n.open(e,1,De);if(i!==0)return console.warn(`Unable to resolve path for ${e}`),i;if(r||(await s.getFilestat()).filestat.size===0n){await s.truncate(0n);let a=await fetch(t);if(a.status!=200)return 44;{let{err:o,stream:c}=await s.writableStream();if(o!=0)return o;await a.body?.pipeTo(c)}}return await s.close(),0}async function Rd(n){await Promise.all([n.createDir("/tmp"),n.createDir("/proc"),n.createDir("/etc"),n.createDir("/home"),n.createDir("/usr"),n.createDir("/lib"),n.createDir("/dev")]),await Promise.all([n.createDir(qt),n.createDir("/usr/bin"),n.createDir("/usr/local")]),await Promise.all([n.createDir("/usr/local/bin"),n.createDir(`${qt}/.config`)]),await Promise.all([n.createDir(`${qt}/.config/ox`)]);let e=(async()=>{let i=await n.open(`${qt}/.washrc`,0,De);(await i.desc.getFilestat()).filestat.size===0n&&(await i.desc.write(new TextEncoder().encode(`RUST_BACKTRACE=full
`)),await i.desc.close())})(),t=Promise.all([n.open("/usr/bin/download",0,De),n.open("/usr/bin/ps",0,De),n.open("/usr/bin/free",0,De),n.open("/usr/bin/reset",0,De)]),r=Promise.all([n.addSymlink("/usr/bin/coreutils","/usr/bin/ls"),n.addSymlink("/usr/bin/coreutils","/usr/bin/mkdir"),n.addSymlink("/usr/bin/coreutils","/usr/bin/rmdir"),n.addSymlink("/usr/bin/coreutils","/usr/bin/touch"),n.addSymlink("/usr/bin/coreutils","/usr/bin/rm"),n.addSymlink("/usr/bin/coreutils","/usr/bin/mv"),n.addSymlink("/usr/bin/coreutils","/usr/bin/cp"),n.addSymlink("/usr/bin/coreutils","/usr/bin/echo"),n.addSymlink("/usr/bin/coreutils","/usr/bin/date"),n.addSymlink("/usr/bin/coreutils","/usr/bin/printf"),n.addSymlink("/usr/bin/coreutils","/usr/bin/env"),n.addSymlink("/usr/bin/coreutils","/usr/bin/cat"),n.addSymlink("/usr/bin/coreutils","/usr/bin/realpath"),n.addSymlink("/usr/bin/coreutils","/usr/bin/ln"),n.addSymlink("/usr/bin/coreutils","/usr/bin/printenv"),n.addSymlink("/usr/bin/coreutils","/usr/bin/md5sum"),n.addSymlink("/usr/bin/coreutils","/usr/bin/test"),n.addSymlink("/usr/bin/coreutils","/usr/bin/["),n.addSymlink("/usr/bin/coreutils","/usr/bin/wc"),n.addSymlink("/usr/bin/coreutils","/usr/bin/true"),n.addSymlink("/usr/bin/coreutils","/usr/bin/false"),n.addSymlink("/usr/bin/coreutils","/usr/bin/sleep"),n.addSymlink("/usr/bin/coreutils","/usr/bin/seq"),n.addSymlink("/usr/bin/coreutils","/usr/bin/head"),n.addSymlink("/usr/bin/coreutils","/usr/bin/tail"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/unzip"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/hexdump"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/imgcat"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/kill"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/purge"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/tree"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/tar"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/stty"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/mount"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/umount"),n.addSymlink("/usr/local/bin/wasibox","/usr/local/bin/wget")]);await Promise.all([e,t,r]),await Promise.all(Object.entries(hg).map(([i,s])=>Su(n,i,s,!0)))}function pg(){return new Promise(n=>{navigator.serviceWorker.register("jswasi.js").then(e=>{e!==void 0&&(e.onupdatefound=()=>n(!0),e.active&&n(!0))},e=>n(!1))})}var Sg={fsType:"vfs",opts:{}};async function gg(n){await n.addMount(void 0,"",void 0,"/","fsa",0n,{name:lg,create:"true",keepMetadata:"false"});let e,{err:t,desc:r}=await n.open(pu);if(t===0){let{err:i,content:s}=await r.read_str();if(i===0)try{e=JSON.parse(s)}catch{}await r.close()}else{await Su(n,pu,"resources/config.json");let{desc:i}=await n.open(pu),{content:s}=await i.read_str();e=JSON.parse(s)}return n.removeMount("/"),e}function vg(n,e){return n.addMount(void 0,"",void 0,"/",e.fsType,0n,e.opts)}async function mg(n){let{err:e,desc:t}=await n.open("/etc/motd",1,De|On);e===0&&await t.write(new TextEncoder().encode(`
[WARNING] Could not mount filesystem, volatile filesystem used as root for recovery
`))}async function yg(n){if(!navigator.storage.getDirectory){n.io.println("Your browser doesn't support File System Access API yet."),n.io.println("We recommend using Chrome for the time being.");return}if(!await pg()){n.io.println("Service Worker registration failed");return}if(typeof SharedArrayBuffer>"u"){window.location.href=window.location.href;return}let e=new fa,t=await gg(e);await vg(e,t.mountConfig)!==0&&n.io.println("Failed to mount root filesystem");let r=new Ta,i=new Ii(Hu,e,r),{err:s}=await e.open("/filesystem-initiated",1,De|pr);if(s===0&&await Rd(e),(await Wd(e)).some(o=>o!==0)){e.removeMount("/");let o=Sg,c=await Hi(o.fsType,o.opts);await e.addMountFs("/",c.filesystem),await Rd(e),await Wd(e),await mg(e)}await e.createDir("/dev"),await e.addMountFs("/dev",await bd(r,i,{terminal:n,currentProcessId:0})),await e.createDir("/proc"),await e.addMountFs("/proc",new ma(i)),await e.createDir("/tmp"),await e.addMount(void 0,"",void 0,"/tmp","vfs",0n,{});let a;try{a=await _g(e)}catch(o){n.io.println(`Cannot create file descriptor table for init process: ${o}`);return}await i.spawnProcess(null,null,"/usr/bin/wash",a,t.init,ys,!1,qt,{maj:1,min:0})}async function Eg(n){n("Starting purge...");let e=await navigator.storage.getDirectory();n("Cleaning storage...");for await(let t of e.keys())n(`Removing ${t}...`),await e.removeEntry(t,{recursive:!0});n("Cleaning metadata..."),await new Promise(t=>{window.indexedDB.databases().then(r=>{Promise.all(r.map(i=>{window.indexedDB.deleteDatabase(i.name)})).then(t)})}),n("Purge complete")}Object.defineProperties(window,{jswasiInit:{value:yg,writable:!1},jswasiTeardown:{value:Eg,writable:!1}});
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/**
 * @license BitSet.js v5.0.3 4/3/2018
 * http://www.xarg.org/2014/03/javascript-bit-array/
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
}
